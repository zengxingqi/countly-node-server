/*! Countly 02-11-2018 */

!function(M,a){var o=M.fn.peity=function(e,r){return a.createElement("canvas").getContext&&this.each(function(){M(this).change(function(){var n=M.extend({},r),i=this;M.each(n,function(t,e){M.isFunction(e)&&(n[t]=e.call(i))});var t=M(this).html();o.graphers[e].call(this,M.extend({},o.defaults[e],n)),M(this).trigger("chart:changed",t)}).trigger("change")}),this};o.graphers={},o.defaults={},o.add=function(t,e,n){o.graphers[t]=n,o.defaults[t]=e};var k=window.devicePixelRatio||1;function S(t,e){var n=a.createElement("canvas");if(n.setAttribute("width",t*k),n.setAttribute("height",e*k),4!=k){var i="width:"+t+"px;height:"+e+"px";n.setAttribute("style",i)}return n}o.add("pie",{colours:["#FFF4DD","#FF9900"],delimeter:"/",diameter:16},function(t){var e=M(this),n=e.text().split(t.delimeter),i=parseFloat(n[0]),r=parseFloat(n[1]),a=-Math.PI/2,o=i/r*Math.PI*2,s=S(t.diameter,t.diameter),l=s.getContext("2d"),u=s.width/2;l.beginPath(),l.moveTo(u,u),l.arc(u,u,u,o+a,0==o?2*Math.PI:a,!1),l.fillStyle=t.colours[0],l.fill(),l.beginPath(),l.moveTo(u,u),l.arc(u,u,u,a,o+a,!1),l.fillStyle=t.colours[1],l.fill(),e.wrapInner(M("<span>").hide()).append(s)}),o.add("line",{colour:"#c6d9fd",strokeColour:"#4d89f9",strokeWidth:1,delimeter:",",height:16,max:null,min:0,width:M(this).parent().outerWidth()-.1*M(this).parent().outerWidth(),useMinAsBase:!1,opaqueGradient:!1},function(t){t.width=M(this).parent().outerWidth()-.1*M(this).parent().outerWidth();var e=M(this),n=S(t.width,t.height),i=e.text().split(t.delimeter);1==i.length&&i.push(i[0]);var a,o=Math.max.apply(Math,i.concat([t.max])),s=Math.min.apply(Math,i.concat([t.min])),l=n.getContext("2d"),u=n.getContext("2d").createLinearGradient(0,0,0,30),h=n.width,c=n.height,f=h/(i.length-1),p=c/(o-s),d=[];l.beginPath(),l.moveTo(0,c+s*p);var v,m=0;if(t.useMinAsBase)for(m=i.length?i[0]:0,a=0;a<i.length;a++)i[a]<m&&(m=i[a]);for(a=0;a<i.length;a++){var y=a*f,x=c-p*(i[a]-s-m);d.push({x:y,y:x}),l.lineTo(y,x)}if(l.lineTo(h,c+s*p),t.opaqueGradient){var w=(3==(v=(v=t.colour).replace(/^\s*#|\s*$/g,"")).length&&(v=v.replace(/(.)/g,"$1$1")),r=parseInt(v.substr(0,2),16),g=parseInt(v.substr(2,2),16),b=parseInt(v.substr(4,2),16),{r:r,g:g,b:b});u.addColorStop(.3,"rgba("+w.r+", "+w.g+", "+w.b+", 0.4)"),u.addColorStop(.7,"rgba("+w.r+", "+w.g+", "+w.b+", 0.2)"),u.addColorStop(1,"rgba("+w.r+", "+w.g+", "+w.b+", 0)")}else l.globalAlpha=.3,u.addColorStop(1,t.colour);if(l.fillStyle=u,l.fill(),l.globalAlpha=1,t.strokeWidth){for(l.beginPath(),l.moveTo(0,d[0].y),a=0;a<d.length;a++)l.lineTo(d[a].x,d[a].y);l.lineWidth=t.strokeWidth*k,l.strokeStyle=t.strokeColour,l.stroke()}e.wrapInner(M("<span>").hide()).append(n)}),o.add("bar",{colour:"#4D89F9",delimeter:",",height:16,max:null,min:0,width:120,maxBars:16,padding:10,borderBottom:1},function(t){t.width=120,t.height=25;var e=M(this),n=e.text().split(t.delimeter);if(n.length>t.maxBars){for(var i=Math.ceil(n.length/t.maxBars),r=0,a=0,o=[],s=0,l=0;l<n.length;l++)s+=parseInt(n[l]),++r%i==0&&(o[a]=s/i,a++,s=0);if(r!=n.length){for(l=r;l<n.length;l++)s+=n[l];o[a]=s/i}n=o}var u=Math.max.apply(Math,n.concat([t.max])),h=Math.min.apply(Math,n.concat([t.min])),c=S(t.width,t.height),f=c.getContext("2d"),p=c.width-t.padding,d=c.height,g=d/(u-h),v=(p+2)/n.length;f.fillStyle=t.colour;for(l=0;l<n.length;l++){var m=l*v+Math.floor(t.padding/2),y=d-g*(n[l]-h)-t.borderBottom;f.fillRect(m,y,v-2,g*n[l])}t.borderBottom&&f.fillRect(0+t.padding/2,d-t.borderBottom,p,t.borderBottom),e.wrapInner(M("<span>").hide()).append(c)})}(jQuery,document),function(S,j,B){var t;t=function(L){"use strict";var t,e,m,F,b,D,q,W,h,M,n,a,c,H,f,i,r,N,O,s,o,l,u,w,p,d,g,v,y,x={},k=0;t=function(){return{common:{type:"line",lineColor:"#00f",fillColor:"#cdf",defaultPixelsPerValue:3,width:"auto",height:"auto",composite:!1,tagValuesAttribute:"values",tagOptionsPrefix:"spark",enableTagOptions:!1,enableHighlight:!0,highlightLighten:1.4,tooltipSkipNull:!0,tooltipPrefix:"",tooltipSuffix:"",disableHiddenCheck:!1,numberFormatter:!1,numberDigitGroupCount:3,numberDigitGroupSep:",",numberDecimalMark:".",disableTooltips:!1,disableInteraction:!1},line:{spotColor:"#f80",highlightSpotColor:"#5f5",highlightLineColor:"#f22",spotRadius:1.5,minSpotColor:"#f80",maxSpotColor:"#f80",lineWidth:1,normalRangeMin:B,normalRangeMax:B,normalRangeColor:"#ccc",drawNormalOnTop:!1,chartRangeMin:B,chartRangeMax:B,chartRangeMinX:B,chartRangeMaxX:B,tooltipFormat:new m('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{y}}{{suffix}}')},bar:{barColor:"#3366cc",negBarColor:"#f44",stackedBarColor:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],zeroColor:B,nullColor:B,zeroAxis:!0,barWidth:4,barSpacing:1,chartRangeMax:B,chartRangeMin:B,chartRangeClip:!1,colorMap:B,tooltipFormat:new m('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{value}}{{suffix}}')},tristate:{barWidth:4,barSpacing:1,posBarColor:"#6f6",negBarColor:"#f44",zeroBarColor:"#999",colorMap:{},tooltipFormat:new m('<span style="color: {{color}}">&#9679;</span> {{value:map}}'),tooltipValueLookups:{map:{"-1":"Loss",0:"Draw",1:"Win"}}},discrete:{lineHeight:"auto",thresholdColor:B,thresholdValue:0,chartRangeMax:B,chartRangeMin:B,chartRangeClip:!1,tooltipFormat:new m("{{prefix}}{{value}}{{suffix}}")},bullet:{targetColor:"#f33",targetWidth:3,performanceColor:"#33f",rangeColors:["#d3dafe","#a8b6ff","#7f94ff"],base:B,tooltipFormat:new m("{{fieldkey:fields}} - {{value}}"),tooltipValueLookups:{fields:{r:"Range",p:"Performance",t:"Target"}}},pie:{offset:0,sliceColors:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],borderWidth:0,borderColor:"#000",tooltipFormat:new m('<span style="color: {{color}}">&#9679;</span> {{value}} ({{percent.1}}%)')},box:{raw:!1,boxLineColor:"#000",boxFillColor:"#cdf",whiskerColor:"#000",outlierLineColor:"#333",outlierFillColor:"#fff",medianColor:"#f00",showOutliers:!0,outlierIQR:1.5,spotRadius:1.5,target:B,targetColor:"#4a2",chartRangeMax:B,chartRangeMin:B,tooltipFormat:new m("{{field:fields}}: {{value}}"),tooltipFormatFieldlistKey:"field",tooltipValueLookups:{fields:{lq:"Lower Quartile",med:"Median",uq:"Upper Quartile",lo:"Left Outlier",ro:"Right Outlier",lw:"Left Whisker",rw:"Right Whisker"}}}}},e=function(){var t,e;return t=function(){this.init.apply(this,arguments)},1<arguments.length?(arguments[0]?(t.prototype=L.extend(new arguments[0],arguments[arguments.length-1]),t._super=arguments[0].prototype):t.prototype=arguments[arguments.length-1],2<arguments.length&&((e=Array.prototype.slice.call(arguments,1,-1)).unshift(t.prototype),L.extend.apply(L,e))):t.prototype=arguments[0],t.prototype.cls=t},L.SPFormatClass=m=e({fre:/\{\{([\w.]+?)(:(.+?))?\}\}/g,precre:/(\w+)\.(\d+)/,init:function(t,e){this.format=t,this.fclass=e},render:function(t,e,n){var i,r,a,o,s,l=this,u=t;return this.format.replace(this.fre,function(){return r=arguments[1],a=arguments[3],(i=l.precre.exec(r))?(s=i[2],r=i[1]):s=!1,(o=u[r])===B?"":a&&e&&e[a]?e[a].get?e[a].get(o)||o:e[a][o]||o:(h(o)&&(o=n.get("numberFormatter")?n.get("numberFormatter")(o):c(o,s,n.get("numberDigitGroupCount"),n.get("numberDigitGroupSep"),n.get("numberDecimalMark"))),o)})}}),L.spformat=function(t,e){return new m(t,e)},F=function(t,e,n){return t<e?e:n<t?n:t},b=function(t,e){var n;return 2===e?(n=j.floor(t.length/2),t.length%2?t[n]:(t[n-1]+t[n])/2):t.length%2?(n=(t.length*e+e)/4)%1?(t[j.floor(n)]+t[j.floor(n)-1])/2:t[n-1]:(n=(t.length*e+2)/4)%1?(t[j.floor(n)]+t[j.floor(n)-1])/2:t[n-1]},D=function(t){var e;switch(t){case"undefined":t=B;break;case"null":t=null;break;case"true":t=!0;break;case"false":t=!1;break;default:t==(e=parseFloat(t))&&(t=e)}return t},q=function(t){var e,n=[];for(e=t.length;e--;)n[e]=D(t[e]);return n},W=function(t,e){var n,i,r=[];for(n=0,i=t.length;n<i;n++)t[n]!==e&&r.push(t[n]);return r},h=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},c=function(t,e,n,i,r){var a,o;for(t=(!1===e?parseFloat(t).toString():t.toFixed(e)).split(""),(a=(a=L.inArray(".",t))<0?t.length:a)<t.length&&(t[a]=r),o=a-n;0<o;o-=n)t.splice(o,0,i);return t.join("")},M=function(t,e,n){var i;for(i=e.length;i--;)if((!n||null!==e[i])&&e[i]!==t)return!1;return!0},a=function(t){return L.isArray(t)?t:[t]},n=function(t){var e;S.createStyleSheet?S.createStyleSheet().cssText=t:((e=S.createElement("style")).type="text/css",S.getElementsByTagName("head")[0].appendChild(e),e["string"==typeof S.body.style.WebkitAppearance?"innerText":"innerHTML"]=t)},L.fn.simpledraw=function(t,e,n,i){var r,a;if(n&&(r=this.data("_jqs_vcanvas")))return r;if(!1===L.fn.sparkline.canvas)return!1;if(L.fn.sparkline.canvas===B){var o=S.createElement("canvas");if(o.getContext&&o.getContext("2d"))L.fn.sparkline.canvas=function(t,e,n,i){return new g(t,e,n,i)};else{if(!S.namespaces||S.namespaces.v)return L.fn.sparkline.canvas=!1;S.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML"),L.fn.sparkline.canvas=function(t,e,n,i){return new v(t,e,n)}}}return t===B&&(t=L(this).innerWidth()),e===B&&(e=L(this).innerHeight()),r=L.fn.sparkline.canvas(t,e,this,i),(a=L(this).data("_jqs_mhandler"))&&a.registerCanvas(r),r},L.fn.cleardraw=function(){var t=this.data("_jqs_vcanvas");t&&t.reset()},L.RangeMapClass=H=e({init:function(t){var e,n,i=[];for(e in t)t.hasOwnProperty(e)&&"string"==typeof e&&-1<e.indexOf(":")&&((n=e.split(":"))[0]=0===n[0].length?-1/0:parseFloat(n[0]),n[1]=0===n[1].length?1/0:parseFloat(n[1]),n[2]=t[e],i.push(n));this.map=t,this.rangelist=i||!1},get:function(t){var e,n,i,r=this.rangelist;if((i=this.map[t])!==B)return i;if(r)for(e=r.length;e--;)if((n=r[e])[0]<=t&&n[1]>=t)return n[2];return B}}),L.range_map=function(t){return new H(t)},f=e({init:function(t,e){var n=L(t);this.$el=n,this.options=e,this.currentPageX=0,this.currentPageY=0,this.el=t,this.splist=[],this.tooltip=null,this.over=!1,this.displayTooltips=!e.get("disableTooltips"),this.highlightEnabled=!e.get("disableHighlight")},registerSparkline:function(t){this.splist.push(t),this.over&&this.updateDisplay()},registerCanvas:function(t){var e=L(t.canvas);this.canvas=t,(this.$canvas=e).mouseenter(L.proxy(this.mouseenter,this)),e.mouseleave(L.proxy(this.mouseleave,this)),e.click(L.proxy(this.mouseclick,this))},reset:function(t){this.splist=[],this.tooltip&&t&&(this.tooltip.remove(),this.tooltip=B)},mouseclick:function(t){var e=L.Event("sparklineClick");e.originalEvent=t,e.sparklines=this.splist,this.$el.trigger(e)},mouseenter:function(t){L(S.body).unbind("mousemove.jqs"),L(S.body).bind("mousemove.jqs",L.proxy(this.mousemove,this)),this.over=!0,this.currentPageX=t.pageX,this.currentPageY=t.pageY,this.currentEl=t.target,!this.tooltip&&this.displayTooltips&&(this.tooltip=new i(this.options),this.tooltip.updatePosition(t.pageX,t.pageY)),this.updateDisplay()},mouseleave:function(){L(S.body).unbind("mousemove.jqs");var t,e=this.splist,n=e.length,i=!1;for(this.over=!1,this.currentEl=null,this.tooltip&&(this.tooltip.remove(),this.tooltip=null),t=0;t<n;t++)e[t].clearRegionHighlight()&&(i=!0);i&&this.canvas.render()},mousemove:function(t){this.currentPageX=t.pageX,this.currentPageY=t.pageY,this.currentEl=t.target,this.tooltip&&this.tooltip.updatePosition(t.pageX,t.pageY),this.updateDisplay()},updateDisplay:function(){var t,e,n,i,r=this.splist,a=r.length,o=!1,s=this.$canvas.offset(),l=this.currentPageX-s.left,u=this.currentPageY-s.top;if(this.over){for(e=0;e<a;e++)(n=r[e].setRegionHighlight(this.currentEl,l,u))&&(o=!0);if(o){if((i=L.Event("sparklineRegionChange")).sparklines=this.splist,this.$el.trigger(i),this.tooltip){for(t="",e=0;e<a;e++)t+=r[e].getCurrentRegionTooltip();this.tooltip.setContent(t)}this.disableHighlight||this.canvas.render()}null===n&&this.mouseleave()}}}),i=e({sizeStyle:"position: static !important;display: block !important;visibility: hidden !important;float: left !important;",init:function(t){var e,n=t.get("tooltipClassname","jqstooltip"),i=this.sizeStyle;this.container=t.get("tooltipContainer")||S.body,this.tooltipOffsetX=t.get("tooltipOffsetX",10),this.tooltipOffsetY=t.get("tooltipOffsetY",12),L("#jqssizetip").remove(),L("#jqstooltip").remove(),this.sizetip=L("<div/>",{id:"jqssizetip",style:i,class:n}),this.tooltip=L("<div/>",{id:"jqstooltip",class:n}).appendTo(this.container),e=this.tooltip.offset(),this.offsetLeft=e.left,this.offsetTop=e.top,this.hidden=!0,L(window).unbind("resize.jqs scroll.jqs"),L(window).bind("resize.jqs scroll.jqs",L.proxy(this.updateWindowDims,this)),this.updateWindowDims()},updateWindowDims:function(){this.scrollTop=L(window).scrollTop(),this.scrollLeft=L(window).scrollLeft(),this.scrollRight=this.scrollLeft+L(window).width(),this.updatePosition()},getSize:function(t){this.sizetip.html(t).appendTo(this.container),this.width=this.sizetip.width()+1,this.height=this.sizetip.height(),this.sizetip.remove()},setContent:function(t){if(!t)return this.tooltip.css("visibility","hidden"),void(this.hidden=!0);this.getSize(t),this.tooltip.html(t).css({width:this.width,height:this.height,visibility:"visible"}),this.hidden&&(this.hidden=!1,this.updatePosition())},updatePosition:function(t,e){if(t===B){if(this.mousex===B)return;t=this.mousex-this.offsetLeft,e=this.mousey-this.offsetTop}else this.mousex=t-=this.offsetLeft,this.mousey=e-=this.offsetTop;this.height&&this.width&&!this.hidden&&(e-=this.height+this.tooltipOffsetY,t+=this.tooltipOffsetX,e<this.scrollTop&&(e=this.scrollTop),t<this.scrollLeft?t=this.scrollLeft:t+this.width>this.scrollRight&&(t=this.scrollRight-this.width),this.tooltip.css({left:t,top:e}))},remove:function(){this.tooltip.remove(),this.sizetip.remove(),this.sizetip=this.tooltip=B,L(window).unbind("resize.jqs scroll.jqs")}}),L(function(){n('.jqstooltip { position: absolute;left: 0px;top: 0px;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;z-index: 10000;}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}')}),y=[],L.fn.sparkline=function(u,n){return this.each(function(){var t,e,s=new L.fn.sparkline.options(this,n),l=L(this);if(t=function(){var t,e,n,i,r,a,o;"html"===u||u===B?((o=this.getAttribute(s.get("tagValuesAttribute")))!==B&&null!==o||(o=l.html()),t=o.replace(/(^\s*<!--)|(-->\s*$)|\s+/g,"").split(",")):t=u,e="auto"===s.get("width")?t.length*s.get("defaultPixelsPerValue"):s.get("width"),"auto"===s.get("height")?s.get("composite")&&L.data(this,"_jqs_vcanvas")||((i=S.createElement("span")).innerHTML="a",l.html(i),n=L(i).innerHeight()||L(i).height(),L(i).remove(),i=null):n=s.get("height"),s.get("disableInteraction")?r=!1:(r=L.data(this,"_jqs_mhandler"))?s.get("composite")||r.reset():(r=new f(this,s),L.data(this,"_jqs_mhandler",r)),!s.get("composite")||L.data(this,"_jqs_vcanvas")?((a=new(L.fn.sparkline[s.get("type")])(this,t,s,e,n)).render(),r&&r.registerSparkline(a)):L.data(this,"_jqs_errnotify")||(alert("Attempted to attach a composite sparkline to an element with no existing sparkline"),L.data(this,"_jqs_errnotify",!0))},L(this).html()&&!s.get("disableHiddenCheck")&&L(this).is(":hidden")||!L(this).parents("body").length){if(!s.get("composite")&&L.data(this,"_jqs_pending"))for(e=y.length;e;e--)y[e-1][0]==this&&y.splice(e-1,1);y.push([this,t]),L.data(this,"_jqs_pending",!0)}else t.call(this)})},L.fn.sparkline.defaults=t(),L.sparkline_display_visible=function(){var t,e,n,i=[];for(e=0,n=y.length;e<n;e++)t=y[e][0],L(t).is(":visible")&&!L(t).parents().is(":hidden")?(y[e][1].call(t),L.data(y[e][0],"_jqs_pending",!1),i.push(e)):L(t).closest("html").length||L.data(t,"_jqs_pending")||(L.data(y[e][0],"_jqs_pending",!1),i.push(e));for(e=i.length;e;e--)y.splice(i[e-1],1)},L.fn.sparkline.options=e({init:function(t,e){var n,i,r,a;this.userOptions=e=e||{},this.tag=t,this.tagValCache={},r=(i=L.fn.sparkline.defaults).common,this.tagOptionsPrefix=e.enableTagOptions&&(e.tagOptionsPrefix||r.tagOptionsPrefix),n=(a=this.getTagSetting("type"))===x?i[e.type||r.type]:i[a],this.mergedOptions=L.extend({},r,n,e)},getTagSetting:function(t){var e,n,i,r,a=this.tagOptionsPrefix;if(!1===a||a===B)return x;if(this.tagValCache.hasOwnProperty(t))e=this.tagValCache.key;else{if((e=this.tag.getAttribute(a+t))===B||null===e)e=x;else if("["===e.substr(0,1))for(n=(e=e.substr(1,e.length-2).split(",")).length;n--;)e[n]=D(e[n].replace(/(^\s*)|(\s*$)/g,""));else if("{"===e.substr(0,1))for(i=e.substr(1,e.length-2).split(","),e={},n=i.length;n--;)e[(r=i[n].split(":",2))[0].replace(/(^\s*)|(\s*$)/g,"")]=D(r[1].replace(/(^\s*)|(\s*$)/g,""));else e=D(e);this.tagValCache.key=e}return e},get:function(t,e){var n,i=this.getTagSetting(t);return i!==x?i:(n=this.mergedOptions[t])===B?e:n}}),L.fn.sparkline._base=e({disabled:!1,init:function(t,e,n,i,r){this.el=t,this.$el=L(t),this.values=e,this.options=n,this.width=i,this.height=r,this.currentRegion=B},initTarget:function(){var t=!this.options.get("disableInteraction");(this.target=this.$el.simpledraw(this.width,this.height,this.options.get("composite"),t))?(this.canvasWidth=this.target.pixelWidth,this.canvasHeight=this.target.pixelHeight):this.disabled=!0},render:function(){return!this.disabled||(this.el.innerHTML="",!1)},getRegion:function(t,e){},setRegionHighlight:function(t,e,n){var i,r=this.currentRegion,a=!this.options.get("disableHighlight");return e>this.canvasWidth||n>this.canvasHeight||e<0||n<0?null:r!==(i=this.getRegion(t,e,n))&&(r!==B&&a&&this.removeHighlight(),(this.currentRegion=i)!==B&&a&&this.renderHighlight(),!0)},clearRegionHighlight:function(){return this.currentRegion!==B&&(this.removeHighlight(),!(this.currentRegion=B))},renderHighlight:function(){this.changeHighlight(!0)},removeHighlight:function(){this.changeHighlight(!1)},changeHighlight:function(t){},getCurrentRegionTooltip:function(){var t,e,n,i,r,a,o,s,l,u,h,c,f,p,d=this.options,g="",v=[];if(this.currentRegion===B)return"";if(t=this.getCurrentRegionFields(),h=d.get("tooltipFormatter"))return h(this,d,t);if(d.get("tooltipChartTitle")&&(g+='<div class="jqs jqstitle">'+d.get("tooltipChartTitle")+"</div>\n"),!(e=this.options.get("tooltipFormat")))return"";if(L.isArray(e)||(e=[e]),L.isArray(t)||(t=[t]),o=this.options.get("tooltipFormatFieldlist"),s=this.options.get("tooltipFormatFieldlistKey"),o&&s){for(l=[],a=t.length;a--;)u=t[a][s],-1!=(p=L.inArray(u,o))&&(l[p]=t[a]);t=l}for(n=e.length,f=t.length,a=0;a<n;a++)for("string"==typeof(c=e[a])&&(c=new m(c)),i=c.fclass||"jqsfield",p=0;p<f;p++)t[p].isNull&&d.get("tooltipSkipNull")||(L.extend(t[p],{prefix:d.get("tooltipPrefix"),suffix:d.get("tooltipSuffix")}),r=c.render(t[p],d.get("tooltipValueLookups"),d),v.push('<div class="'+i+'">'+r+"</div>"));return v.length?g+v.join("\n"):""},getCurrentRegionFields:function(){},calcHighlightColor:function(t,e){var n,i,r,a,o=e.get("highlightColor"),s=e.get("highlightLighten");if(o)return o;if(s&&(n=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(t)||/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(t))){for(r=[],i=4===t.length?16:1,a=0;a<3;a++)r[a]=F(j.round(parseInt(n[a+1],16)*i*s),0,255);return"rgb("+r.join(",")+")"}return t}}),r={changeHighlight:function(t){var e,n=this.currentRegion,i=this.target,r=this.regionShapes[n];r&&(e=this.renderRegion(n,t),L.isArray(e)||L.isArray(r)?(i.replaceWithShapes(r,e),this.regionShapes[n]=L.map(e,function(t){return t.id})):(i.replaceWithShape(r,e),this.regionShapes[n]=e.id))},render:function(){var t,e,n,i,r=this.values,a=this.target,o=this.regionShapes;if(this.cls._super.render.call(this)){for(n=r.length;n--;)if(t=this.renderRegion(n))if(L.isArray(t)){for(e=[],i=t.length;i--;)t[i].append(),e.push(t[i].id);o[n]=e}else t.append(),o[n]=t.id;else o[n]=null;a.render()}}},L.fn.sparkline.line=N=e(L.fn.sparkline._base,{type:"line",init:function(t,e,n,i,r){N._super.init.call(this,t,e,n,i,r),this.vertices=[],this.regionMap=[],this.xvalues=[],this.yvalues=[],this.yminmax=[],this.hightlightSpotId=null,this.lastShapeId=null,this.initTarget()},getRegion:function(t,e,n){var i,r=this.regionMap;for(i=r.length;i--;)if(null!==r[i]&&e>=r[i][0]&&e<=r[i][1])return r[i][2];return B},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:null===this.yvalues[t],x:this.xvalues[t],y:this.yvalues[t],color:this.options.get("lineColor"),fillColor:this.options.get("fillColor"),offset:t}},renderHighlight:function(){var t,e,n=this.currentRegion,i=this.target,r=this.vertices[n],a=this.options,o=a.get("spotRadius"),s=a.get("highlightSpotColor"),l=a.get("highlightLineColor");r&&(o&&s&&(t=i.drawCircle(r[0],r[1],o,B,s),this.highlightSpotId=t.id,i.insertAfterShape(this.lastShapeId,t)),l&&(e=i.drawLine(r[0],this.canvasTop,r[0],this.canvasTop+this.canvasHeight,l),this.highlightLineId=e.id,i.insertAfterShape(this.lastShapeId,e)))},removeHighlight:function(){var t=this.target;this.highlightSpotId&&(t.removeShapeId(this.highlightSpotId),this.highlightSpotId=null),this.highlightLineId&&(t.removeShapeId(this.highlightLineId),this.highlightLineId=null)},scanValues:function(){var t,e,n,i,r,a=this.values,o=a.length,s=this.xvalues,l=this.yvalues,u=this.yminmax;for(t=0;t<o;t++)e=a[t],n="string"==typeof a[t],i="object"==typeof a[t]&&a[t]instanceof Array,r=n&&a[t].split(":"),n&&2===r.length?(s.push(Number(r[0])),l.push(Number(r[1])),u.push(Number(r[1]))):i?(s.push(e[0]),l.push(e[1]),u.push(e[1])):(s.push(t),null===a[t]||"null"===a[t]?l.push(null):(l.push(Number(e)),u.push(Number(e))));this.options.get("xvalues")&&(s=this.options.get("xvalues")),this.maxy=this.maxyorg=j.max.apply(j,u),this.miny=this.minyorg=j.min.apply(j,u),this.maxx=j.max.apply(j,s),this.minx=j.min.apply(j,s),this.xvalues=s,this.yvalues=l,this.yminmax=u},processRangeOptions:function(){var t=this.options,e=t.get("normalRangeMin"),n=t.get("normalRangeMax");e!==B&&(e<this.miny&&(this.miny=e),n>this.maxy&&(this.maxy=n)),t.get("chartRangeMin")!==B&&(t.get("chartRangeClip")||t.get("chartRangeMin")<this.miny)&&(this.miny=t.get("chartRangeMin")),t.get("chartRangeMax")!==B&&(t.get("chartRangeClip")||t.get("chartRangeMax")>this.maxy)&&(this.maxy=t.get("chartRangeMax")),t.get("chartRangeMinX")!==B&&(t.get("chartRangeClipX")||t.get("chartRangeMinX")<this.minx)&&(this.minx=t.get("chartRangeMinX")),t.get("chartRangeMaxX")!==B&&(t.get("chartRangeClipX")||t.get("chartRangeMaxX")>this.maxx)&&(this.maxx=t.get("chartRangeMaxX"))},drawNormalRange:function(t,e,n,i,r){var a=this.options.get("normalRangeMin"),o=this.options.get("normalRangeMax"),s=e+j.round(n-n*((o-this.miny)/r)),l=j.round(n*(o-a)/r);this.target.drawRect(t,s,i,l,B,this.options.get("normalRangeColor")).append()},render:function(){var t,e,n,i,r,a,o,s,l,u,h,c,f,p,d,g,v,m,y,x,b,w,M,k,S=this.options,C=this.target,_=this.canvasWidth,R=this.canvasHeight,A=this.vertices,T=S.get("spotRadius"),E=this.regionMap;if(N._super.render.call(this)&&(this.scanValues(),this.processRangeOptions(),w=this.xvalues,M=this.yvalues,this.yminmax.length&&!(this.yvalues.length<2))){for(i=r=0,t=this.maxx-this.minx==0?1:this.maxx-this.minx,e=this.maxy-this.miny==0?1:this.maxy-this.miny,n=this.yvalues.length-1,T&&(_<4*T||R<4*T)&&(T=0),T&&(((x=S.get("highlightSpotColor")&&!S.get("disableInteraction"))||S.get("minSpotColor")||S.get("spotColor")&&M[n]===this.miny)&&(R-=j.ceil(T)),(x||S.get("maxSpotColor")||S.get("spotColor")&&M[n]===this.maxy)&&(R-=j.ceil(T),i+=j.ceil(T)),(x||(S.get("minSpotColor")||S.get("maxSpotColor"))&&(M[0]===this.miny||M[0]===this.maxy))&&(r+=j.ceil(T),_-=j.ceil(T)),(x||S.get("spotColor")||S.get("minSpotColor")||S.get("maxSpotColor")&&(M[n]===this.miny||M[n]===this.maxy))&&(_-=j.ceil(T))),R--,S.get("normalRangeMin")===B||S.get("drawNormalOnTop")||this.drawNormalRange(r,i,R,_,e),s=[o=[]],f=p=null,d=M.length,k=0;k<d;k++)l=w[k],h=w[k+1],u=M[k],p=(c=r+j.round((l-this.minx)*(_/t)))+((k<d-1?r+j.round((h-this.minx)*(_/t)):_)-c)/2,E[k]=[f||0,p,k],f=p,null===u?k&&(null!==M[k-1]&&(o=[],s.push(o)),A.push(null)):(u<this.miny&&(u=this.miny),u>this.maxy&&(u=this.maxy),o.length||o.push([c,i+R]),a=[c,i+j.round(R-R*((u-this.miny)/e))],o.push(a),A.push(a));for(g=[],v=[],m=s.length,k=0;k<m;k++)(o=s[k]).length&&(S.get("fillColor")&&(o.push([o[o.length-1][0],i+R]),v.push(o.slice(0)),o.pop()),2<o.length&&(o[0]=[o[0][0],o[1][1]]),g.push(o));for(m=v.length,k=0;k<m;k++)C.drawShape(v[k],S.get("fillColor"),S.get("fillColor")).append();for(S.get("normalRangeMin")!==B&&S.get("drawNormalOnTop")&&this.drawNormalRange(r,i,R,_,e),m=g.length,k=0;k<m;k++)C.drawShape(g[k],S.get("lineColor"),B,S.get("lineWidth")).append();if(T&&S.get("valueSpots"))for((y=S.get("valueSpots")).get===B&&(y=new H(y)),k=0;k<d;k++)(b=y.get(M[k]))&&C.drawCircle(r+j.round((w[k]-this.minx)*(_/t)),i+j.round(R-R*((M[k]-this.miny)/e)),T,B,b).append();T&&S.get("spotColor")&&null!==M[n]&&C.drawCircle(r+j.round((w[w.length-1]-this.minx)*(_/t)),i+j.round(R-R*((M[n]-this.miny)/e)),T,B,S.get("spotColor")).append(),this.maxy!==this.minyorg&&(T&&S.get("minSpotColor")&&(l=w[L.inArray(this.minyorg,M)],C.drawCircle(r+j.round((l-this.minx)*(_/t)),i+j.round(R-R*((this.minyorg-this.miny)/e)),T,B,S.get("minSpotColor")).append()),T&&S.get("maxSpotColor")&&(l=w[L.inArray(this.maxyorg,M)],C.drawCircle(r+j.round((l-this.minx)*(_/t)),i+j.round(R-R*((this.maxyorg-this.miny)/e)),T,B,S.get("maxSpotColor")).append())),this.lastShapeId=C.getLastShapeId(),this.canvasTop=i,C.render()}}}),L.fn.sparkline.bar=O=e(L.fn.sparkline._base,r,{type:"bar",init:function(t,e,n,i,r){var a,o,s,l,u,h,c,f,p,d,g,v,m,y,x,b,w,M,k,S,C,_=parseInt(n.get("barWidth"),10),R=parseInt(n.get("barSpacing"),10),A=n.get("chartRangeMin"),T=n.get("chartRangeMax"),E=n.get("chartRangeClip"),N=1/0,P=-1/0;for(O._super.init.call(this,t,e,n,i,r),h=0,c=e.length;h<c;h++)((a="string"==typeof(S=e[h])&&-1<S.indexOf(":"))||L.isArray(S))&&(x=!0,a&&(S=e[h]=q(S.split(":"))),S=W(S,null),(o=j.min.apply(j,S))<N&&(N=o),P<(s=j.max.apply(j,S))&&(P=s));this.stacked=x,this.regionShapes={},this.barWidth=_,this.barSpacing=R,this.totalBarWidth=_+R,this.width=i=e.length*_+(e.length-1)*R,this.initTarget(),E&&(m=A===B?-1/0:A,y=T===B?1/0:T),u=[],l=x?[]:u;var I=[],z=[];for(h=0,c=e.length;h<c;h++)if(x)for(b=e[h],e[h]=k=[],I[h]=0,l[h]=z[h]=0,w=0,M=b.length;w<M;w++)null!==(S=k[w]=E?F(b[w],m,y):b[w])&&(0<S&&(I[h]+=S),N<0&&0<P?S<0?z[h]+=j.abs(S):l[h]+=S:l[h]+=j.abs(S-(S<0?P:N)),u.push(S));else S=E?F(e[h],m,y):e[h],null!==(S=e[h]=D(S))&&u.push(S);this.max=v=j.max.apply(j,u),this.min=g=j.min.apply(j,u),this.stackMax=P=x?j.max.apply(j,I):v,this.stackMin=N=x?j.min.apply(j,u):g,n.get("chartRangeMin")!==B&&(n.get("chartRangeClip")||n.get("chartRangeMin")<g)&&(g=n.get("chartRangeMin")),n.get("chartRangeMax")!==B&&(n.get("chartRangeClip")||n.get("chartRangeMax")>v)&&(v=n.get("chartRangeMax")),this.zeroAxis=p=n.get("zeroAxis",!0),d=g<=0&&0<=v&&p?0:0==p?g:0<g?g:v,this.xaxisOffset=d,f=x?j.max.apply(j,l)+j.max.apply(j,z):v-g,this.canvasHeightEf=p&&g<0?this.canvasHeight-2:this.canvasHeight-1,g<d?(C=((x&&0<=v?P:v)-d)/f*this.canvasHeight)!==j.ceil(C)&&(this.canvasHeightEf-=2,C=j.ceil(C)):C=this.canvasHeight,this.yoffset=C,L.isArray(n.get("colorMap"))?(this.colorMapByIndex=n.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=n.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===B&&(this.colorMapByValue=new H(this.colorMapByValue))),this.range=f},getRegion:function(t,e,n){var i=j.floor(e/this.totalBarWidth);return i<0||i>=this.values.length?B:i},getCurrentRegionFields:function(){var t,e,n=this.currentRegion,i=a(this.values[n]),r=[];for(e=i.length;e--;)t=i[e],r.push({isNull:null===t,value:t,color:this.calcColor(e,t,n),offset:n});return r},calcColor:function(t,e,n){var i,r,a=this.colorMapByIndex,o=this.colorMapByValue,s=this.options;return i=this.stacked?s.get("stackedBarColor"):e<0?s.get("negBarColor"):s.get("barColor"),0===e&&s.get("zeroColor")!==B&&(i=s.get("zeroColor")),o&&(r=o.get(e))?i=r:a&&a.length>n&&(i=a[n]),L.isArray(i)?i[t%i.length]:i},renderRegion:function(t,e){var n,i,r,a,o,s,l,u,h,c,f=this.values[t],p=this.options,d=this.xaxisOffset,g=[],v=this.range,m=this.stacked,y=this.target,x=t*this.totalBarWidth,b=this.canvasHeightEf,w=this.yoffset;if(l=(f=L.isArray(f)?f:[f]).length,u=f[0],a=M(null,f),c=M(d,f,!0),a)return p.get("nullColor")?(r=e?p.get("nullColor"):this.calcHighlightColor(p.get("nullColor"),p),n=0<w?w-1:w,y.drawRect(x,n,this.barWidth-1,0,r,r)):B;for(o=w,s=0;s<l;s++){if(u=f[s],m&&u===d){if(!c||h)continue;h=!0}i=0<v?j.floor(b*(j.abs(u-d)/v))+1:1,u<d||u===d&&0===w?(n=o,o+=i):(n=w-i,w-=i),r=this.calcColor(s,u,t),e&&(r=this.calcHighlightColor(r,p)),g.push(y.drawRect(x,n,this.barWidth-1,i-1,r,r))}return 1===g.length?g[0]:g}}),L.fn.sparkline.tristate=s=e(L.fn.sparkline._base,r,{type:"tristate",init:function(t,e,n,i,r){var a=parseInt(n.get("barWidth"),10),o=parseInt(n.get("barSpacing"),10);s._super.init.call(this,t,e,n,i,r),this.regionShapes={},this.barWidth=a,this.barSpacing=o,this.totalBarWidth=a+o,this.values=L.map(e,Number),this.width=i=e.length*a+(e.length-1)*o,L.isArray(n.get("colorMap"))?(this.colorMapByIndex=n.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=n.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===B&&(this.colorMapByValue=new H(this.colorMapByValue))),this.initTarget()},getRegion:function(t,e,n){return j.floor(e/this.totalBarWidth)},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:this.values[t]===B,value:this.values[t],color:this.calcColor(this.values[t],t),offset:t}},calcColor:function(t,e){var n,i=this.values,r=this.options,a=this.colorMapByIndex,o=this.colorMapByValue;return o&&(n=o.get(t))?n:a&&a.length>e?a[e]:i[e]<0?r.get("negBarColor"):0<i[e]?r.get("posBarColor"):r.get("zeroBarColor")},renderRegion:function(t,e){var n,i,r,a,o,s,l=this.values,u=this.options,h=this.target;if(n=h.pixelHeight,r=j.round(n/2),a=t*this.totalBarWidth,l[t]<0?i=(o=r)-1:0<l[t]?(o=0,i=r-1):(o=r-1,i=2),null!==(s=this.calcColor(l[t],t)))return e&&(s=this.calcHighlightColor(s,u)),h.drawRect(a,o,this.barWidth-1,i-1,s,s)}}),L.fn.sparkline.discrete=o=e(L.fn.sparkline._base,r,{type:"discrete",init:function(t,e,n,i,r){o._super.init.call(this,t,e,n,i,r),this.regionShapes={},this.values=e=L.map(e,Number),this.min=j.min.apply(j,e),this.max=j.max.apply(j,e),this.range=this.max-this.min,this.width=i="auto"===n.get("width")?2*e.length:this.width,this.interval=j.floor(i/e.length),this.itemWidth=i/e.length,n.get("chartRangeMin")!==B&&(n.get("chartRangeClip")||n.get("chartRangeMin")<this.min)&&(this.min=n.get("chartRangeMin")),n.get("chartRangeMax")!==B&&(n.get("chartRangeClip")||n.get("chartRangeMax")>this.max)&&(this.max=n.get("chartRangeMax")),this.initTarget(),this.target&&(this.lineHeight="auto"===n.get("lineHeight")?j.round(.3*this.canvasHeight):n.get("lineHeight"))},getRegion:function(t,e,n){return j.floor(e/this.itemWidth)},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:this.values[t]===B,value:this.values[t],offset:t}},renderRegion:function(t,e){var n,i,r,a,o=this.values,s=this.options,l=this.min,u=this.max,h=this.range,c=this.interval,f=this.target,p=this.canvasHeight,d=this.lineHeight,g=p-d;return i=F(o[t],l,u),a=t*c,n=j.round(g-g*((i-l)/h)),r=s.get("thresholdColor")&&i<s.get("thresholdValue")?s.get("thresholdColor"):s.get("lineColor"),e&&(r=this.calcHighlightColor(r,s)),f.drawLine(a,n,a,n+d,r)}}),L.fn.sparkline.bullet=l=e(L.fn.sparkline._base,{type:"bullet",init:function(t,e,n,i,r){var a,o,s;l._super.init.call(this,t,e,n,i,r),this.values=e=q(e),(s=e.slice())[0]=null===s[0]?s[2]:s[0],s[1]=null===e[1]?s[2]:s[1],a=j.min.apply(j,e),o=j.max.apply(j,e),a=n.get("base")===B?a<0?a:0:n.get("base"),this.min=a,this.max=o,this.range=o-a,this.shapes={},this.valueShapes={},this.regiondata={},this.width=i="auto"===n.get("width")?"4.0em":i,this.target=this.$el.simpledraw(i,r,n.get("composite")),e.length||(this.disabled=!0),this.initTarget()},getRegion:function(t,e,n){var i=this.target.getShapeAt(t,e,n);return i!==B&&this.shapes[i]!==B?this.shapes[i]:B},getCurrentRegionFields:function(){var t=this.currentRegion;return{fieldkey:t.substr(0,1),value:this.values[t.substr(1)],region:t}},changeHighlight:function(t){var e,n=this.currentRegion,i=this.valueShapes[n];switch(delete this.shapes[i],n.substr(0,1)){case"r":e=this.renderRange(n.substr(1),t);break;case"p":e=this.renderPerformance(t);break;case"t":e=this.renderTarget(t)}this.valueShapes[n]=e.id,this.shapes[e.id]=n,this.target.replaceWithShape(i,e)},renderRange:function(t,e){var n=this.values[t],i=j.round(this.canvasWidth*((n-this.min)/this.range)),r=this.options.get("rangeColors")[t-2];return e&&(r=this.calcHighlightColor(r,this.options)),this.target.drawRect(0,0,i-1,this.canvasHeight-1,r,r)},renderPerformance:function(t){var e=this.values[1],n=j.round(this.canvasWidth*((e-this.min)/this.range)),i=this.options.get("performanceColor");return t&&(i=this.calcHighlightColor(i,this.options)),this.target.drawRect(0,j.round(.3*this.canvasHeight),n-1,j.round(.4*this.canvasHeight)-1,i,i)},renderTarget:function(t){var e=this.values[0],n=j.round(this.canvasWidth*((e-this.min)/this.range)-this.options.get("targetWidth")/2),i=j.round(.1*this.canvasHeight),r=this.canvasHeight-2*i,a=this.options.get("targetColor");return t&&(a=this.calcHighlightColor(a,this.options)),this.target.drawRect(n,i,this.options.get("targetWidth")-1,r-1,a,a)},render:function(){var t,e,n=this.values.length,i=this.target;if(l._super.render.call(this)){for(t=2;t<n;t++)e=this.renderRange(t).append(),this.shapes[e.id]="r"+t,this.valueShapes["r"+t]=e.id;null!==this.values[1]&&(e=this.renderPerformance().append(),this.shapes[e.id]="p1",this.valueShapes.p1=e.id),null!==this.values[0]&&(e=this.renderTarget().append(),this.shapes[e.id]="t0",this.valueShapes.t0=e.id),i.render()}}}),L.fn.sparkline.pie=u=e(L.fn.sparkline._base,{type:"pie",init:function(t,e,n,i,r){var a,o=0;if(u._super.init.call(this,t,e,n,i,r),this.shapes={},this.valueShapes={},this.values=e=L.map(e,Number),"auto"===n.get("width")&&(this.width=this.height),0<e.length)for(a=e.length;a--;)o+=e[a];this.total=o,this.initTarget(),this.radius=j.floor(j.min(this.canvasWidth,this.canvasHeight)/2)},getRegion:function(t,e,n){var i=this.target.getShapeAt(t,e,n);return i!==B&&this.shapes[i]!==B?this.shapes[i]:B},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:this.values[t]===B,value:this.values[t],percent:this.values[t]/this.total*100,color:this.options.get("sliceColors")[t%this.options.get("sliceColors").length],offset:t}},changeHighlight:function(t){var e=this.currentRegion,n=this.renderSlice(e,t),i=this.valueShapes[e];delete this.shapes[i],this.target.replaceWithShape(i,n),this.valueShapes[e]=n.id,this.shapes[n.id]=e},renderSlice:function(t,e){var n,i,r,a,o,s=this.target,l=this.options,u=this.radius,h=l.get("borderWidth"),c=l.get("offset"),f=2*j.PI,p=this.values,d=this.total,g=c?2*j.PI*(c/360):0;for(a=p.length,r=0;r<a;r++){if(i=n=g,0<d&&(i=g+f*(p[r]/d)),t===r)return o=l.get("sliceColors")[r%l.get("sliceColors").length],e&&(o=this.calcHighlightColor(o,l)),s.drawPieSlice(u,u,u-h,n,i,B,o);g=i}},render:function(){var t,e,n=this.target,i=this.values,r=this.options,a=this.radius,o=r.get("borderWidth");if(u._super.render.call(this)){for(o&&n.drawCircle(a,a,j.floor(a-o/2),r.get("borderColor"),B,o).append(),e=i.length;e--;)i[e]&&(t=this.renderSlice(e).append(),this.valueShapes[e]=t.id,this.shapes[t.id]=e);n.render()}}}),L.fn.sparkline.box=w=e(L.fn.sparkline._base,{type:"box",init:function(t,e,n,i,r){w._super.init.call(this,t,e,n,i,r),this.values=L.map(e,Number),this.width="auto"===n.get("width")?"4.0em":i,this.initTarget(),this.values.length||(this.disabled=1)},getRegion:function(){return 1},getCurrentRegionFields:function(){var t=[{field:"lq",value:this.quartiles[0]},{field:"med",value:this.quartiles[1]},{field:"uq",value:this.quartiles[2]}];return this.loutlier!==B&&t.push({field:"lo",value:this.loutlier}),this.routlier!==B&&t.push({field:"ro",value:this.routlier}),this.lwhisker!==B&&t.push({field:"lw",value:this.lwhisker}),this.rwhisker!==B&&t.push({field:"rw",value:this.rwhisker}),t},render:function(){var t,e,n,i,r,a,o,s,l,u,h,c=this.target,f=this.values,p=f.length,d=this.options,g=this.canvasWidth,v=this.canvasHeight,m=d.get("chartRangeMin")===B?j.min.apply(j,f):d.get("chartRangeMin"),y=d.get("chartRangeMax")===B?j.max.apply(j,f):d.get("chartRangeMax"),x=0;if(w._super.render.call(this)){if(d.get("raw"))d.get("showOutliers")&&5<f.length?(e=f[0],t=f[1],i=f[2],r=f[3],a=f[4],o=f[5],s=f[6]):(t=f[0],i=f[1],r=f[2],a=f[3],o=f[4]);else if(f.sort(function(t,e){return t-e}),i=b(f,1),r=b(f,2),n=(a=b(f,3))-i,d.get("showOutliers")){for(t=o=B,l=0;l<p;l++)t===B&&f[l]>i-n*d.get("outlierIQR")&&(t=f[l]),f[l]<a+n*d.get("outlierIQR")&&(o=f[l]);e=f[0],s=f[p-1]}else t=f[0],o=f[p-1];this.quartiles=[i,r,a],this.lwhisker=t,this.rwhisker=o,this.loutlier=e,this.routlier=s,h=g/(y-m+1),d.get("showOutliers")&&(x=j.ceil(d.get("spotRadius")),h=(g-=2*j.ceil(d.get("spotRadius")))/(y-m+1),e<t&&c.drawCircle((e-m)*h+x,v/2,d.get("spotRadius"),d.get("outlierLineColor"),d.get("outlierFillColor")).append(),o<s&&c.drawCircle((s-m)*h+x,v/2,d.get("spotRadius"),d.get("outlierLineColor"),d.get("outlierFillColor")).append()),c.drawRect(j.round((i-m)*h+x),j.round(.1*v),j.round((a-i)*h),j.round(.8*v),d.get("boxLineColor"),d.get("boxFillColor")).append(),c.drawLine(j.round((t-m)*h+x),j.round(v/2),j.round((i-m)*h+x),j.round(v/2),d.get("lineColor")).append(),c.drawLine(j.round((t-m)*h+x),j.round(v/4),j.round((t-m)*h+x),j.round(v-v/4),d.get("whiskerColor")).append(),c.drawLine(j.round((o-m)*h+x),j.round(v/2),j.round((a-m)*h+x),j.round(v/2),d.get("lineColor")).append(),c.drawLine(j.round((o-m)*h+x),j.round(v/4),j.round((o-m)*h+x),j.round(v-v/4),d.get("whiskerColor")).append(),c.drawLine(j.round((r-m)*h+x),j.round(.1*v),j.round((r-m)*h+x),j.round(.9*v),d.get("medianColor")).append(),d.get("target")&&(u=j.ceil(d.get("spotRadius")),c.drawLine(j.round((d.get("target")-m)*h+x),j.round(v/2-u),j.round((d.get("target")-m)*h+x),j.round(v/2+u),d.get("targetColor")).append(),c.drawLine(j.round((d.get("target")-m)*h+x-u),j.round(v/2),j.round((d.get("target")-m)*h+x+u),j.round(v/2),d.get("targetColor")).append()),c.render()}}}),p=e({init:function(t,e,n,i){this.target=t,this.id=e,this.type=n,this.args=i},append:function(){return this.target.appendShape(this),this}}),d=e({_pxregex:/(\d+)(px)?\s*$/i,init:function(t,e,n){t&&(this.width=t,this.height=e,this.target=n,this.lastShapeId=null,n[0]&&(n=n[0]),L.data(n,"_jqs_vcanvas",this))},drawLine:function(t,e,n,i,r,a){return this.drawShape([[t,e],[n,i]],r,a)},drawShape:function(t,e,n,i){return this._genShape("Shape",[t,e,n,i])},drawCircle:function(t,e,n,i,r,a){return this._genShape("Circle",[t,e,n,i,r,a])},drawPieSlice:function(t,e,n,i,r,a,o){return this._genShape("PieSlice",[t,e,n,i,r,a,o])},drawRect:function(t,e,n,i,r,a){return this._genShape("Rect",[t,e,n,i,r,a])},getElement:function(){return this.canvas},getLastShapeId:function(){return this.lastShapeId},reset:function(){alert("reset not implemented")},_insert:function(t,e){L(e).html(t)},_calculatePixelDims:function(t,e,n){var i;i=this._pxregex.exec(e),this.pixelHeight=i?i[1]:L(n).height(),i=this._pxregex.exec(t),this.pixelWidth=i?i[1]:L(n).width()},_genShape:function(t,e){var n=k++;return e.unshift(n),new p(this,n,t,e)},appendShape:function(t){alert("appendShape not implemented")},replaceWithShape:function(t,e){alert("replaceWithShape not implemented")},insertAfterShape:function(t,e){alert("insertAfterShape not implemented")},removeShapeId:function(t){alert("removeShapeId not implemented")},getShapeAt:function(t,e,n){alert("getShapeAt not implemented")},render:function(){alert("render not implemented")}}),g=e(d,{init:function(t,e,n,i){g._super.init.call(this,t,e,n),this.canvas=S.createElement("canvas"),n[0]&&(n=n[0]),L.data(n,"_jqs_vcanvas",this),L(this.canvas).css({display:"inline-block",width:t,height:e,verticalAlign:"top"}),this._insert(this.canvas,n),this._calculatePixelDims(t,e,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,this.interact=i,this.shapes={},this.shapeseq=[],this.currentTargetShapeId=B,L(this.canvas).css({width:this.pixelWidth,height:this.pixelHeight})},_getContext:function(t,e,n){var i=this.canvas.getContext("2d");return t!==B&&(i.strokeStyle=t),i.lineWidth=n===B?1:n,e!==B&&(i.fillStyle=e),i},reset:function(){this._getContext().clearRect(0,0,this.pixelWidth,this.pixelHeight),this.shapes={},this.shapeseq=[],this.currentTargetShapeId=B},_drawShape:function(t,e,n,i,r){var a,o,s=this._getContext(n,i,r);for(s.beginPath(),s.moveTo(e[0][0]+.5,e[0][1]+.5),a=1,o=e.length;a<o;a++)s.lineTo(e[a][0]+.5,e[a][1]+.5);n!==B&&s.stroke(),i!==B&&s.fill(),this.targetX!==B&&this.targetY!==B&&s.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=t)},_drawCircle:function(t,e,n,i,r,a,o){var s=this._getContext(r,a,o);s.beginPath(),s.arc(e,n,i,0,2*j.PI,!1),this.targetX!==B&&this.targetY!==B&&s.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=t),r!==B&&s.stroke(),a!==B&&s.fill()},_drawPieSlice:function(t,e,n,i,r,a,o,s){var l=this._getContext(o,s);l.beginPath(),l.moveTo(e,n),l.arc(e,n,i,r,a,!1),l.lineTo(e,n),l.closePath(),o!==B&&l.stroke(),s&&l.fill(),this.targetX!==B&&this.targetY!==B&&l.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=t)},_drawRect:function(t,e,n,i,r,a,o){return this._drawShape(t,[[e,n],[e+i,n],[e+i,n+r],[e,n+r],[e,n]],a,o)},appendShape:function(t){return this.shapes[t.id]=t,this.shapeseq.push(t.id),this.lastShapeId=t.id,t.id},replaceWithShape:function(t,e){var n,i=this.shapeseq;for(this.shapes[e.id]=e,n=i.length;n--;)i[n]==t&&(i[n]=e.id);delete this.shapes[t]},replaceWithShapes:function(t,e){var n,i,r,a=this.shapeseq,o={};for(i=t.length;i--;)o[t[i]]=!0;for(i=a.length;i--;)o[n=a[i]]&&(a.splice(i,1),delete this.shapes[n],r=i);for(i=e.length;i--;)a.splice(r,0,e[i].id),this.shapes[e[i].id]=e[i]},insertAfterShape:function(t,e){var n,i=this.shapeseq;for(n=i.length;n--;)if(i[n]===t)return i.splice(n+1,0,e.id),void(this.shapes[e.id]=e)},removeShapeId:function(t){var e,n=this.shapeseq;for(e=n.length;e--;)if(n[e]===t){n.splice(e,1);break}delete this.shapes[t]},getShapeAt:function(t,e,n){return this.targetX=e,this.targetY=n,this.render(),this.currentTargetShapeId},render:function(){var t,e,n=this.shapeseq,i=this.shapes,r=n.length;for(this._getContext().clearRect(0,0,this.pixelWidth,this.pixelHeight),e=0;e<r;e++)this["_draw"+(t=i[n[e]]).type].apply(this,t.args);this.interact||(this.shapes={},this.shapeseq=[])}}),v=e(d,{init:function(t,e,n){var i;v._super.init.call(this,t,e,n),n[0]&&(n=n[0]),L.data(n,"_jqs_vcanvas",this),this.canvas=S.createElement("span"),L(this.canvas).css({display:"inline-block",position:"relative",overflow:"hidden",width:t,height:e,margin:"0px",padding:"0px",verticalAlign:"top"}),this._insert(this.canvas,n),this._calculatePixelDims(t,e,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,i='<v:group coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" style="position:absolute;top:0;left:0;width:'+this.pixelWidth+"px;height="+this.pixelHeight+'px;"></v:group>',this.canvas.insertAdjacentHTML("beforeEnd",i),this.group=L(this.canvas).children()[0],this.rendered=!1,this.prerender=""},_drawShape:function(t,e,n,i,r){var a,o,s,l,u,h,c=[];for(h=0,u=e.length;h<u;h++)c[h]=e[h][0]+","+e[h][1];return a=c.splice(0,1),r=r===B?1:r,o=n===B?' stroked="false" ':' strokeWeight="'+r+'px" strokeColor="'+n+'" ',s=i===B?' filled="false"':' fillColor="'+i+'" filled="true" ',l=c[0]===c[c.length-1]?"x ":"",'<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"  id="jqsshape'+t+'" '+o+s+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;"  path="m '+a+" l "+c.join(", ")+" "+l+'e"> </v:shape>'},_drawCircle:function(t,e,n,i,r,a,o){return'<v:oval  id="jqsshape'+t+'" '+(r===B?' stroked="false" ':' strokeWeight="'+o+'px" strokeColor="'+r+'" ')+(a===B?' filled="false"':' fillColor="'+a+'" filled="true" ')+' style="position:absolute;top:'+(n-=i)+"px; left:"+(e-=i)+"px; width:"+2*i+"px; height:"+2*i+'px"></v:oval>'},_drawPieSlice:function(t,e,n,i,r,a,o,s){var l,u,h,c,f,p,d;if(r===a)return"";if(a-r==2*j.PI&&(r=0,a=2*j.PI),u=e+j.round(j.cos(r)*i),h=n+j.round(j.sin(r)*i),c=e+j.round(j.cos(a)*i),f=n+j.round(j.sin(a)*i),u===c&&h===f){if(a-r<j.PI)return"";u=c=e+i,h=f=n}return u===c&&h===f&&a-r<j.PI?"":(l=[e-i,n-i,e+i,n+i,u,h,c,f],p=o===B?' stroked="false" ':' strokeWeight="1px" strokeColor="'+o+'" ',d=s===B?' filled="false"':' fillColor="'+s+'" filled="true" ','<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"  id="jqsshape'+t+'" '+p+d+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;"  path="m '+e+","+n+" wa "+l.join(", ")+' x e"> </v:shape>')},_drawRect:function(t,e,n,i,r,a,o){return this._drawShape(t,[[e,n],[e,n+r],[e+i,n+r],[e+i,n],[e,n]],a,o)},reset:function(){this.group.innerHTML=""},appendShape:function(t){var e=this["_draw"+t.type].apply(this,t.args);return this.rendered?this.group.insertAdjacentHTML("beforeEnd",e):this.prerender+=e,this.lastShapeId=t.id,t.id},replaceWithShape:function(t,e){var n=L("#jqsshape"+t),i=this["_draw"+e.type].apply(this,e.args);n[0].outerHTML=i},replaceWithShapes:function(t,e){var n,i=L("#jqsshape"+t[0]),r="",a=e.length;for(n=0;n<a;n++)r+=this["_draw"+e[n].type].apply(this,e[n].args);for(i[0].outerHTML=r,n=1;n<t.length;n++)L("#jqsshape"+t[n]).remove()},insertAfterShape:function(t,e){var n=L("#jqsshape"+t),i=this["_draw"+e.type].apply(this,e.args);n[0].insertAdjacentHTML("afterEnd",i)},removeShapeId:function(t){var e=L("#jqsshape"+t);this.group.removeChild(e[0])},getShapeAt:function(t,e,n){return t.id.substr(8)},render:function(){this.rendered||(this.group.innerHTML=this.prerender,this.rendered=!0)}})},"function"==typeof define&&define.amd?define(["jquery"],t):jQuery&&!jQuery.fn.sparkline&&t(jQuery)}(document,Math),function(a){a.color={},a.color.make=function(t,e,n,i){var r={};return r.r=t||0,r.g=e||0,r.b=n||0,r.a=null!=i?i:1,r.add=function(t,e){for(var n=0;n<t.length;++n)r[t.charAt(n)]+=e;return r.normalize()},r.scale=function(t,e){for(var n=0;n<t.length;++n)r[t.charAt(n)]*=e;return r.normalize()},r.toString=function(){return 1<=r.a?"rgb("+[r.r,r.g,r.b].join(",")+")":"rgba("+[r.r,r.g,r.b,r.a].join(",")+")"},r.normalize=function(){function t(t,e,n){return e<t?t:n<e?n:e}return r.r=t(0,parseInt(r.r),255),r.g=t(0,parseInt(r.g),255),r.b=t(0,parseInt(r.b),255),r.a=t(0,r.a,1),r},r.clone=function(){return a.color.make(r.r,r.b,r.g,r.a)},r.normalize()},a.color.extract=function(t,e){var n;do{if(""!=(n=t.css(e).toLowerCase())&&"transparent"!=n)break;t=t.parent()}while(t.length&&!a.nodeName(t.get(0),"body"));return"rgba(0, 0, 0, 0)"==n&&(n="transparent"),a.color.parse(n)},a.color.parse=function(t){var e,n=a.color.make;if(e=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(t))return n(parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10));if(e=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(t))return n(parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10),parseFloat(e[4]));if(e=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(t))return n(2.55*parseFloat(e[1]),2.55*parseFloat(e[2]),2.55*parseFloat(e[3]));if(e=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(t))return n(2.55*parseFloat(e[1]),2.55*parseFloat(e[2]),2.55*parseFloat(e[3]),parseFloat(e[4]));if(e=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(t))return n(parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16));if(e=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(t))return n(parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16));var i=a.trim(t).toLowerCase();return"transparent"==i?n(255,255,255,0):n((e=r[i]||[0,0,0])[0],e[1],e[2])};var r={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),CanvasRenderingContext2D.prototype.dashedLineTo=function(t,e,n,i,r){var a=function(t,e){return t<=e},o=function(t,e){return e<=t},s=function(t,e){return Math.min(t,e)},l=function(t,e){return Math.max(t,e)},u={thereYet:o,cap:s},h={thereYet:o,cap:s};0<e-i&&(h.thereYet=a,h.cap=l),0<t-n&&(u.thereYet=a,u.cap=l),this.moveTo(t,e);for(var c=t,f=e,p=0,d=!0;!u.thereYet(c,n)||!h.thereYet(f,i);){var g=Math.atan2(i-e,n-t),v=r[p];c=u.cap(n,c+Math.cos(g)*v),f=h.cap(i,f+Math.sin(g)*v),d?this.lineTo(c,f):this.moveTo(c,f),p=(p+1)%r.length,d=!d}},function(Y){var p=Object.prototype.hasOwnProperty;function X(t,e){var n=e.children("."+t)[0];if(null==n&&((n=document.createElement("canvas")).className=t,Y(n).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(e),!n.getContext)){if(!window.G_vmlCanvasManager)throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");n=window.G_vmlCanvasManager.initElement(n)}this.element=n;var i=this.context=n.getContext("2d"),r=window.devicePixelRatio||1,a=i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1;this.pixelRatio=r/a,this.resize(e.width(),e.height()),this.textContainer=null,this.text={},this._textCache={}}function i(v,t,e,i){var C=[],_={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:1,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1e3/60},hooks:{}},p=null,n=null,h=null,w=null,s=null,d=[],g=[],M={left:0,right:0,top:0,bottom:0},k=0,S=0,R={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},A=this;function T(t,e){e=[A].concat(e);for(var n=0;n<t.length;++n)t[n].apply(this,e)}function r(t){C=function(t){for(var e=[],n=0;n<t.length;++n){var i=Y.extend(!0,{},_.series);null!=t[n].data?(i.data=t[n].data,delete t[n].data,Y.extend(!0,i,t[n]),t[n].data=i.data):i.data=t[n],e.push(i)}return e}(t),function(){var t,e=C.length,n=-1;for(t=0;t<C.length;++t){var i=C[t].color;null!=i&&(e--,"number"==typeof i&&n<i&&(n=i))}e<=n&&(e=n+1);var r,a=[],o=_.colors,s=o.length,l=0;for(t=0;t<e;t++)r=Y.color.parse(o[t%s]||"#666"),t%s==0&&t&&(l=0<=l?l<.5?-l-.2:0:-l),a[t]=r.scale("rgb",1+l);var u,h=0;for(t=0;t<C.length;++t){if(null==(u=C[t]).color?(u.color=a[h].toString(),++h):"number"==typeof u.color&&(u.color=a[u.color].toString()),null==u.lines.show){var c,f=!0;for(c in u)if(u[c]&&u[c].show){f=!1;break}f&&(u.lines.show=!0)}null==u.lines.zero&&(u.lines.zero=!!u.lines.fill),u.xaxis=y(d,m(u,"x")),u.yaxis=y(g,m(u,"y"))}}(),function(){var t,e,n,i,r,a,o,s,l,u,h,c,f=Number.POSITIVE_INFINITY,p=Number.NEGATIVE_INFINITY,d=Number.MAX_VALUE;function g(t,e,n){e<t.datamin&&e!=-d&&(t.datamin=e),n>t.datamax&&n!=d&&(t.datamax=n)}for(Y.each(E(),function(t,e){e.datamin=f,e.datamax=p,e.used=!1}),t=0;t<C.length;++t)(r=C[t]).datapoints={points:[]},T(R.processRawData,[r,r.data,r.datapoints]);for(t=0;t<C.length;++t){if(r=C[t],h=r.data,!(c=r.datapoints.format)){if((c=[]).push({x:!0,number:!0,required:!0}),c.push({y:!0,number:!0,required:!0}),r.bars.show||r.lines.show&&r.lines.fill){var v=!!(r.bars.show&&r.bars.zero||r.lines.show&&r.lines.zero);c.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:v}),r.bars.horizontal&&(delete c[c.length-1].y,c[c.length-1].x=!0)}r.datapoints.format=c}if(null==r.datapoints.pointsize){r.datapoints.pointsize=c.length,o=r.datapoints.pointsize,a=r.datapoints.points;var m=r.lines.show&&r.lines.steps;for(r.xaxis.used=r.yaxis.used=!0,e=n=0;e<h.length;++e,n+=o){var y=null==(u=h[e]);if(!y)for(i=0;i<o;++i)s=u[i],(l=c[i])&&(l.number&&null!=s&&(s=+s,isNaN(s)?s=null:s==1/0?s=d:s==-1/0&&(s=-d)),null==s&&(l.required&&(y=!0),null!=l.defaultValue&&(s=l.defaultValue))),a[n+i]=s;if(y)for(i=0;i<o;++i)null!=(s=a[n+i])&&!1!==(l=c[i]).autoscale&&(l.x&&g(r.xaxis,s,s),l.y&&g(r.yaxis,s,s)),a[n+i]=null;else if(m&&0<n&&null!=a[n-o]&&a[n-o]!=a[n]&&a[n-o+1]!=a[n+1]){for(i=0;i<o;++i)a[n+o+i]=a[n+i];a[n+1]=a[n-o+1],n+=o}}}}for(t=0;t<C.length;++t)r=C[t],T(R.processDatapoints,[r,r.datapoints]);for(t=0;t<C.length;++t){r=C[t],a=r.datapoints.points,o=r.datapoints.pointsize,c=r.datapoints.format;var x=f,b=f,w=p,M=p;for(e=0;e<a.length;e+=o)if(null!=a[e])for(i=0;i<o;++i)s=a[e+i],(l=c[i])&&!1!==l.autoscale&&s!=d&&s!=-d&&(l.x&&(s<x&&(x=s),w<s&&(w=s)),l.y&&(s<b&&(b=s),M<s&&(M=s)));if(r.bars.show){var k;switch(r.bars.align){case"left":k=0;break;case"right":k=-r.bars.barWidth;break;default:k=-r.bars.barWidth/2}r.bars.horizontal?(b+=k,M+=k+r.bars.barWidth):(x+=k,w+=k+r.bars.barWidth)}g(r.xaxis,x,w),g(r.yaxis,b,M)}Y.each(E(),function(t,e){e.datamin==f&&(e.datamin=null),e.datamax==p&&(e.datamax=null)})}()}function m(t,e){var n=t[e+"axis"];return"object"==typeof n&&(n=n.n),"number"!=typeof n&&(n=1),n}function E(){return Y.grep(d.concat(g),function(t){return t})}function c(t){var e,n,i={};for(e=0;e<d.length;++e)(n=d[e])&&n.used&&(i["x"+n.n]=n.c2p(t.left));for(e=0;e<g.length;++e)(n=g[e])&&n.used&&(i["y"+n.n]=n.c2p(t.top));return void 0!==i.x1&&(i.x=i.x1),void 0!==i.y1&&(i.y=i.y1),i}function y(t,e){return t[e-1]||(t[e-1]={n:e,direction:t==d?"x":"y",options:Y.extend(!0,{},t==d?_.xaxis:_.yaxis)}),t[e-1]}function a(){z&&clearTimeout(z),h.unbind("mousemove",L),h.unbind("mouseleave",F),h.unbind("click",D),T(R.shutdown,[h])}function o(n){var t=n.labelWidth,e=n.labelHeight,i=n.options.position,r="x"===n.direction,a=n.options.tickLength,o=_.grid.axisMargin,s=_.grid.labelMargin,l=!0,u=!0,h=!0,c=!1;Y.each(r?d:g,function(t,e){e&&(e.show||e.reserveSpace)&&(e===n?c=!0:e.options.position===i&&(c?u=!1:l=!1),c||(h=!1))}),u&&(o=0),null==a&&(a=h?"full":5),isNaN(+a)||(s+=+a),r?(e+=s,"bottom"==i?(M.bottom+=e+o,n.box={top:p.height-M.bottom,height:e}):(n.box={top:M.top+o,height:e},M.top+=e+o)):(t+=s,"left"==i?(n.box={left:M.left+o,width:t},M.left+=t+o):(M.right+=t+o,n.box={left:p.width-M.right,width:t})),n.position=i,n.tickLength=a,n.box.padding=s,n.innermost=l}function l(){var t,e=E(),n=_.grid.show;for(var i in M){var r=_.grid.margin||0;M[i]="number"==typeof r?r:r[i]||0}for(var i in T(R.processOffset,[M]),M)"object"==typeof _.grid.borderWidth?M[i]+=n?_.grid.borderWidth[i]:0:M[i]+=n?_.grid.borderWidth:0;if(Y.each(e,function(t,e){var n=e.options;e.show=null==n.show?e.used:n.show,e.reserveSpace=null==n.reserveSpace?e.show:n.reserveSpace,function(t){var e=t.options,n=+(null!=e.min?e.min:t.datamin),i=+(null!=e.max?e.max:t.datamax),r=i-n;if(0==r){var a=0==i?1:.01;null==e.min&&(n-=a),null!=e.max&&null==e.min||(i+=a)}else{var o=e.autoscaleMargin;null!=o&&(null==e.min&&(n-=r*o)<0&&null!=t.datamin&&0<=t.datamin&&(n=0),null==e.max&&0<(i+=r*o)&&null!=t.datamax&&t.datamax<=0&&(i=0))}t.min=n,t.max=i}(e)}),n){var a=Y.grep(e,function(t){return t.show||t.reserveSpace});for(Y.each(a,function(t,e){var n,i;!function(t){var e,n=t.options;e="number"==typeof n.ticks&&0<n.ticks?n.ticks:.3*Math.sqrt("x"==t.direction?p.width:p.height);var i=(t.max-t.min)/e,r=-Math.floor(Math.log(i)/Math.LN10),a=n.tickDecimals;null!=a&&a<r&&(r=a);var o,s=Math.pow(10,-r),l=i/s;l<1.5?o=1:l<3?(o=2,2.25<l&&(null==a||r+1<=a)&&(o=2.5,++r)):o=l<7.5?5:10;o*=s,null!=n.minTickSize&&o<n.minTickSize&&(o=n.minTickSize);if(t.delta=i,t.tickDecimals=Math.max(0,null!=a?a:r),t.tickSize=n.tickSize||o,"time"==n.mode&&!t.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");t.tickGenerator||(t.tickGenerator=function(t){for(var e,n,i,r=[],a=(n=t.min,(i=t.tickSize)*Math.floor(n/i)),o=0,s=Number.NaN;e=s,s=a+o*t.tickSize,r.push(s),++o,s<t.max&&s!=e;);return r},t.tickFormatter=function(t,e){var n=e.tickDecimals?Math.pow(10,e.tickDecimals):1,i=""+Math.round(t*n)/n;if(null!=e.tickDecimals){var r=i.indexOf("."),a=-1==r?0:i.length-r-1;if(a<e.tickDecimals)return(a?i:i+".")+(""+n).substr(1,e.tickDecimals-a)}return i});Y.isFunction(n.tickFormatter)&&(t.tickFormatter=function(t,e){return""+n.tickFormatter(t,e)});if(null!=n.alignTicksWithAxis){var u=("x"==t.direction?d:g)[n.alignTicksWithAxis-1];if(u&&u.used&&u!=t){var h=t.tickGenerator(t);if(0<h.length&&(null==n.min&&(t.min=Math.min(t.min,h[0])),null==n.max&&1<h.length&&(t.max=Math.max(t.max,h[h.length-1]))),t.tickGenerator=function(t){var e,n,i=[];for(n=0;n<u.ticks.length;++n)e=(u.ticks[n].v-u.min)/(u.max-u.min),e=t.min+e*(t.max-t.min),i.push(e);return i},!t.mode&&null==n.tickDecimals){var c=Math.max(0,1-Math.floor(Math.log(t.delta)/Math.LN10)),f=t.tickGenerator(t);1<f.length&&/\..*0$/.test((f[1]-f[0]).toFixed(c))||(t.tickDecimals=c)}}}}(e),function(t){var e=t.options.ticks,n=[];null==e||"number"==typeof e&&0<e?n=t.tickGenerator(t):e&&(n=Y.isFunction(e)?e(t):e);var i,r,a=t&&"y"==t.direction;for(t.ticks=[],i=0;i<n.length;++i){var o=null,s=n[i];"object"==typeof s?(r=+s[0],1<s.length&&(o=s[1])):r=+s,null==o&&(o=t.tickFormatter(r,t)),isNaN(r)||(a?t.ticks.push({v:r,label:countlyCommon.getShortNumber(o)}):t.ticks.push({v:r,label:o}))}}(e),i=(n=e).ticks,n.options.autoscaleMargin&&0<i.length&&(null==n.options.min&&(n.min=Math.min(n.min,i[0].v)),null==n.options.max&&1<i.length&&(n.max=Math.max(n.max,i[i.length-1].v))),function(t){for(var e=t.options,n=t.ticks||[],i=e.labelWidth||0,r=e.labelHeight||0,a=i||("x"==t.direction?Math.floor(p.width/(n.length||1)):null),o=t.direction+"Axis "+t.direction+t.n+"Axis",s="flot-"+t.direction+"-axis flot-"+t.direction+t.n+"-axis "+o,l=e.font||"flot-tick-label tickLabel",u=0;u<n.length;++u){var h=n[u];if(h.label){var c=p.getTextInfo(s,h.label,l,null,a);i=Math.max(i,c.width),r=Math.max(r,c.height)}}t.labelWidth=e.labelWidth||i,t.labelHeight=e.labelHeight||r}(e)}),t=a.length-1;0<=t;--t)o(a[t]);!function(){var t,e=_.grid.minBorderMargin;if(null==e)for(t=e=0;t<C.length;++t)e=Math.max(e,2*(C[t].points.radius+C[t].points.lineWidth/2));var n={left:e,right:e,top:e,bottom:e};Y.each(E(),function(t,e){e.reserveSpace&&e.ticks&&e.ticks.length&&("x"===e.direction?(n.left=Math.max(n.left,e.labelWidth/2),n.right=Math.max(n.right,e.labelWidth/2)):(n.bottom=Math.max(n.bottom,e.labelHeight/2),n.top=Math.max(n.top,e.labelHeight/2)))}),M.left=10,M.right=10,M.top=Math.ceil(Math.max(n.top,M.top)),M.bottom=Math.ceil(Math.max(n.bottom,M.bottom))}(),Y.each(a,function(t,e){var n;"x"==(n=e).direction?(n.box.left=M.left-n.labelWidth/2,n.box.width=p.width-M.left-M.right+n.labelWidth):(n.box.top=M.top-n.labelHeight/2,n.box.height=p.height-M.bottom-M.top+n.labelHeight)})}k=p.width-M.left-M.right,S=p.height-M.bottom-M.top,Y.each(e,function(t,e){!function(t){function e(t){return t}var n,i,r=t.options.transform||e,a=t.options.inverseTransform;"x"==t.direction?(n=t.scale=k/Math.abs(r(t.max)-r(t.min)),i=Math.min(r(t.max),r(t.min))):(n=-(n=t.scale=S/Math.abs(r(t.max)-r(t.min))),i=Math.max(r(t.max),r(t.min))),t.p2c=r==e?function(t){return(t-i)*n}:function(t){return(r(t)-i)*n},t.c2p=a?function(t){return a(i+t/n)}:function(t){return i+t/n}}(e)}),n&&Y.each(E(),function(t,e){var n,i,r,a,o,s=e.box,l=e.direction+"Axis "+e.direction+e.n+"Axis",u="flot-"+e.direction+"-axis flot-"+e.direction+e.n+"-axis "+l,h=e.options.font||"flot-tick-label tickLabel";if(p.removeText(u),e.show&&0!=e.ticks.length)for(var c=0;c<e.ticks.length;++c)if(!(!(n=e.ticks[c]).label||n.v<e.min||n.v>e.max)){if("x"==e.direction)a="center",i=M.left+e.p2c(n.v),"bottom"==e.position?r=s.top+s.padding:(r=s.top+s.height-s.padding,o="bottom");else{if(0==n.v)continue;o="top",r=M.top+e.p2c(n.v)+10,a="right",i=20<s.width?Math.ceil(s.width/2)+4:s.width<=10?15:s.width,i-=15,p.addText(u,i,r,n.label,h,null,null,a,o),a="left",i=20<s.width?s.left+Math.ceil(s.width/3):s.width<=10?s.left-8:s.left,i+=15}p.addText(u,i,r,n.label,h,null,null,a,o)}}),function(){null!=_.legend.container?Y(_.legend.container).html(""):v.find(".legend").remove();if(!_.legend.show)return;for(var t,e,n=[],i=[],r=!1,a=_.legend.labelFormatter,o=0;o<C.length;++o)(t=C[o]).label&&(e=a?a(t.label,t):t.label)&&i.push({label:e,color:t.color});if(_.legend.sorted)if(Y.isFunction(_.legend.sorted))i.sort(_.legend.sorted);else if("reverse"==_.legend.sorted)i.reverse();else{var s="descending"!=_.legend.sorted;i.sort(function(t,e){return t.label==e.label?0:t.label<e.label!=s?1:-1})}for(var o=0;o<i.length;++o){var l=i[o];o%_.legend.noColumns==0&&(r&&n.push("</tr>"),n.push("<tr>"),r=!0),n.push('<td class="legendColorBox"><div style="margin-right:5px;"><div style="width:4px;height:0;border:5px solid '+l.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+l.label+"</td>")}r&&n.push("</tr>");if(0==n.length)return;var u='<table style="font-size:smaller;color:'+_.grid.color+'">'+n.join("")+"</table>";if(null!=_.legend.container)Y(_.legend.container).html(u);else{var h="",c=_.legend.position,f=_.legend.margin;null==f[0]&&(f=[f,f]),"n"==c.charAt(0)?h+="top:"+(f[1]+M.top)+"px;":"s"==c.charAt(0)&&(h+="bottom:"+(f[1]+M.bottom)+"px;"),"e"==c.charAt(1)?h+="right:"+(f[0]+M.right)+"px;":"w"==c.charAt(1)&&(h+="left:"+(f[0]+M.left)+"px;");var p=Y('<div class="legend">'+u.replace('style="','style="position:absolute;'+h+";")+"</div>").appendTo(v);if(0!=_.legend.backgroundOpacity){var d=_.legend.backgroundColor;null==d&&((d=(d=_.grid.backgroundColor)&&"string"==typeof d?Y.color.parse(d):Y.color.extract(p,"background-color")).a=1,d=d.toString());var g=p.children();Y('<div style="position:absolute;width:'+g.width()+"px;height:"+g.height()+"px;"+h+"background-color:"+d+';"> </div>').prependTo(p).css("opacity",_.legend.backgroundOpacity)}}}()}function u(){p.clear(),T(R.drawBackground,[w]);var t=_.grid;t.show&&t.backgroundColor&&(w.save(),w.translate(M.left,M.top),w.fillStyle=G(_.grid.backgroundColor,S,0,"rgba(255, 255, 255, 0)"),w.fillRect(0,0,k,S),w.restore()),t.show&&!t.aboveData&&f();for(var e=0;e<C.length;++e)T(R.drawSeries,[w,C[e]]),x(C[e]);T(R.draw,[w]),t.show&&t.aboveData&&f(),p.render(),W()}function N(t,e){for(var n,i,r,a,o=E(),s=0;s<o.length;++s)if((n=o[s]).direction==e&&(t[a=e+n.n+"axis"]||1!=n.n||(a=e+"axis"),t[a])){i=t[a].from,r=t[a].to;break}if(t[a]||(n="x"==e?d[0]:g[0],i=t[e+"1"],r=t[e+"2"]),null!=i&&null!=r&&r<i){var l=i;i=r,r=l}return{from:i,to:r,axis:n}}function f(){var t,e,n,i;w.save(),w.translate(M.left,M.top);var r=_.grid.markings;if(r)for(Y.isFunction(r)&&((e=A.getAxes()).xmin=e.xaxis.min,e.xmax=e.xaxis.max,e.ymin=e.yaxis.min,e.ymax=e.yaxis.max,r=r(e)),t=0;t<r.length;++t){var a=r[t],o=N(a,"x"),s=N(a,"y");if(null==o.from&&(o.from=o.axis.min),null==o.to&&(o.to=o.axis.max),null==s.from&&(s.from=s.axis.min),null==s.to&&(s.to=s.axis.max),!(o.to<o.axis.min||o.from>o.axis.max||s.to<s.axis.min||s.from>s.axis.max)){o.from=Math.max(o.from,o.axis.min),o.to=Math.min(o.to,o.axis.max),s.from=Math.max(s.from,s.axis.min),s.to=Math.min(s.to,s.axis.max);var l=o.from===o.to,u=s.from===s.to;if(!l||!u)if(o.from=Math.floor(o.axis.p2c(o.from)),o.to=Math.floor(o.axis.p2c(o.to)),s.from=Math.floor(s.axis.p2c(s.from)),s.to=Math.floor(s.axis.p2c(s.to)),l||u){var h=a.lineWidth||_.grid.markingsLineWidth,c=h%2?.5:0;w.beginPath(),w.strokeStyle=a.color||_.grid.markingsColor,w.lineWidth=h,l?(w.moveTo(o.to+c,s.from),w.lineTo(o.to+c,s.to)):(w.moveTo(o.from,s.to+c),w.lineTo(o.to,s.to+c)),w.stroke()}else w.fillStyle=a.color||_.grid.markingsColor,w.fillRect(o.from,s.to,o.to-o.from,s.from-s.to)}}e=E(),n=_.grid.borderWidth;for(var f=0;f<e.length;++f){var p,d,g,v,m=e[f],y=m.box,x=m.tickLength;if(m.show&&0!=m.ticks.length){for(w.lineWidth=1,"x"==m.direction?(p=0,d="full"==x?"top"==m.position?0:S:y.top-M.top+("top"==m.position?y.height:0)):(d=0,p="full"==x?"left"==m.position?0:k:y.left-M.left+("left"==m.position?y.width:0)),m.innermost||(w.strokeStyle=m.options.color,w.beginPath(),g=v=0,"x"==m.direction?g=k+1:v=S+1,1==w.lineWidth&&("x"==m.direction?d=Math.floor(d)+.5:p=Math.floor(p)+.5),w.moveTo(p,d),w.lineTo(p+g,d+v),w.stroke()),w.strokeStyle=m.options.tickColor,w.beginPath(),t=0;t<m.ticks.length;++t){var b=m.ticks[t].v;g=v=0,isNaN(b)||b<m.min||b>m.max||"full"==x&&("object"==typeof n&&0<n[m.position]||0<n)&&(b==m.min||b==m.max)||("x"==m.direction?(p=m.p2c(b),v="full"==x?-S:x,"top"==m.position&&(v=-v)):(d=m.p2c(b),g="full"==x?-k:x,"left"==m.position&&(g=-g)),1==w.lineWidth&&("x"==m.direction?p=Math.floor(p)+.5:d=Math.floor(d)+.5),0==t?(w.moveTo(p,d),w.lineTo(p+g,d+v)):w.dashedLineTo(p,d,p+g,d+v,[5,5]))}w.stroke()}}n&&(i=_.grid.borderColor,"object"==typeof n||"object"==typeof i?("object"!=typeof n&&(n={top:n,right:n,bottom:n,left:n}),"object"!=typeof i&&(i={top:i,right:i,bottom:i,left:i}),0<n.top&&(w.strokeStyle=i.top,w.lineWidth=n.top,w.beginPath(),w.moveTo(0-n.left,0-n.top/2),w.lineTo(k,0-n.top/2),w.stroke()),0<n.right&&(w.strokeStyle=i.right,w.lineWidth=n.right,w.beginPath(),w.moveTo(k+n.right/2,0-n.top),w.lineTo(k+n.right/2,S),w.stroke()),0<n.bottom&&(w.strokeStyle=i.bottom,w.lineWidth=n.bottom,w.beginPath(),w.moveTo(k+n.right,S+n.bottom/2),w.lineTo(0,S+n.bottom/2),w.stroke()),0<n.left&&(w.strokeStyle=i.left,w.lineWidth=n.left,w.beginPath(),w.moveTo(0-n.left/2,S+n.bottom),w.lineTo(0-n.left/2,0),w.stroke())):(w.lineWidth=n,w.strokeStyle=_.grid.borderColor,w.strokeRect(-n/2,-n/2,k+n,S+n))),w.restore()}function x(t){t.lines.show&&function(t){function e(t,e,n,i,r){var a=t.points,o=t.pointsize,s=null,l=null;w.beginPath();for(var u=o;u<a.length;u+=o){var h=a[u-o],c=a[u-o+1],f=a[u],p=a[u+1];if(null!=h&&null!=f){if(c<=p&&c<r.min){if(p<r.min)continue;h=(r.min-c)/(p-c)*(f-h)+h,c=r.min}else if(p<=c&&p<r.min){if(c<r.min)continue;f=(r.min-c)/(p-c)*(f-h)+h,p=r.min}if(p<=c&&c>r.max){if(p>r.max)continue;h=(r.max-c)/(p-c)*(f-h)+h,c=r.max}else if(c<=p&&p>r.max){if(c>r.max)continue;f=(r.max-c)/(p-c)*(f-h)+h,p=r.max}if(h<=f&&h<i.min){if(f<i.min)continue;c=(i.min-h)/(f-h)*(p-c)+c,h=i.min}else if(f<=h&&f<i.min){if(h<i.min)continue;p=(i.min-h)/(f-h)*(p-c)+c,f=i.min}if(f<=h&&h>i.max){if(f>i.max)continue;c=(i.max-h)/(f-h)*(p-c)+c,h=i.max}else if(h<=f&&f>i.max){if(h>i.max)continue;p=(i.max-h)/(f-h)*(p-c)+c,f=i.max}h==s&&c==l||w.moveTo(i.p2c(h)+e,r.p2c(c)+n),s=f,l=p,w.lineTo(i.p2c(f)+e,r.p2c(p)+n)}}w.stroke()}w.save(),w.translate(M.left,M.top),w.lineJoin="round";var n=t.lines.lineWidth,i=t.shadowSize;if(0<n&&0<i){w.lineWidth=i,w.strokeStyle="rgba(0,0,0,0.1)";var r=Math.PI/18;e(t.datapoints,Math.sin(r)*(n/2+i/2),Math.cos(r)*(n/2+i/2),t.xaxis,t.yaxis),w.lineWidth=i/2,e(t.datapoints,Math.sin(r)*(n/2+i/4),Math.cos(r)*(n/2+i/4),t.xaxis,t.yaxis)}w.lineWidth=n,w.strokeStyle=t.color;var a=P(t.lines,t.color,0,S);a&&(w.fillStyle=a,function(t,e,n){var i=t.points,r=t.pointsize,a=Math.min(Math.max(0,n.min),n.max),o=0,s=!1,l=1,u=0,h=0;for(;!(0<r&&o>i.length+r);){var c=i[(o+=r)-r],f=i[o-r+l],p=i[o],d=i[o+l];if(s){if(0<r&&null!=c&&null==p){h=o,r=-r,l=2;continue}if(r<0&&o==u+r){w.fill(),s=!1,l=1,o=u=h+(r=-r);continue}}if(null!=c&&null!=p){if(c<=p&&c<e.min){if(p<e.min)continue;f=(e.min-c)/(p-c)*(d-f)+f,c=e.min}else if(p<=c&&p<e.min){if(c<e.min)continue;d=(e.min-c)/(p-c)*(d-f)+f,p=e.min}if(p<=c&&c>e.max){if(p>e.max)continue;f=(e.max-c)/(p-c)*(d-f)+f,c=e.max}else if(c<=p&&p>e.max){if(c>e.max)continue;d=(e.max-c)/(p-c)*(d-f)+f,p=e.max}if(s||(w.beginPath(),w.moveTo(e.p2c(c),n.p2c(a)),s=!0),f>=n.max&&d>=n.max)w.lineTo(e.p2c(c),n.p2c(n.max)),w.lineTo(e.p2c(p),n.p2c(n.max));else if(f<=n.min&&d<=n.min)w.lineTo(e.p2c(c),n.p2c(n.min)),w.lineTo(e.p2c(p),n.p2c(n.min));else{var g=c,v=p;f<=d&&f<n.min&&d>=n.min?(c=(n.min-f)/(d-f)*(p-c)+c,f=n.min):d<=f&&d<n.min&&f>=n.min&&(p=(n.min-f)/(d-f)*(p-c)+c,d=n.min),d<=f&&f>n.max&&d<=n.max?(c=(n.max-f)/(d-f)*(p-c)+c,f=n.max):f<=d&&d>n.max&&f<=n.max&&(p=(n.max-f)/(d-f)*(p-c)+c,d=n.max),c!=g&&w.lineTo(e.p2c(g),n.p2c(f)),w.lineTo(e.p2c(c),n.p2c(f)),w.lineTo(e.p2c(p),n.p2c(d)),p!=v&&(w.lineTo(e.p2c(p),n.p2c(d)),w.lineTo(e.p2c(v),n.p2c(d)))}}}}(t.datapoints,t.xaxis,t.yaxis));0<n&&e(t.datapoints,0,0,t.xaxis,t.yaxis);w.restore()}(t),t.bars.show&&function(u){var t;switch(w.save(),w.translate(M.left,M.top),w.lineWidth=u.bars.lineWidth,w.strokeStyle=u.color,u.bars.align){case"left":t=0;break;case"right":t=-u.bars.barWidth;break;default:t=-u.bars.barWidth/2}var e=u.bars.fill?function(t,e){return P(u.bars,u.color,t,e)}:null;(function(t,e,n,i,r,a){for(var o=t.points,s=t.pointsize,l=0;l<o.length;l+=s)null!=o[l]&&b(o[l],o[l+1],o[l+2],e,n,i,r,a,w,u.bars.horizontal,u.bars.lineWidth)})(u.datapoints,t,t+u.bars.barWidth,e,u.xaxis,u.yaxis),w.restore()}(t),t.points.show&&function(t){function e(t,e,n,i,r,a,o,s){for(var l=t.points,u=t.pointsize,h=0;h<l.length;h+=u){var c=l[h],f=l[h+1];null==c||c<a.min||c>a.max||f<o.min||f>o.max||(w.beginPath(),c=a.p2c(c),f=o.p2c(f)+i,"circle"==s?w.arc(c,f,e,0,r?Math.PI:2*Math.PI,!1):s(w,c,f,e,r),w.closePath(),n&&(w.fillStyle=n,w.fill()),w.stroke())}}w.save(),w.translate(M.left,M.top);var n=t.points.lineWidth,i=t.shadowSize,r=t.points.radius,a=t.points.symbol;0==n&&(n=1e-4);if(0<n&&0<i){var o=i/2;w.lineWidth=o,w.strokeStyle="rgba(0,0,0,0.1)",e(t.datapoints,r,null,o+o/2,!0,t.xaxis,t.yaxis,a),w.strokeStyle="rgba(0,0,0,0.2)",e(t.datapoints,r,null,o/2,!0,t.xaxis,t.yaxis,a)}w.lineWidth=n,w.strokeStyle=t.color,e(t.datapoints,r,P(t.points,t.color),0,!1,t.xaxis,t.yaxis,a),w.restore()}(t)}function b(t,e,n,i,r,a,o,s,l,u,h){var c,f,p,d,g,v,m,y,x;u?(y=v=m=!0,g=!1,d=e+i,p=e+r,(f=t)<(c=n)&&(x=f,f=c,c=x,v=!(g=!0))):(g=v=m=!0,y=!1,c=t+i,f=t+r,(d=e)<(p=n)&&(x=d,d=p,p=x,m=!(y=!0))),f<o.min||c>o.max||d<s.min||p>s.max||(c<o.min&&(c=o.min,g=!1),f>o.max&&(f=o.max,v=!1),p<s.min&&(p=s.min,y=!1),d>s.max&&(d=s.max,m=!1),c=o.p2c(c),p=s.p2c(p),f=o.p2c(f),d=s.p2c(d),a&&(l.fillStyle=a(p,d),l.fillRect(c,d,f-c,p-d)),0<h&&(g||v||m||y)&&(l.beginPath(),l.moveTo(c,p),g?l.lineTo(c,d):l.moveTo(c,d),m?l.lineTo(f,d):l.moveTo(f,d),v?l.lineTo(f,p):l.moveTo(f,p),y?l.lineTo(c,p):l.moveTo(c,p),l.stroke()))}function P(t,e,n,i){var r=t.fill;if(!r)return null;if(t.fillColor)return G(t.fillColor,n,i,e);var a=Y.color.parse(e);return a.a="number"==typeof r?r:.4,a.normalize(),a.toString()}A.setData=r,A.setupGrid=l,A.draw=u,A.getPlaceholder=function(){return v},A.getCanvas=function(){return p.element},A.getPlotOffset=function(){return M},A.width=function(){return k},A.height=function(){return S},A.offset=function(){var t=h.offset();return t.left+=M.left,t.top+=M.top,t},A.getData=function(){return C},A.getAxes=function(){var n={};return Y.each(d.concat(g),function(t,e){e&&(n[e.direction+(1!=e.n?e.n:"")+"axis"]=e)}),n},A.getXAxes=function(){return d},A.getYAxes=function(){return g},A.c2p=c,A.p2c=function(t){var e,n,i,r={};for(e=0;e<d.length;++e)if((n=d[e])&&n.used&&(i="x"+n.n,null==t[i]&&1==n.n&&(i="x"),null!=t[i])){r.left=n.p2c(t[i]);break}for(e=0;e<g.length;++e)if((n=g[e])&&n.used&&(i="y"+n.n,null==t[i]&&1==n.n&&(i="y"),null!=t[i])){r.top=n.p2c(t[i]);break}return r},A.getOptions=function(){return _},A.highlight=O,A.unhighlight=j,A.triggerRedrawOverlay=W,A.pointOffset=function(t){return{left:parseInt(d[m(t,"x")-1].p2c(+t.x)+M.left,10),top:parseInt(g[m(t,"y")-1].p2c(+t.y)+M.top,10)}},A.shutdown=a,A.destroy=function(){a(),v.removeData("plot").empty(),C=[],d=[],g=[],I=[],A=R=s=w=h=n=p=_=null},A.resize=function(){var t=v.width(),e=v.height();p.resize(t,e),n.resize(t,e)},A.hooks=R,function(){for(var t={Canvas:X},e=0;e<i.length;++e){var n=i[e];n.init(A,t),n.options&&Y.extend(!0,_,n.options)}}(),function(t){Y.extend(!0,_,t),t&&t.colors&&(_.colors=t.colors);null==_.xaxis.color&&(_.xaxis.color=Y.color.parse(_.grid.color).scale("a",.22).toString());null==_.yaxis.color&&(_.yaxis.color=Y.color.parse(_.grid.color).scale("a",.22).toString());null==_.xaxis.tickColor&&(_.xaxis.tickColor=_.grid.tickColor||_.xaxis.color);null==_.yaxis.tickColor&&(_.yaxis.tickColor=_.grid.tickColor||_.yaxis.color);null==_.grid.borderColor&&(_.grid.borderColor=_.grid.color);null==_.grid.tickColor&&(_.grid.tickColor=Y.color.parse(_.grid.color).scale("a",.22).toString());var e,n,i,r=v.css("font-size"),a=r?+r.replace("px",""):13,o={style:v.css("font-style"),size:Math.round(.8*a),variant:v.css("font-variant"),weight:v.css("font-weight"),family:v.css("font-family")};for(i=_.xaxes.length||1,e=0;e<i;++e)(n=_.xaxes[e])&&!n.tickColor&&(n.tickColor=n.color),n=Y.extend(!0,{},_.xaxis,n),(_.xaxes[e]=n).font&&(n.font=Y.extend({},o,n.font),n.font.color||(n.font.color=n.color),n.font.lineHeight||(n.font.lineHeight=Math.round(1.15*n.font.size)));for(i=_.yaxes.length||1,e=0;e<i;++e)(n=_.yaxes[e])&&!n.tickColor&&(n.tickColor=n.color),n=Y.extend(!0,{},_.yaxis,n),(_.yaxes[e]=n).font&&(n.font=Y.extend({},o,n.font),n.font.color||(n.font.color=n.color),n.font.lineHeight||(n.font.lineHeight=Math.round(1.15*n.font.size)));_.xaxis.noTicks&&null==_.xaxis.ticks&&(_.xaxis.ticks=_.xaxis.noTicks);_.yaxis.noTicks&&null==_.yaxis.ticks&&(_.yaxis.ticks=_.yaxis.noTicks);_.x2axis&&(_.xaxes[1]=Y.extend(!0,{},_.xaxis,_.x2axis),_.xaxes[1].position="top",null==_.x2axis.min&&(_.xaxes[1].min=null),null==_.x2axis.max&&(_.xaxes[1].max=null));_.y2axis&&(_.yaxes[1]=Y.extend(!0,{},_.yaxis,_.y2axis),_.yaxes[1].position="right",null==_.y2axis.min&&(_.yaxes[1].min=null),null==_.y2axis.max&&(_.yaxes[1].max=null));_.grid.coloredAreas&&(_.grid.markings=_.grid.coloredAreas);_.grid.coloredAreasColor&&(_.grid.markingsColor=_.grid.coloredAreasColor);_.lines&&Y.extend(!0,_.series.lines,_.lines);_.points&&Y.extend(!0,_.series.points,_.points);_.bars&&Y.extend(!0,_.series.bars,_.bars);null!=_.shadowSize&&(_.series.shadowSize=_.shadowSize);null!=_.highlightColor&&(_.series.highlightColor=_.highlightColor);for(e=0;e<_.xaxes.length;++e)y(d,e+1).options=_.xaxes[e];for(e=0;e<_.yaxes.length;++e)y(g,e+1).options=_.yaxes[e];for(var s in R)_.hooks[s]&&_.hooks[s].length&&(R[s]=R[s].concat(_.hooks[s]));T(R.processOptions,[_])}(e),function(){v.css("padding",0).children().filter(function(){return!Y(this).hasClass("flot-overlay")&&!Y(this).hasClass("flot-base")}).remove(),"static"==v.css("position")&&v.css("position","relative");p=new X("flot-base",v),n=new X("flot-overlay",v),w=p.context,s=n.context,h=Y(n.element).unbind();var t=v.data("plot");t&&(t.shutdown(),n.clear());v.data("plot",A)}(),r(t),l(),u(),function(){_.grid.hoverable&&(h.mousemove(L),h.bind("mouseleave",F));_.grid.clickable&&h.click(D);T(R.bindEvents,[h])}();var I=[],z=null;function L(t){_.grid.hoverable&&q("plothover",t,function(t){return 0!=t.hoverable})}function F(t){_.grid.hoverable&&q("plothover",t,function(t){return!1})}function D(t){q("plotclick",t,function(t){return 0!=t.clickable})}function q(t,e,n){var i=h.offset(),r=e.pageX-i.left-M.left,a=e.pageY-i.top-M.top,o=c({left:r,top:a});o.pageX=e.pageX,o.pageY=e.pageY;var s=function(t,e,n){var i,r,a,o=_.grid.mouseActiveRadius,s=o*o+1,l=null;for(i=C.length-1;0<=i;--i)if(n(C[i])){var u=C[i],h=u.xaxis,c=u.yaxis,f=u.datapoints.points,p=h.c2p(t),d=c.c2p(e),g=o/h.scale,v=o/c.scale;if(a=u.datapoints.pointsize,h.options.inverseTransform&&(g=Number.MAX_VALUE),c.options.inverseTransform&&(v=Number.MAX_VALUE),u.lines.show||u.points.show)for(r=0;r<f.length;r+=a){var m=f[r],y=f[r+1];if(null!=m&&!(g<m-p||m-p<-g||v<y-d||y-d<-v)){var x=Math.abs(h.p2c(m)-t),b=Math.abs(c.p2c(y)-e),w=x*x+b*b;w<s&&(s=w,l=[i,r/a])}}if(u.bars.show&&!l){var M,k;switch(u.bars.align){case"left":M=0;break;case"right":M=-u.bars.barWidth;break;default:M=-u.bars.barWidth/2}for(k=M+u.bars.barWidth,r=0;r<f.length;r+=a){m=f[r],y=f[r+1];var S=f[r+2];null!=m&&(C[i].bars.horizontal?p<=Math.max(S,m)&&p>=Math.min(S,m)&&y+M<=d&&d<=y+k:m+M<=p&&p<=m+k&&d>=Math.min(S,y)&&d<=Math.max(S,y))&&(l=[i,r/a])}}}return l?(i=l[0],r=l[1],a=C[i].datapoints.pointsize,{datapoint:C[i].datapoints.points.slice(r*a,(r+1)*a),dataIndex:r,series:C[i],seriesIndex:i}):null}(r,a,n);if(s&&(s.pageX=parseInt(s.series.xaxis.p2c(s.datapoint[0])+i.left+M.left,10),s.pageY=parseInt(s.series.yaxis.p2c(s.datapoint[1])+i.top+M.top,10)),I||(I=[]),_.grid.autoHighlight){for(var l=0;l<I.length;++l){var u=I[l];u.auto!=t||s&&u.series==s.series&&u.point[0]==s.datapoint[0]&&u.point[1]==s.datapoint[1]||j(u.series,u.point)}s&&O(s.series,s.datapoint,t)}v.trigger(t,[o,s])}function W(){var t=_.interaction.redrawOverlayInterval;-1!=t?z||(z=setTimeout(H,t)):H()}function H(){var t,e;for(z=null,s.save(),n.clear(),s.translate(M.left,M.top),I||(I=[]),t=0;t<I.length;++t)(e=I[t]).series.bars.show?V(e.series,e.point):U(e.series,e.point);s.restore(),T(R.drawOverlay,[s])}function O(t,e,n){if("number"==typeof t&&(t=C[t]),"number"==typeof e){var i=t.datapoints.pointsize;e=t.datapoints.points.slice(i*e,i*(e+1))}var r=B(t,e);-1==r?(I.push({series:t,point:e,auto:n}),W()):n||(I[r].auto=!1)}function j(t,e){if(null==t&&null==e)return I=[],void W();if("number"==typeof t&&(t=C[t]),"number"==typeof e){var n=t.datapoints.pointsize;e=t.datapoints.points.slice(n*e,n*(e+1))}var i=B(t,e);-1!=i&&(I.splice(i,1),W())}function B(t,e){for(var n=0;n<I.length;++n){var i=I[n];if(i.series==t&&i.point[0]==e[0]&&i.point[1]==e[1])return n}return-1}function U(t,e){var n=e[0],i=e[1],r=t.xaxis,a=t.yaxis,o="string"==typeof t.highlightColor?t.highlightColor:Y.color.parse(t.color).scale("a",.8).toString();if(!(n<r.min||n>r.max||i<a.min||i>a.max)){s.lineWidth=2,s.strokeStyle=o;n=r.p2c(n),i=a.p2c(i),s.beginPath(),"circle"==t.points.symbol?s.arc(n,i,6,0,2*Math.PI,!1):t.points.symbol(s,n,i,6,!1),s.closePath(),s.stroke()}}function V(t,e){var n,i="string"==typeof t.highlightColor?t.highlightColor:Y.color.parse(t.color).scale("a",.5).toString(),r=i;switch(t.bars.align){case"left":n=0;break;case"right":n=-t.bars.barWidth;break;default:n=-t.bars.barWidth/2}s.lineWidth=t.bars.lineWidth,s.strokeStyle=i,b(e[0],e[1],e[2]||0,n,n+t.bars.barWidth,function(){return r},t.xaxis,t.yaxis,s,t.bars.horizontal,t.bars.lineWidth)}function G(t,e,n,i){if("string"==typeof t)return t;for(var r=w.createLinearGradient(0,n,0,e),a=0,o=t.colors.length;a<o;++a){var s=t.colors[a];if("string"!=typeof s){var l=Y.color.parse(i);null!=s.brightness&&(l=l.scale("rgb",s.brightness)),null!=s.opacity&&(l.a*=s.opacity),s=l.toString()}r.addColorStop(a/(o-1),s)}return r}}Y.fn.detach||(Y.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})}),X.prototype.resize=function(t,e){if(t<=0||e<=0)throw new Error("Invalid dimensions for plot, width = "+t+", height = "+e);var n=this.element,i=this.context,r=this.pixelRatio;this.width!=t&&(n.width=t*r,n.style.width=t+"px",this.width=t),this.height!=e&&(n.height=e*r,n.style.height=e+"px",this.height=e),i.restore(),i.save(),i.scale(r,r)},X.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},X.prototype.render=function(){var t=this._textCache;for(var e in t)if(p.call(t,e)){var n=this.getTextLayer(e),i=t[e];for(var r in n.hide(),i)if(p.call(i,r)){var a=i[r];for(var o in a)if(p.call(a,o)){for(var s,l=a[o].positions,u=0;s=l[u];u++)s.active?s.rendered||(n.append(s.element),s.rendered=!0):(l.splice(u--,1),s.rendered&&s.element.detach());0==l.length&&delete a[o]}}n.show()}},X.prototype.getTextLayer=function(t){var e=this.text[t];return null==e&&(null==this.textContainer&&(this.textContainer=Y("<div class='flot-text'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),e=this.text[t]=Y("<div></div>").addClass(t).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),e},X.prototype.getTextInfo=function(t,e,n,i,r){var a,o,s,l;if(e=""+e,a="object"==typeof n?n.style+" "+n.variant+" "+n.weight+" "+n.size+"px/"+n.lineHeight+"px "+n.family:n,null==(o=this._textCache[t])&&(o=this._textCache[t]={}),null==(s=o[a])&&(s=o[a]={}),null==(l=s[e])){var u=Y("<div></div>").html(e).css({position:"absolute","max-width":r,top:-9999}).appendTo(this.getTextLayer(t));"object"==typeof n?u.css({font:a,color:n.color}):"string"==typeof n&&u.addClass(n),l=s[e]={width:u.outerWidth(!0),height:u.outerHeight(!0),element:u,positions:[]},u.detach()}return l},X.prototype.addText=function(t,e,n,i,r,a,o,s,l){var u=this.getTextInfo(t,i,r,a,o),h=u.positions;"center"==s?e-=u.width/2:"right"==s&&(e-=u.width),"middle"==l?n-=u.height/2:"bottom"==l?n-=u.height:"top"==l&&(n-=u.height+2);for(var c,f=0;c=h[f];f++)if(c.x==e&&c.y==n)return void(c.active=!0);c={active:!0,rendered:!1,element:h.length?u.element.clone():u.element,x:e,y:n},h.push(c),c.element.css({top:Math.round(n),left:Math.round(e),"text-align":s})},X.prototype.removeText=function(t,e,n,i,r,a){if(null==i){var o=this._textCache[t];if(null!=o)for(var s in o)if(p.call(o,s)){var l=o[s];for(var u in l)if(p.call(l,u))for(var h=l[u].positions,c=0;f=h[c];c++)f.active=!1}}else{var f;for(h=this.getTextInfo(t,i,r,a).positions,c=0;f=h[c];c++)f.x==e&&f.y==n&&(f.active=!1)}},Y.plot=function(t,e,n){return new i(Y(t),e,n,Y.plot.plugins)},Y.plot.version="0.8.3",Y.plot.plugins=[],Y.fn.plot=function(t,e){return this.each(function(){Y.plot(this,t,e)})}}(jQuery),function(M){M.plot.plugins.push({init:function(t){var v,m,y,x,b=[],w=!1;t.hooks.draw.push(function(t,e){if(w){if(0==b.length)return;var n,i,r=(f=t.getAxes().xaxis).box;for(p=0;p<b.length;p++)(d=b[p]).label&&(e.save(),e.font=v,m<=90?(n=-Math.ceil(Math.cos(x)*d.height),i=Math.ceil(Math.sin(x)*d.height),e.translate(Math.round(t.getPlotOffset().left+f.p2c(d.v))+n,r.top+r.padding+t.getOptions().grid.labelMargin+i),e.rotate(y)):(n=Math.ceil(Math.cos(x)*d.height)-Math.ceil(Math.cos(x)*d.width),i=Math.ceil(Math.sin(x)*d.width)+Math.ceil(Math.sin(x)*d.height),e.translate(Math.round(t.getPlotOffset().left+f.p2c(d.v)+n),r.top+r.padding+t.getOptions().grid.labelMargin+i),e.rotate(-x)),e.fillStyle="#999",e.fillText(d.label,0,0),e.restore())}else{var a=t.getAxes().xaxis.options;if(void 0===a.rotateTicks)return;if((m=parseInt(a.rotateTicks,10)).toString()!=a.rotateTicks||0==m||180<=m)return;y=m*Math.PI/180,x=90<m?Math.PI-y:Math.PI/2-y,(v=a.rotateTicksFont)||(v=M(".tickLabel").css("font")),v||(v="11px sans-serif");var o,s,l=0,u=0,h=0,c=0,f=t.getAxes().xaxis;b=t.getAxes().xaxis.ticks,a.ticks=[];for(var p=0;p<b.length;p++){o=M('<span class="rotated-tick">'+b[p].label+"</div>"),t.getPlaceholder().append(o),b[p].height=o.outerHeight(!0),b[p].width=o.outerWidth(!0),o.remove(),b[p].height>u&&(u=b[p].height),b[p].width>l&&(l=b[p].width);var d=b[p];90<m?(s=Math.round(t.getPlotOffset().left+f.p2c(d.v))-Math.ceil(Math.cos(x)*d.height)-Math.ceil(Math.cos(x)*d.width))<h&&(h=s):c<(s=Math.round(t.getPlotOffset().left+f.p2c(d.v))+Math.ceil(Math.cos(x)*d.height)+Math.ceil(Math.cos(x)*d.width))&&(c=s)}if(90<m){var g=y-Math.PI/2;a.labelHeight=Math.ceil(Math.sin(g)*l)+Math.ceil(Math.sin(g)*u)}else g=Math.PI/2-y,a.labelHeight=Math.ceil(Math.sin(y)*l)+Math.ceil(Math.sin(g)*u);h<0&&(t.getAxes().yaxis.options.labelWidth=-1*h),w=!0,t.setupGrid(),t.draw()}})},options:{},name:"tickRotor",version:"1.0"})}(jQuery),function(M){var t={series:{pie:{show:!1,radius:"auto",innerRadius:0,startAngle:1.5,tilt:1,shadow:{left:5,top:15,alpha:.02},offset:{top:0,left:"auto"},stroke:{color:"#fff",width:1},label:{show:"auto",formatter:function(t,e){return"<div style='font-size:x-small;text-align:center;padding:2px;color:"+e.color+";'>"+t+"<br/>"+Math.round(e.percent)+"%</div>"},radius:1,background:{color:null,opacity:0},threshold:0},combine:{threshold:-1,color:null,label:"Other"},highlight:{opacity:.5}}}};M.plot.plugins.push({init:function(h){var a=null,m=null,y=null,c=null,x=null,b=null,u=!1,f=null,p=[];function d(t){if(0<y.series.pie.innerRadius){t.save();var e=1<y.series.pie.innerRadius?y.series.pie.innerRadius:c*y.series.pie.innerRadius;t.globalCompositeOperation="destination-out",t.beginPath(),t.fillStyle=y.series.pie.stroke.color,t.arc(0,0,e,0,2*Math.PI,!1),t.fill(),t.closePath(),t.restore(),t.save(),t.beginPath(),t.strokeStyle=y.series.pie.stroke.color,t.arc(0,0,e,0,2*Math.PI,!1),t.stroke(),t.closePath(),t.restore()}}function g(t,e){for(var n=!1,i=-1,r=t.length,a=r-1;++i<r;a=i)(t[i][1]<=e[1]&&e[1]<t[a][1]||t[a][1]<=e[1]&&e[1]<t[i][1])&&e[0]<(t[a][0]-t[i][0])*(e[1]-t[i][1])/(t[a][1]-t[i][1])+t[i][0]&&(n=!n);return n}function i(t){e("plothover",t)}function r(t){e("plotclick",t)}function e(t,e){var n,i,r,a=h.offset(),o=function(t,e){for(var n,i,r=h.getData(),a=h.getOptions(),o=1<a.series.pie.radius?a.series.pie.radius:c*a.series.pie.radius,s=0;s<r.length;++s){var l=r[s];if(l.pie.show){if(f.save(),f.beginPath(),f.moveTo(0,0),f.arc(0,0,o,l.startAngle,l.startAngle+l.angle/2,!1),f.arc(0,0,o,l.startAngle+l.angle/2,l.startAngle+l.angle,!1),f.closePath(),n=t-x,i=e-b,f.isPointInPath){if(f.isPointInPath(t-x,e-b))return f.restore(),{datapoint:[l.percent,l.data],dataIndex:0,series:l,seriesIndex:s}}else if(g([[0,0],[o*Math.cos(l.startAngle),o*Math.sin(l.startAngle)],[o*Math.cos(l.startAngle+l.angle/4),o*Math.sin(l.startAngle+l.angle/4)],[o*Math.cos(l.startAngle+l.angle/2),o*Math.sin(l.startAngle+l.angle/2)],[o*Math.cos(l.startAngle+l.angle/1.5),o*Math.sin(l.startAngle+l.angle/1.5)],[o*Math.cos(l.startAngle+l.angle),o*Math.sin(l.startAngle+l.angle)]],[n,i]))return f.restore(),{datapoint:[l.percent,l.data],dataIndex:0,series:l,seriesIndex:s};f.restore()}}return null}(parseInt(e.pageX-a.left),parseInt(e.pageY-a.top));if(y.grid.autoHighlight)for(var s=0;s<p.length;++s){var l=p[s];l.auto!=t||o&&l.series==o.series||v(l.series)}o&&(n=o.series,i=t,-1==(r=w(n))?(p.push({series:n,auto:i}),h.triggerRedrawOverlay()):i||(p[r].auto=!1));var u={pageX:e.pageX,pageY:e.pageY};m.trigger(t,[u,o])}function v(t){null==t&&(p=[],h.triggerRedrawOverlay());var e=w(t);-1!=e&&(p.splice(e,1),h.triggerRedrawOverlay())}function w(t){for(var e=0;e<p.length;++e)if(p[e].series==t)return e;return-1}h.hooks.processOptions.push(function(t,e){e.series.pie.show&&(e.grid.show=!1,"auto"==e.series.pie.label.show&&(e.legend.show?e.series.pie.label.show=!1:e.series.pie.label.show=!0),"auto"==e.series.pie.radius&&(e.series.pie.label.show?e.series.pie.radius=.75:e.series.pie.radius=1),1<e.series.pie.tilt?e.series.pie.tilt=1:e.series.pie.tilt<0&&(e.series.pie.tilt=0))}),h.hooks.bindEvents.push(function(t,e){var n=t.getOptions();n.series.pie.show&&(n.grid.hoverable&&e.unbind("mousemove").mousemove(i),n.grid.clickable&&e.unbind("click").click(r))}),h.hooks.processDatapoints.push(function(t,e,n,i){var r;t.getOptions().series.pie.show&&(r=t,u||(u=!0,a=r.getCanvas(),m=M(a).parent(),y=r.getOptions(),r.setData(function(t){for(var e=0,n=0,i=0,r=y.series.pie.combine.color,a=[],o=0;o<t.length;++o){var s=t[o].data;M.isArray(s)&&1==s.length&&(s=s[0]),M.isArray(s)?!isNaN(parseFloat(s[1]))&&isFinite(s[1])?s[1]=+s[1]:s[1]=0:s=!isNaN(parseFloat(s))&&isFinite(s)?[1,+s]:[1,0],t[o].data=[s]}for(var o=0;o<t.length;++o)e+=t[o].data[0][1];for(var o=0;o<t.length;++o){var s=t[o].data[0][1];s/e<=y.series.pie.combine.threshold&&(n+=s,i++,r||(r=t[o].color))}for(var o=0;o<t.length;++o){var s=t[o].data[0][1];(i<2||s/e>y.series.pie.combine.threshold)&&a.push(M.extend(t[o],{data:[[1,s]],color:t[o].color,label:t[o].label,angle:s*Math.PI*2/e,percent:s/(e/100)}))}return 1<i&&a.push({data:[[1,n]],color:r,label:y.series.pie.combine.label,angle:n*Math.PI*2/e,percent:n/(e/100)}),a}(r.getData()))))}),h.hooks.drawOverlay.push(function(t,e){t.getOptions().series.pie.show&&function(t,e){var n=t.getOptions(),i=1<n.series.pie.radius?n.series.pie.radius:c*n.series.pie.radius;e.save(),e.translate(x,b),e.scale(1,n.series.pie.tilt);for(var r=0;r<p.length;++r)a(p[r].series);function a(t){t.angle<=0||isNaN(t.angle)||(e.fillStyle="rgba(255, 255, 255, "+n.series.pie.highlight.opacity+")",e.beginPath(),1e-9<Math.abs(t.angle-2*Math.PI)&&e.moveTo(0,0),e.arc(0,0,i,t.startAngle,t.startAngle+t.angle/2,!1),e.arc(0,0,i,t.startAngle+t.angle/2,t.startAngle+t.angle,!1),e.closePath(),e.fill())}d(e),e.restore()}(t,e)}),h.hooks.draw.push(function(t,e){t.getOptions().series.pie.show&&function(t,e){if(m){var a=t.getPlaceholder().width(),v=t.getPlaceholder().height(),n=m.children().filter(".legend").children().width()||0;f=e,u=!1,c=Math.min(a,v/y.series.pie.tilt)/2,b=v/2+y.series.pie.offset.top,x=a/2,"auto"==y.series.pie.offset.left?(y.legend.position.match("w")?x+=n/2:x-=n/2,x<c?x=c:a-c<x&&(x=a-c)):x+=y.series.pie.offset.left;for(var o=t.getData(),i=0;0<i&&(c*=.95),i+=1,r(),y.series.pie.tilt<=.8&&s(),!l()&&i<10;);10<=i&&r(),t.setSeries&&t.insertLegend&&(t.setSeries(o),t.insertLegend())}function r(){f.clearRect(0,0,a,v),m.children().filter(".pieLabel, .pieLabelBackground").remove()}function s(){var t=y.series.pie.shadow.left,e=y.series.pie.shadow.top,n=y.series.pie.shadow.alpha,i=1<y.series.pie.radius?y.series.pie.radius:c*y.series.pie.radius;if(!(a/2-t<=i||i*y.series.pie.tilt>=v/2-e||i<=10)){f.save(),f.translate(t,e),f.globalAlpha=n,f.fillStyle="#000",f.translate(x,b),f.scale(1,y.series.pie.tilt);for(var r=1;r<=10;r++)f.beginPath(),f.arc(0,0,i,0,2*Math.PI,!1),f.fill(),i-=r;f.restore()}}function l(){var i=Math.PI*y.series.pie.startAngle,r=1<y.series.pie.radius?y.series.pie.radius:c*y.series.pie.radius;f.save(),f.translate(x,b),f.scale(1,y.series.pie.tilt),f.save();for(var a=i,t=0;t<o.length;++t)o[t].startAngle=a,e(o[t].angle,o[t].color,!0);if(f.restore(),0<y.series.pie.stroke.width){f.save(),f.lineWidth=y.series.pie.stroke.width,a=i;for(var t=0;t<o.length;++t)e(o[t].angle,y.series.pie.stroke.color,!1);f.restore()}return d(f),f.restore(),!y.series.pie.label.show||function(){for(var t=i,g=1<y.series.pie.label.radius?y.series.pie.label.radius:c*y.series.pie.label.radius,e=0;e<o.length;++e){if(o[e].percent>=100*y.series.pie.label.threshold&&!n(o[e],t,e))return!1;t+=o[e].angle}return!0;function n(t,e,n){if(0==t.data[0][1])return!0;var i,r=y.legend.labelFormatter,a=y.series.pie.label.formatter;i=r?r(t.label,t):t.label,a&&(i=a(i,t));var o=(e+t.angle+e)/2,s=x+Math.round(Math.cos(o)*g),l=b+Math.round(Math.sin(o)*g)*y.series.pie.tilt,u="<span class='pieLabel' id='pieLabel"+n+"' style='position:absolute;top:"+l+"px;left:"+s+"px;'>"+i+"</span>";m.append(u);var h=m.children("#pieLabel"+n),c=l-h.height()/2,f=s-h.width()/2;if(h.css("top",c),h.css("left",f),0<0-c||0<0-f||v-(c+h.height())<0||h.width(),0!=y.series.pie.label.background.opacity){var p=y.series.pie.label.background.color;null==p&&(p=t.color);var d="top:"+c+"px;left:"+f+"px;";M("<div class='pieLabelBackground' style='position:absolute;width:"+h.width()+"px;height:"+h.height()+"px;"+d+"background-color:"+p+";'></div>").css("opacity",y.series.pie.label.background.opacity).insertBefore(h)}return!0}}();function e(t,e,n){t<=0||isNaN(t)||(n?f.fillStyle=e:(f.strokeStyle=e,f.lineJoin="round"),f.beginPath(),1e-9<Math.abs(t-2*Math.PI)&&f.moveTo(0,0),f.arc(0,0,r,a,a+t/2,!1),f.arc(0,0,r,a+t/2,a+t,!1),f.closePath(),a+=t,n?f.fill():f.stroke())}}}(t,e)})},options:t,name:"pie",version:"1.1"})}(jQuery),function(o,s,l){"$:nomunge";var u,h=[],c=o.resize=o.extend(o.resize,{}),f=!1,n="setTimeout",p="resize",d=p+"-special-event",g="pendingDelay",i="activeDelay",r="throttleWindow";function v(t){!0===f&&(f=t||1);for(var e=h.length-1;0<=e;e--){var n=o(h[e]);if(n[0]==s||n.is(":visible")){var i=n.width(),r=n.height(),a=n.data(d);!a||i===a.w&&r===a.h||(n.trigger(p,[a.w=i,a.h=r]),f=t||!0)}else(a=n.data(d)).w=0,a.h=0}null!==u&&(f&&(null==t||t-f<1e3)?u=s.requestAnimationFrame(v):(u=setTimeout(v,c[g]),f=!1))}c[g]=200,c[i]=20,c[r]=!0,o.event.special[p]={setup:function(){if(!c[r]&&this[n])return!1;var t=o(this);h.push(this),t.data(d,{w:t.width(),h:t.height()}),1===h.length&&(u=l,v())},teardown:function(){if(!c[r]&&this[n])return!1;for(var t=o(this),e=h.length-1;0<=e;e--)if(h[e]==this){h.splice(e,1);break}t.removeData(d),h.length||(f?cancelAnimationFrame(u):clearTimeout(u),u=null)},add:function(t){if(!c[r]&&this[n])return!1;var a;function e(t,e,n){var i=o(this),r=i.data(d)||{};r.w=e!==l?e:i.width(),r.h=n!==l?n:i.height(),a.apply(this,arguments)}if(o.isFunction(t))return a=t,e;a=t.handler,t.handler=e}},s.requestAnimationFrame||(s.requestAnimationFrame=s.webkitRequestAnimationFrame||s.mozRequestAnimationFrame||s.oRequestAnimationFrame||s.msRequestAnimationFrame||function(t,e){return s.setTimeout(function(){t((new Date).getTime())},c[i])}),s.cancelAnimationFrame||(s.cancelAnimationFrame=s.webkitCancelRequestAnimationFrame||s.mozCancelRequestAnimationFrame||s.oCancelRequestAnimationFrame||s.msCancelRequestAnimationFrame||clearTimeout)}(jQuery,this),function(r){r.plot.plugins.push({init:function(n){function i(){var t=n.getPlaceholder();if(0!=t.width()&&0!=t.height()){n.resize(),n.setupGrid(),n.draw();var e=n.width();r("#dashboard-graph .graph-key-event-label").each(function(){var t=n.pointOffset({x:r(this).data("points")[0],y:r(this).data("points")[1]});t.left<=15&&(t.left=15),t.left>=e-15&&(t.left=e-15),r(this).css({left:t.left})}),r("#dashboard-graph .graph-note-label").each(function(){var t=n.pointOffset({x:r(this).data("points")[0],y:r(this).data("points")[1]});r(this).css({left:t.left})})}}n.hooks.bindEvents.push(function(t,e){t.getPlaceholder().resize(i)}),n.hooks.shutdown.push(function(t,e){t.getPlaceholder().unbind("resize",i)})},options:{},name:"resize",version:"1.0"})}(jQuery),jQuery.plot.plugins.push({init:function(t){t.hooks.processDatapoints.push(function(t,e,n){if(null!=e.stack&&!1!==e.stack){var i=function(t,e){for(var n=null,i=0;i<e.length&&t!=e[i];++i)e[i].stack==t.stack&&(n=e[i]);return n}(e,t.getData());if(i){for(var r,a,o,s,l,u,h,c,f=n.pointsize,p=n.points,d=i.datapoints.pointsize,g=i.datapoints.points,v=[],m=e.lines.show,y=e.bars.horizontal,x=2<f&&(y?n.format[2].x:n.format[2].y),b=m&&e.lines.steps,w=!0,M=y?1:0,k=y?0:1,S=0,C=0;!(S>=p.length);){if(h=v.length,null==p[S]){for(c=0;c<f;++c)v.push(p[S+c]);S+=f}else if(C>=g.length){if(!m)for(c=0;c<f;++c)v.push(p[S+c]);S+=f}else if(null==g[C]){for(c=0;c<f;++c)v.push(null);w=!0,C+=d}else{if(r=p[S+M],a=p[S+k],s=g[C+M],l=g[C+k],u=0,r==s){for(c=0;c<f;++c)v.push(p[S+c]);v[h+k]+=l,u=l,S+=f,C+=d}else if(s<r){if(m&&0<S&&null!=p[S-f]){for(o=a+(p[S-f+k]-a)*(s-r)/(p[S-f+M]-r),v.push(s),v.push(o+l),c=2;c<f;++c)v.push(p[S+c]);u=l}C+=d}else{if(w&&m){S+=f;continue}for(c=0;c<f;++c)v.push(p[S+c]);m&&0<C&&null!=g[C-d]&&(u=l+(g[C-d+k]-l)*(r-s)/(g[C-d+M]-s)),v[h+k]+=u,S+=f}w=!1,h!=v.length&&x&&(v[h+2]+=u)}if(b&&h!=v.length&&0<h&&null!=v[h]&&v[h]!=v[h-f]&&v[h+1]!=v[h-f+1]){for(c=0;c<f;++c)v[h+f+c]=v[h+c];v[h+1]=v[h-f+1]}}n.points=v}}})},options:{series:{stack:null}},name:"stack",version:"1.2"}),function(p){"use strict";var g=0;function d(t,e,n,i,r,a,o){var s,l,u,h,c,f,p=Math.pow,d=Math.sqrt;return s=d(p(n-t,2)+p(i-e,2)),l=d(p(r-n,2)+p(a-i,2)),g<(c=i+(u=o*s/(s+l))*(e-a))&&(c=g),g<(f=i-(h=o-u)*(e-a))&&(f=g),[n+u*(t-r),c,n-h*(t-r),f]}var v=[];function m(t,e,n,i){(void 0===e||"bezier"!==e&&"quadratic"!==e)&&(e="quadratic"),e+="CurveTo",0==v.length?v.push([n[0],n[1],i.concat(n.slice(2)),e]):"quadraticCurveTo"==e&&2==n.length?(i=i.slice(0,2).concat(n),v.push([n[0],n[1],i,e])):v.push([n[2],n[3],i.concat(n.slice(2)),e])}function e(t,e,n){if(!0===n.splines.show){g=t.height()+10;var i,r,a,o=[],s=n.splines.tension||.5,l=n.datapoints.points,u=n.datapoints.pointsize,h=t.getPlotOffset(),c=l.length,f=[];if(v=[],c/u<4)p.extend(n.lines,n.splines);else{for(i=0;i<c;i+=u)r=l[i],a=l[i+1],null==r||r<n.xaxis.min||r>n.xaxis.max||a<n.yaxis.min||a>n.yaxis.max||f.push(n.xaxis.p2c(r)+h.left,n.yaxis.p2c(a)+h.top);for(c=f.length,i=0;i<c-2;i+=2)o=o.concat(d.apply(this,f.slice(i,i+6).concat([s])));for(e.save(),e.strokeStyle=n.color,e.lineWidth=n.splines.lineWidth,m(0,"quadratic",f.slice(0,4),o.slice(0,2)),i=2;i<c-3;i+=2)m(0,"bezier",f.slice(i,i+4),o.slice(2*i-2,2*i+2));m(0,"quadratic",f.slice(c-2,c),[o[2*c-10],o[2*c-9],f[c-4],f[c-3]]),function(t,e,n,i,r){var a=p.color.parse(r);a.a="number"==typeof i?i:.3,a.normalize(),a=a.toString(),e.beginPath(),e.moveTo(t[0][0],t[0][1]);for(var o=t.length,s=0;s<o;s++)e[t[s][3]].apply(e,t[s][2]);e.stroke(),e.lineWidth=0,e.lineTo(t[o-1][0],n),e.lineTo(t[0][0],n),e.closePath(),!1!==i&&(e.fillStyle=a,e.fill())}(v,e,t.height()+10,n.splines.fill,n.color),e.restore()}}}p.plot.plugins.push({init:function(t){t.hooks.drawSeries.push(e)},options:{series:{splines:{show:!1,lineWidth:2,tension:.1,fill:!1}}},name:"spline",version:"0.8.2"})}(jQuery),jQuery.plot.plugins.push({init:function(n){var s={x:-1,y:-1,locked:!1};function i(t){-1!=s.x&&(s.x=-1,n.triggerRedrawOverlay())}function r(t){if(!s.locked)if(n.getSelection&&n.getSelection())s.x=-1;else{var e=n.offset();s.x=Math.max(0,Math.min(t.pageX-e.left,n.width())),s.y=Math.max(0,Math.min(t.pageY-e.top,n.height())),n.triggerRedrawOverlay()}}n.setCrosshair=function(t){if(t){var e=n.p2c(t);s.x=Math.max(0,Math.min(e.left,n.width())),s.y=Math.max(0,Math.min(e.top,n.height()))}else s.x=-1;n.triggerRedrawOverlay()},n.clearCrosshair=n.setCrosshair,n.lockCrosshair=function(t){t&&n.setCrosshair(t),s.locked=!0},n.unlockCrosshair=function(){s.locked=!1},n.hooks.bindEvents.push(function(t,e){t.getOptions().crosshair.mode&&(e.mouseout(i),e.mousemove(r))}),n.hooks.drawOverlay.push(function(t,e){var n=t.getOptions().crosshair;if(n.mode){var i=t.getPlotOffset();if(e.save(),e.translate(i.left,i.top),-1!=s.x){var r=t.getOptions().crosshair.lineWidth%2?.5:0;if(e.strokeStyle=n.color,e.lineWidth=n.lineWidth,e.lineJoin="round",e.beginPath(),-1!=n.mode.indexOf("x")){var a=Math.floor(s.x)+r;e.moveTo(a,0),e.lineTo(a,t.height())}if(-1!=n.mode.indexOf("y")){var o=Math.floor(s.y)+r;e.moveTo(0,o),e.lineTo(t.width(),o)}e.stroke()}e.restore()}}),n.hooks.shutdown.push(function(t,e){e.unbind("mouseout",i),e.unbind("mousemove",r)})},options:{crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",lineWidth:1}},name:"crosshair",version:"1.0"}),jQuery.plot.plugins.push({init:function(t){var f,p,d,g,v=new Array,m=new Array,y=1,x=!1;function b(t,e){for(var n=new Array,i=0;i<t.length;i++)n[0]=t[i].data[0][e],n[1]=t[i].data[t[i].data.length-1][e];return"string"==typeof n[0]&&(n[0]=0,n[1]=t[0].data.length-1),n}function w(t,e){var n=t.bars.barWidth?t.bars.barWidth:1,i=e.bars.barWidth?e.bars.barWidth:1;return n<i?-1:i<n?1:0}function M(t,e,n){var i=t.slice((n||e)+1||t.length);return t.length=e<0?t.length+e:e,t.push.apply(t,i),t}function k(){var t=0;return p%2!=0&&(t=f[Math.floor(p/2)].bars.barWidth/2),t}function S(t,e,n){for(var i=0,r=e;r<=n;r++)i+=t[r].bars.barWidth+2*g;return i}function C(t,e,n){for(var i=t.pointsize,r=t.points,a=0,o=x?1:0;o<r.length;o+=i)r[o]+=n,e.data[a][3]=r[o],a++;return r}t.hooks.processDatapoints.push(function(t,e,n){var i,r,a,o,s,l,u=null;if(null!=(l=e).bars&&l.bars.show&&null!=l.bars.order)if(e.bars.horizontal&&(x=!0),r=t,a=x?r.getPlaceholder().innerHeight():r.getPlaceholder().innerWidth(),o=b(r.getData(),x?1:0),s=o[1]-o[0],y=s/a,f=function(t){for(var e=new Array,n=0;n<t.length;n++)null!=t[n].bars.order&&t[n].bars.show&&e.push(t[n]);return function(t){var e=t.length;do{for(var n=0;n<e-1;n++)if(t[n].bars.order>t[n+1].bars.order){var i=t[n];t[n]=t[n+1],t[n+1]=i}else if(t[n].bars.order==t[n+1].bars.order){var r;t[n].sameSeriesArrayIndex?void 0!==t[n+1].sameSeriesArrayIndex&&(r=t[n].sameSeriesArrayIndex,t[n+1].sameSeriesArrayIndex=r,m[r].push(t[n+1]),m[r].sort(w),t[n]=m[r][0],M(t,n+1)):t[n+1].sameSeriesArrayIndex?void 0!==t[n].sameSeriesArrayIndex&&(r=t[n+1].sameSeriesArrayIndex,t[n].sameSeriesArrayIndex=r,m[r].push(t[n]),m[r].sort(w),t[n]=m[r][0],M(t,n+1)):(r=m.length,m[r]=new Array,t[n].sameSeriesArrayIndex=r,t[n+1].sameSeriesArrayIndex=r,m[r].push(t[n]),m[r].push(t[n+1]),m[r].sort(w),t[n]=m[r][0],M(t,n+1)),n--,e--}e-=1}while(1<e);for(var n=0;n<t.length;n++)t[n].sameSeriesArrayIndex&&(v[t[n].sameSeriesArrayIndex]=n);return t}(e)}(t.getData()),p=f.length,d="number"==typeof(i=e).bars.lineWidth?i.bars.lineWidth:2,g=d*y,2<=p){var h=function(t){var e=0;if(t.sameSeriesArrayIndex)e=v[t.sameSeriesArrayIndex];else for(var n=0;n<f.length;++n)if(t==f[n]){e=n;break}return e+1}(e),c=k();u=C(n,e,h<=Math.ceil(p/2)?-1*S(f,h-1,Math.floor(p/2)-1)-c:S(f,Math.ceil(p/2),h-2)+c+2*g),n.points=u}else 1==p&&(u=C(n,e,c=-1*k()),n.points=u);return u})},options:{series:{bars:{order:null}}},name:"orderBars",version:"0.2"}),function(){var t,e,n,i,r,s,a,o,l,u,h,c,f,p={}.hasOwnProperty,d=function(t,e){for(var n in e)p.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};!function(){var i,r,a,t,e,n,o;for(n=0,o=(e=["ms","moz","webkit","o"]).length;n<o&&(t=e[n],!window.requestAnimationFrame);n++)window.requestAnimationFrame=window[t+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t+"CancelAnimationFrame"]||window[t+"CancelRequestAnimationFrame"];i=null,a=0,r={},requestAnimationFrame?window.cancelAnimationFrame||(i=window.requestAnimationFrame,window.requestAnimationFrame=function(t,e){var n;return n=++a,i(function(){if(!r[n])return t()},e),n},window.cancelAnimationFrame=function(t){return r[t]=!0}):(window.requestAnimationFrame=function(t,e){var n,i,r,a;return n=(new Date).getTime(),a=Math.max(0,16-(n-r)),i=window.setTimeout(function(){return t(n+a)},a),r=n+a,i},window.cancelAnimationFrame=function(t){return clearTimeout(t)})}(),String.prototype.hashCode=function(){var t,e,n,i;if((t=0)===this.length)return t;for(e=n=0,i=this.length;0<=i?n<i:i<n;e=0<=i?++n:--n)t=(t<<5)-t+this.charCodeAt(e),t&=t;return t},c=function(t){var e,n;for(t-=3600*(e=Math.floor(t/3600))+60*(n=Math.floor((t-3600*e)/60)),t+="",n+="";n.length<2;)n="0"+n;for(;t.length<2;)t="0"+t;return(e=e?e+":":"")+n+":"+t},u=function(t){return l(t.toFixed(0))},f=function(t,e){var n,i;for(n in e)p.call(e,n)&&(i=e[n],t[n]=i);return t},h=function(t,e){var n,i,r;for(n in i={},t)p.call(t,n)&&(r=t[n],i[n]=r);for(n in e)p.call(e,n)&&(r=e[n],i[n]=r);return i},l=function(t){var e,n,i,r;for(i=(n=(t+="").split("."))[0],r="",1<n.length&&(r="."+n[1]),e=/(\d+)(\d{3})/;e.test(i);)i=i.replace(e,"$1,$2");return i+r},o=function(){function t(t,e){null==t&&(t=!0),this.clear=null==e||e,t&&AnimationUpdater.add(this)}return t.prototype.animationSpeed=32,t.prototype.update=function(t){var e;return null==t&&(t=!1),!(!t&&this.displayedValue===this.value)&&(this.ctx&&this.clear&&this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),e=this.value-this.displayedValue,Math.abs(e/this.animationSpeed)<=.001?this.displayedValue=this.value:this.displayedValue=this.displayedValue+e/this.animationSpeed,this.render(),!0)},t}(),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return d(e,o),e.prototype.setTextField=function(t){return this.textField=t instanceof a?t:new a(t)},e.prototype.setOptions=function(t){return null==t&&(t=null),this.options=h(this.options,t),this.textField&&(this.textField.el.style.fontSize=t.fontSize+"px"),this},e}(),a=function(){function t(t){this.el=t}return t.prototype.render=function(t){return this.el.innerHTML=u(t.displayedValue)},t}(),t=function(t){function e(t,e){this.elem=t,this.text=null!=e&&e,this.value=1*this.elem.innerHTML,this.text&&(this.value=0)}return d(e,o),e.prototype.displayedValue=0,e.prototype.value=0,e.prototype.setVal=function(t){return this.value=1*t},e.prototype.render=function(){var t;return t=this.text?c(this.displayedValue.toFixed(0)):l(u(this.displayedValue)),this.elem.innerHTML=t},e}(),s=function(t){function e(t){this.gauge=t,this.ctx=this.gauge.ctx,this.canvas=this.gauge.canvas,e.__super__.constructor.call(this,!1,!1),this.setOptions()}return d(e,o),e.prototype.displayedValue=0,e.prototype.value=0,e.prototype.options={strokeWidth:.035,length:.1,color:"#000000"},e.prototype.setOptions=function(t){return null==t&&(t=null),f(this.options,t),this.length=this.canvas.height*this.options.length,this.strokeWidth=this.canvas.height*this.options.strokeWidth,this.maxValue=this.gauge.maxValue,this.animationSpeed=this.gauge.animationSpeed},e.prototype.render=function(){var t,e,n,i,r,a,o,s,l;return t=this.gauge.getAngle.call(this,this.displayedValue),e=this.canvas.width/2,n=.9*this.canvas.height,s=Math.round(e+this.length*Math.cos(t)),l=Math.round(n+this.length*Math.sin(t)),a=Math.round(e+this.strokeWidth*Math.cos(t-Math.PI/2)),o=Math.round(n+this.strokeWidth*Math.sin(t-Math.PI/2)),i=Math.round(e+this.strokeWidth*Math.cos(t+Math.PI/2)),r=Math.round(n+this.strokeWidth*Math.sin(t+Math.PI/2)),this.ctx.fillStyle=this.options.color,this.ctx.beginPath(),this.ctx.arc(e,n,this.strokeWidth,0,2*Math.PI,!0),this.ctx.fill(),this.ctx.beginPath(),this.ctx.moveTo(a,o),this.ctx.lineTo(s,l),this.ctx.lineTo(i,r),this.ctx.fill()},e}(),function(){function t(t){this.elem=t}t.prototype.updateValues=function(t){return this.value=t[0],this.maxValue=t[1],this.avgValue=t[2],this.render()},t.prototype.render=function(){var t,e;return this.textField&&this.textField.text(u(this.value)),0===this.maxValue&&(this.maxValue=2*this.avgValue),e=this.value/this.maxValue*100,t=this.avgValue/this.maxValue*100,$(".bar-value",this.elem).css({width:e+"%"}),$(".typical-value",this.elem).css({width:t+"%"})}}(),r=function(t){function r(t){this.canvas=t,r.__super__.constructor.call(this),this.ctx=this.canvas.getContext("2d"),this.gp=[new s(this)],this.setOptions(),this.render()}return d(r,n),r.prototype.elem=null,r.prototype.value=[20],r.prototype.maxValue=80,r.prototype.displayedAngle=0,r.prototype.displayedValue=0,r.prototype.lineWidth=40,r.prototype.paddingBottom=.1,r.prototype.options={colorStart:"#6fadcf",colorStop:void 0,strokeColor:"#e0e0e0",pointer:{length:.8,strokeWidth:.035},angle:.15,lineWidth:.44,fontSize:40},r.prototype.setOptions=function(t){var e,n,i;for(null==t&&(t=null),r.__super__.setOptions.call(this,t),this.lineWidth=this.canvas.height*(1-this.paddingBottom)*this.options.lineWidth,this.radius=this.canvas.height*(1-this.paddingBottom)-this.lineWidth,e=0,n=(i=this.gp).length;e<n;e++)i[e].setOptions(this.options.pointer);return this},r.prototype.set=function(t){var e,n,i,r,a,o;if(t instanceof Array||(t=[t]),t.length>this.gp.length)for(e=i=0,o=t.length-this.gp.length;0<=o?i<o:o<i;e=0<=o?++i:--i)this.gp.push(new s(this));for(r=e=0,a=t.length;r<a;r++)(n=t[r])>this.maxValue&&(this.maxValue=1.1*this.value),this.gp[e].value=n,this.gp[e++].setOptions({maxValue:this.maxValue,angle:this.options.angle});return this.value=t[t.length-1],AnimationUpdater.run()},r.prototype.getAngle=function(t){return(1+this.options.angle)*Math.PI+t/this.maxValue*(1-2*this.options.angle)*Math.PI},r.prototype.render=function(){var t,e,n,i,r,a,o,s,l;for(r=this.canvas.width/2,i=this.canvas.height*(1-this.paddingBottom),t=this.getAngle(this.displayedValue),this.textField&&this.textField.render(this),this.ctx.lineCap="butt",void 0!==this.options.colorStop?((e=this.ctx.createRadialGradient(r,i,9,r,i,70)).addColorStop(0,this.options.colorStart),e.addColorStop(1,this.options.colorStop)):e=this.options.colorStart,this.ctx.strokeStyle=e,this.ctx.beginPath(),this.ctx.arc(r,i,this.radius,(1+this.options.angle)*Math.PI,t,!1),this.ctx.lineWidth=this.lineWidth,this.ctx.stroke(),this.ctx.strokeStyle=this.options.strokeColor,this.ctx.beginPath(),this.ctx.arc(r,i,this.radius,t,(2-this.options.angle)*Math.PI,!1),this.ctx.stroke(),l=[],a=0,o=(s=this.gp).length;a<o;a++)n=s[a],l.push(n.update(!0));return l},r}(),e=function(t){function e(t){this.canvas=t,e.__super__.constructor.call(this),this.ctx=this.canvas.getContext("2d"),this.setOptions(),this.render()}return d(e,n),e.prototype.lineWidth=15,e.prototype.displayedValue=0,e.prototype.value=33,e.prototype.maxValue=80,e.prototype.options={lineWidth:.1,colorStart:"#6f6ea0",colorStop:"#c0c0db",strokeColor:"#eeeeee",shadowColor:"#d5d5d5",angle:.35},e.prototype.getAngle=function(t){return(1-this.options.angle)*Math.PI+t/this.maxValue*(2+this.options.angle-(1-this.options.angle))*Math.PI},e.prototype.setOptions=function(t){return null==t&&(t=null),e.__super__.setOptions.call(this,t),this.lineWidth=this.canvas.height*this.options.lineWidth,this.radius=this.canvas.height/2-this.lineWidth/2,this},e.prototype.set=function(t){return this.value=t,this.value>this.maxValue&&(this.maxValue=1.1*this.value),AnimationUpdater.run()},e.prototype.render=function(){var t,e,n,i;return t=this.getAngle(this.displayedValue),i=this.canvas.width/2,n=this.canvas.height/2,this.textField&&this.textField.render(this),(e=this.ctx.createRadialGradient(i,n,39,i,n,70)).addColorStop(0,this.options.colorStart),e.addColorStop(1,this.options.colorStop),this.radius-this.lineWidth/2,this.radius+this.lineWidth/2,this.ctx.strokeStyle=this.options.strokeColor,this.ctx.beginPath(),this.ctx.arc(i,n,this.radius,(1-this.options.angle)*Math.PI,(2+this.options.angle)*Math.PI,!1),this.ctx.lineWidth=this.lineWidth,this.ctx.lineCap="round",this.ctx.stroke(),this.ctx.strokeStyle=e,this.ctx.beginPath(),this.ctx.arc(i,n,this.radius,(1-this.options.angle)*Math.PI,t,!1),this.ctx.stroke()},e}(),i=function(t){function a(){return a.__super__.constructor.apply(this,arguments)}return d(a,e),a.prototype.strokeGradient=function(t,e,n,i){var r;return(r=this.ctx.createRadialGradient(t,e,n,t,e,i)).addColorStop(0,this.options.shadowColor),r.addColorStop(.12,this.options._orgStrokeColor),r.addColorStop(.88,this.options._orgStrokeColor),r.addColorStop(1,this.options.shadowColor),r},a.prototype.setOptions=function(t){var e,n,i,r;return null==t&&(t=null),a.__super__.setOptions.call(this,t),r=this.canvas.width/2,e=this.canvas.height/2,n=this.radius-this.lineWidth/2,i=this.radius+this.lineWidth/2,this.options._orgStrokeColor=this.options.strokeColor,this.options.strokeColor=this.strokeGradient(r,e,n,i),this},a}(),window.AnimationUpdater={elements:[],animId:null,addAll:function(t){var e,n,i,r;for(r=[],n=0,i=t.length;n<i;n++)e=t[n],r.push(AnimationUpdater.elements.push(e));return r},add:function(t){return AnimationUpdater.elements.push(t)},run:function(){var t,e,n,i;for(t=!0,e=0,n=(i=AnimationUpdater.elements).length;e<n;e++)i[e].update()&&(t=!1);return t?cancelAnimationFrame(AnimationUpdater.animId):AnimationUpdater.animId=requestAnimationFrame(AnimationUpdater.run)}},window.Gauge=r,window.Donut=i,window.BaseDonut=e,window.TextRenderer=a}.call(this),function(){function s(t){return t&&(t.ownerDocument||t.document||t).documentElement}function I(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function o(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}function u(t){return null===t?NaN:+t}function h(t){return!isNaN(t)}function t(a){return{left:function(t,e,n,i){for(arguments.length<3&&(n=0),arguments.length<4&&(i=t.length);n<i;){var r=n+i>>>1;a(t[r],e)<0?n=r+1:i=r}return n},right:function(t,e,n,i){for(arguments.length<3&&(n=0),arguments.length<4&&(i=t.length);n<i;){var r=n+i>>>1;0<a(t[r],e)?i=r:n=r+1}return n}}}function l(t){return t.length}function e(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function y(){this._=Object.create(null)}function n(t){return(t+="")===ta||t[0]===ea?ea+t:t}function i(t){return(t+="")[0]===ea?t.slice(1):t}function r(t){return n(t)in this._}function a(t){return(t=n(t))in this._&&delete this._[t]}function c(){var t=[];for(var e in this._)t.push(i(e));return t}function f(){var t=0;for(var e in this._)++t;return t}function p(){for(var t in this._)return!1;return!0}function d(){this._=Object.create(null)}function z(t){return t}function g(e,n,i){return function(){var t=i.apply(n,arguments);return t===n?e:t}}function v(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,i=na.length;n<i;++n){var r=na[n]+e;if(r in t)return r}}function m(){}function x(){}function b(r){function t(){for(var t,e=a,n=-1,i=e.length;++n<i;)(t=e[n].on)&&t.apply(this,arguments);return r}var a=[],o=new y;return t.on=function(t,e){var n,i=o.get(t);return arguments.length<2?i&&i.on:(i&&(i.on=null,a=a.slice(0,n=a.indexOf(i)).concat(a.slice(n+1)),o.remove(t)),e&&a.push(o.set(t,{on:e})),r)},t}function L(){Br.event.preventDefault()}function w(){for(var t,e=Br.event;t=e.sourceEvent;)e=t;return e}function F(r){for(var a=new x,t=0,e=arguments.length;++t<e;)a[arguments[t]]=b(a);return a.of=function(n,i){return function(t){try{var e=t.sourceEvent=Br.event;t.target=r,Br.event=t,a[t.type].apply(n,i)}finally{Br.event=e}}},a}function M(t){return ra(t,la),t}function k(t){return"function"==typeof t?t:function(){return aa(t,this)}}function S(t){return"function"==typeof t?t:function(){return oa(t,this)}}function C(e,n){return e=Br.ns.qualify(e),null==n?e.local?function(){this.removeAttributeNS(e.space,e.local)}:function(){this.removeAttribute(e)}:"function"==typeof n?e.local?function(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}:function(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}:e.local?function(){this.setAttributeNS(e.space,e.local,n)}:function(){this.setAttribute(e,n)}}function _(t){return t.trim().replace(/\s+/g," ")}function R(t){return new RegExp("(?:^|\\s+)"+Br.requote(t)+"(?:\\s+|$)","g")}function A(t){return(t+"").trim().split(/^|\s+/)}function T(n,i){var r=(n=A(n).map(E)).length;return"function"==typeof i?function(){for(var t=-1,e=i.apply(this,arguments);++t<r;)n[t](this,e)}:function(){for(var t=-1;++t<r;)n[t](this,i)}}function E(i){var r=R(i);return function(t,e){if(n=t.classList)return e?n.add(i):n.remove(i);var n=t.getAttribute("class")||"";e?(r.lastIndex=0,r.test(n)||t.setAttribute("class",_(n+" "+i))):t.setAttribute("class",_(n.replace(r," ")))}}function N(e,n,i){return null==n?function(){this.style.removeProperty(e)}:"function"==typeof n?function(){var t=n.apply(this,arguments);null==t?this.style.removeProperty(e):this.style.setProperty(e,t,i)}:function(){this.style.setProperty(e,n,i)}}function P(e,n){return null==n?function(){delete this[e]}:"function"==typeof n?function(){var t=n.apply(this,arguments);null==t?delete this[e]:this[e]=t}:function(){this[e]=n}}function D(n){return"function"==typeof n?n:(n=Br.ns.qualify(n)).local?function(){return this.ownerDocument.createElementNS(n.space,n.local)}:function(){var t=this.ownerDocument,e=this.namespaceURI;return e?t.createElementNS(e,n):t.createElement(n)}}function q(){var t=this.parentNode;t&&t.removeChild(this)}function W(t){return{__data__:t}}function H(t){return function(){return sa(this,t)}}function O(t,e){for(var n=0,i=t.length;n<i;n++)for(var r,a=t[n],o=0,s=a.length;o<s;o++)(r=a[o])&&e(r,o,n);return t}function j(t){return ra(t,ha),t}function B(r,e,n){function i(){var t=this[a];t&&(this.removeEventListener(r,t,t.$),delete this[a])}var a="__on"+r,t=r.indexOf("."),o=U;0<t&&(r=r.slice(0,t));var s=ca.get(r);return s&&(r=s,o=V),t?e?function(){var t=o(e,Vr(arguments));i.call(this),this.addEventListener(r,this[a]=t,t.$=n),t._=e}:i:e?m:function(){var t,e=new RegExp("^__on([^.]+)"+Br.requote(r)+"$");for(var n in this)if(t=n.match(e)){var i=this[n];this.removeEventListener(t[1],i,i.$),delete this[n]}}}function U(n,i){return function(t){var e=Br.event;Br.event=t,i[0]=this.__data__;try{n.apply(this,i)}finally{Br.event=e}}}function V(t,e){var n=U(t,e);return function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||n.call(this,t)}}function G(t){var n=".dragsuppress-"+ ++pa,i="click"+n,r=Br.select(I(t)).on("touchmove"+n,L).on("dragstart"+n,L).on("selectstart"+n,L);if(null==fa&&(fa=!("onselectstart"in t)&&v(t.style,"userSelect")),fa){var a=s(t).style,o=a[fa];a[fa]="none"}return function(t){if(r.on(n,null),fa&&(a[fa]=o),t){var e=function(){r.on(i,null)};r.on(i,function(){L(),e()},!0),setTimeout(e,0)}}}function Y(t,e){e.changedTouches&&(e=e.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();if(da<0){var r=I(t);if(r.scrollX||r.scrollY){var a=(n=Br.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();da=!(a.f||a.e),n.remove()}}return da?(i.x=e.pageX,i.y=e.pageY):(i.x=e.clientX,i.y=e.clientY),[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}function X(){return Br.event.changedTouches[0].identifier}function $(t){return 0<t?1:t<0?-1:0}function Q(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Z(t){return 1<t?0:t<-1?ma:Math.acos(t)}function J(t){return 1<t?ba:t<-1?-ba:Math.asin(t)}function K(t){return((t=Math.exp(t))+1/t)/2}function tt(t){return(t=Math.sin(t/2))*t}function et(){}function nt(t,e,n){return this instanceof nt?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof nt?new nt(t.h,t.s,t.l):vt(""+t,mt,nt):new nt(t,e,n)}function it(t,e,n){function i(t){return Math.round(255*(360<(e=t)?e-=360:e<0&&(e+=360),e<60?r+(a-r)*e/60:e<180?a:e<240?r+(a-r)*(240-e)/60:r));var e}var r,a;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:e<0?0:1<e?1:e,r=2*(n=n<0?0:1<n?1:n)-(a=n<=.5?n*(1+e):n+e-n*e),new ft(i(t+120),i(t),i(t-120))}function rt(t,e,n){return this instanceof rt?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof rt?new rt(t.h,t.c,t.l):lt(t instanceof ot?t.l:(t=yt((t=Br.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new rt(t,e,n)}function at(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new ot(n,Math.cos(t*=wa)*e,Math.sin(t)*e)}function ot(t,e,n){return this instanceof ot?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof ot?new ot(t.l,t.a,t.b):t instanceof rt?at(t.h,t.c,t.l):yt((t=ft(t)).r,t.g,t.b):new ot(t,e,n)}function st(t,e,n){var i=(t+16)/116,r=i+e/500,a=i-n/200;return new ft(ct(3.2404542*(r=ut(r)*Ea)-1.5371385*(i=ut(i)*Na)-.4985314*(a=ut(a)*Pa)),ct(-.969266*r+1.8760108*i+.041556*a),ct(.0556434*r-.2040259*i+1.0572252*a))}function lt(t,e,n){return 0<t?new rt(Math.atan2(n,e)*Ma,Math.sqrt(e*e+n*n),t):new rt(NaN,NaN,t)}function ut(t){return.206893034<t?t*t*t:(t-4/29)/7.787037}function ht(t){return.008856<t?Math.pow(t,1/3):7.787037*t+4/29}function ct(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function ft(t,e,n){return this instanceof ft?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof ft?new ft(t.r,t.g,t.b):vt(""+t,ft,it):new ft(t,e,n)}function pt(t){return new ft(t>>16,t>>8&255,255&t)}function dt(t){return pt(t)+""}function gt(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function vt(t,e,n){var i,r,a,o=0,s=0,l=0;if(i=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(r=i[2].split(","),i[1]){case"hsl":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return e(bt(r[0]),bt(r[1]),bt(r[2]))}return(a=La.get(t))?e(a.r,a.g,a.b):(null==t||"#"!==t.charAt(0)||isNaN(a=parseInt(t.slice(1),16))||(4===t.length?(o=(3840&a)>>4,o|=o>>4,s=240&a,s|=s>>4,l=15&a,l|=l<<4):7===t.length&&(o=(16711680&a)>>16,s=(65280&a)>>8,l=255&a)),e(o,s,l))}function mt(t,e,n){var i,r,a=Math.min(t/=255,e/=255,n/=255),o=Math.max(t,e,n),s=o-a,l=(o+a)/2;return s?(r=l<.5?s/(o+a):s/(2-o-a),i=t==o?(e-n)/s+(e<n?6:0):e==o?(n-t)/s+2:(t-e)/s+4,i*=60):(i=NaN,r=0<l&&l<1?0:i),new nt(i,r,l)}function yt(t,e,n){var i=ht((.4124564*(t=xt(t))+.3575761*(e=xt(e))+.1804375*(n=xt(n)))/Ea),r=ht((.2126729*t+.7151522*e+.072175*n)/Na);return ot(116*r-16,500*(i-r),200*(r-ht((.0193339*t+.119192*e+.9503041*n)/Pa)))}function xt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function bt(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function wt(t){return"function"==typeof t?t:function(){return t}}function Mt(i){return function(t,e,n){return 2===arguments.length&&"function"==typeof e&&(n=e,e=null),kt(t,e,i,n)}}function kt(r,a,o,t){function e(){var t,e,n,i=h.status;if(!i&&((n=(e=h).responseType)&&"text"!==n?e.response:e.responseText)||200<=i&&i<300||304===i){try{t=o.call(s,h)}catch(t){return void l.error.call(s,t)}l.load.call(s,t)}else l.error.call(s,h)}var n,s={},l=Br.dispatch("beforesend","progress","load","error"),u={},h=new XMLHttpRequest,c=null;return!this.XDomainRequest||"withCredentials"in h||!/^(http(s)?:)?\/\//.test(r)||(h=new XDomainRequest),"onload"in h?h.onload=h.onerror=e:h.onreadystatechange=function(){3<h.readyState&&e()},h.onprogress=function(t){var e=Br.event;Br.event=t;try{l.progress.call(s,h)}finally{Br.event=e}},s.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?u[t]:(null==e?delete u[t]:u[t]=e+"",s)},s.mimeType=function(t){return arguments.length?(a=null==t?null:t+"",s):a},s.responseType=function(t){return arguments.length?(c=t,s):c},s.response=function(t){return o=t,s},["get","post"].forEach(function(t){s[t]=function(){return s.send.apply(s,[t].concat(Vr(arguments)))}}),s.send=function(t,e,n){if(2===arguments.length&&"function"==typeof e&&(n=e,e=null),h.open(t,r,!0),null==a||"accept"in u||(u.accept=a+",*/*"),h.setRequestHeader)for(var i in u)h.setRequestHeader(i,u[i]);return null!=a&&h.overrideMimeType&&h.overrideMimeType(a),null!=c&&(h.responseType=c),null!=n&&s.on("error",n).on("load",function(t){n(null,t)}),l.beforesend.call(s,h),h.send(null==e?null:e),s},s.abort=function(){return h.abort(),s},Br.rebind(s,l,"on"),null==t?s:s.get(1===(n=t).length?function(t,e){n(null==t?e:null)}:n)}function St(){var t=Ct(),e=_t()-t;24<e?(isFinite(e)&&(clearTimeout(Wa),Wa=setTimeout(St,e)),qa=0):(qa=1,Oa(St))}function Ct(){var t=Date.now();for(Ha=Fa;Ha;)t>=Ha.t&&(Ha.f=Ha.c(t-Ha.t)),Ha=Ha.n;return t}function _t(){for(var t,e=Fa,n=1/0;e;)e.f?e=t?t.n=e.n:Fa=e.n:(e.t<n&&(n=e.t),e=(t=e).n);return Da=t,n}function Rt(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function At(t){return t+""}function Tt(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function Et(i,a,o){function t(t){var e=i(t),n=r(e,1);return t-e<n-t?e:n}function s(t){return a(t=i(new Ga(t-1)),1),t}function r(t,e){return a(t=new Ga(+t),e),t}function l(t,e,n){var i=s(t),r=[];if(1<n)for(;i<e;)o(i)%n||r.push(new Date(+i)),a(i,1);else for(;i<e;)r.push(new Date(+i)),a(i,1);return r}(i.floor=i).round=t,i.ceil=s,i.offset=r,i.range=l;var e=i.utc=Nt(i);return(e.floor=e).round=Nt(t),e.ceil=Nt(s),e.offset=Nt(r),e.range=function(t,e,n){try{var i=new(Ga=Tt);return i._=t,l(i,e,n)}finally{Ga=Date}},i}function Nt(i){return function(t,e){try{var n=new(Ga=Tt);return n._=t,i(n,e)._}finally{Ga=Date}}}function Pt(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",a=r.length;return i+(a<n?new Array(n-a+1).join(e)+r:r)}function It(t){return new RegExp("^(?:"+t.map(Br.requote).join("|")+")","i")}function zt(t){for(var e=new y,n=-1,i=t.length;++n<i;)e.set(t[n].toLowerCase(),n);return e}function Lt(t,e,n){$a.lastIndex=0;var i=$a.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Ft(t,e,n){$a.lastIndex=0;var i=$a.exec(e.slice(n));return i?(t.U=+i[0],n+i[0].length):-1}function Dt(t,e,n){$a.lastIndex=0;var i=$a.exec(e.slice(n));return i?(t.W=+i[0],n+i[0].length):-1}function qt(t,e,n){$a.lastIndex=0;var i=$a.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function Wt(t,e,n){$a.lastIndex=0;var i,r=$a.exec(e.slice(n,n+2));return r?(t.y=(i=+r[0])+(68<i?1900:2e3),n+r[0].length):-1}function Ht(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function Ot(t,e,n){$a.lastIndex=0;var i=$a.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function jt(t,e,n){$a.lastIndex=0;var i=$a.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function Bt(t,e,n){$a.lastIndex=0;var i=$a.exec(e.slice(n,n+3));return i?(t.j=+i[0],n+i[0].length):-1}function Ut(t,e,n){$a.lastIndex=0;var i=$a.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function Vt(t,e,n){$a.lastIndex=0;var i=$a.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function Gt(t,e,n){$a.lastIndex=0;var i=$a.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function Yt(t,e,n){$a.lastIndex=0;var i=$a.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function Xt(t){var e=t.getTimezoneOffset(),n=0<e?"-":"+",i=Kr(e)/60|0,r=Kr(e)%60;return n+Pt(i,"0",2)+Pt(r,"0",2)}function $t(t,e,n){Qa.lastIndex=0;var i=Qa.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function Qt(i){for(var t=i.length,e=-1;++e<t;)i[e][0]=this(i[e][0]);return function(t){for(var e=0,n=i[e];!n[1](t);)n=i[++e];return n[0](t)}}function Zt(){}function Jt(t,e,n){var i=n.s=t+e,r=i-t,a=i-r;n.t=t-a+(e-r)}function Kt(t,e){t&&to.hasOwnProperty(t.type)&&to[t.type](t,e)}function te(t,e,n){var i,r=-1,a=t.length-n;for(e.lineStart();++r<a;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function ee(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)te(t[n],e,1);e.polygonEnd()}function ne(){function n(t,e){e=e*wa/2+ma/4;var n=(t*=wa)-h,i=0<=n?1:-1,r=i*n,a=Math.cos(e),o=Math.sin(e),s=f*o,l=c*a+s*Math.cos(r),u=s*i*Math.sin(r);no.add(Math.atan2(u,l)),h=t,c=a,f=o}var i,r,h,c,f;io.point=function(t,e){io.point=n,h=(i=t)*wa,c=Math.cos(e=(r=e)*wa/2+ma/4),f=Math.sin(e)},io.lineEnd=function(){n(i,r)}}function ie(t){var e=t[0],n=t[1],i=Math.cos(n);return[i*Math.cos(e),i*Math.sin(e),Math.sin(n)]}function re(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ae(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function oe(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function se(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function le(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function ue(t){return[Math.atan2(t[1],t[0]),J(t[2])]}function he(t,e){return Kr(t[0]-e[0])<ga&&Kr(t[1]-e[1])<ga}function ce(t,e){t*=wa;var n=Math.cos(e*=wa);fe(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function fe(t,e,n){oo+=(t-oo)/++ro,so+=(e-so)/ro,lo+=(n-lo)/ro}function pe(){function i(t,e){t*=wa;var n=Math.cos(e*=wa),i=n*Math.cos(t),r=n*Math.sin(t),a=Math.sin(e),o=Math.atan2(Math.sqrt((o=l*a-u*r)*o+(o=u*i-s*a)*o+(o=s*r-l*i)*o),s*i+l*r+u*a);ao+=o,uo+=o*(s+(s=i)),ho+=o*(l+(l=r)),co+=o*(u+(u=a)),fe(s,l,u)}var s,l,u;vo.point=function(t,e){t*=wa;var n=Math.cos(e*=wa);s=n*Math.cos(t),l=n*Math.sin(t),u=Math.sin(e),vo.point=i,fe(s,l,u)}}function de(){vo.point=ce}function ge(){function i(t,e){t*=wa;var n=Math.cos(e*=wa),i=n*Math.cos(t),r=n*Math.sin(t),a=Math.sin(e),o=d*a-g*r,s=g*i-p*a,l=p*r-d*i,u=Math.sqrt(o*o+s*s+l*l),h=p*i+d*r+g*a,c=u&&-Z(h)/u,f=Math.atan2(u,h);fo+=c*o,po+=c*s,go+=c*l,ao+=f,uo+=f*(p+(p=i)),ho+=f*(d+(d=r)),co+=f*(g+(g=a)),fe(p,d,g)}var r,a,p,d,g;vo.point=function(t,e){r=t,a=e,vo.point=i,t*=wa;var n=Math.cos(e*=wa);p=n*Math.cos(t),d=n*Math.sin(t),g=Math.sin(e),fe(p,d,g)},vo.lineEnd=function(){i(r,a),vo.lineEnd=de,vo.point=ce}}function ve(n,i){function t(t,e){return t=n(t,e),i(t[0],t[1])}return n.invert&&i.invert&&(t.invert=function(t,e){return(t=i.invert(t,e))&&n.invert(t[0],t[1])}),t}function me(){return!0}function ye(t,e,n,i,s){var l=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],i=t[e];if(he(n,i)){s.lineStart();for(var r=0;r<e;++r)s.point((n=t[r])[0],n[1]);return void s.lineEnd()}var a=new be(n,t,null,!0),o=new be(n,null,a,!1);a.o=o,l.push(a),u.push(o),o=new be(i,null,a=new be(i,t,null,!1),!0),a.o=o,l.push(a),u.push(o)}}),u.sort(e),xe(l),xe(u),l.length){for(var r=0,a=n,o=u.length;r<o;++r)u[r].e=a=!a;for(var h,c,f=l[0];;){for(var p=f,d=!0;p.v;)if((p=p.n)===f)return;h=p.z,s.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(r=0,o=h.length;r<o;++r)s.point((c=h[r])[0],c[1]);else i(p.x,p.n.x,1,s);p=p.n}else{if(d)for(r=(h=p.p.z).length-1;0<=r;--r)s.point((c=h[r])[0],c[1]);else i(p.x,p.p.x,-1,s);p=p.p}h=(p=p.o).z,d=!d}while(!p.v);s.lineEnd()}}}function xe(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function be(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function we(y,x,b,w){return function(i,o){function e(t,e){var n=i(t,e);y(t=n[0],e=n[1])&&o.point(t,e)}function t(t,e){var n=i(t,e);f.point(n[0],n[1])}function n(){d.point=t,f.lineStart()}function r(){d.point=e,f.lineEnd()}function s(t,e){c.push([t,e]);var n=i(t,e);v.point(n[0],n[1])}function a(){v.lineStart(),c=[]}function l(){s(c[0][0],c[0][1]),v.lineEnd();var t,e=v.clean(),n=g.buffer(),i=n.length;if(c.pop(),h.push(c),c=null,i)if(1&e){var r,a=-1;if(0<(i=(t=n[0]).length-1)){for(m||(o.polygonStart(),m=!0),o.lineStart();++a<i;)o.point((r=t[a])[0],r[1]);o.lineEnd()}}else 1<i&&2&e&&n.push(n.pop().concat(n.shift())),u.push(n.filter(Me))}var u,h,c,f=x(o),p=i.invert(w[0],w[1]),d={point:e,lineStart:n,lineEnd:r,polygonStart:function(){d.point=s,d.lineStart=a,d.lineEnd=l,u=[],h=[]},polygonEnd:function(){d.point=e,d.lineStart=n,d.lineEnd=r,u=Br.merge(u);var t=function(t,e){var n=t[0],i=t[1],r=[Math.sin(n),-Math.cos(n),0],a=0,o=0;no.reset();for(var s=0,l=e.length;s<l;++s){var u=e[s],h=u.length;if(h)for(var c=u[0],f=c[0],p=c[1]/2+ma/4,d=Math.sin(p),g=Math.cos(p),v=1;;){v===h&&(v=0);var m=(t=u[v])[0],y=t[1]/2+ma/4,x=Math.sin(y),b=Math.cos(y),w=m-f,M=0<=w?1:-1,k=M*w,S=ma<k,C=d*x;if(no.add(Math.atan2(C*M*Math.sin(k),g*b+C*Math.cos(k))),a+=S?w+M*ya:w,S^n<=f^n<=m){var _=ae(ie(c),ie(t));le(_);var R=ae(r,_);le(R);var A=(S^0<=w?-1:1)*J(R[2]);(A<i||i===A&&(_[0]||_[1]))&&(o+=S^0<=w?1:-1)}if(!v++)break;f=m,d=x,g=b,c=t}}return(a<-ga||a<ga&&no<0)^1&o}(p,h);u.length?(m||(o.polygonStart(),m=!0),ye(u,Se,t,b,o)):t&&(m||(o.polygonStart(),m=!0),o.lineStart(),b(null,null,1,o),o.lineEnd()),m&&(o.polygonEnd(),m=!1),u=h=null},sphere:function(){o.polygonStart(),o.lineStart(),b(null,null,1,o),o.lineEnd(),o.polygonEnd()}},g=ke(),v=x(g),m=!1;return d}}function Me(t){return 1<t.length}function ke(){var n,e=[];return{lineStart:function(){e.push(n=[])},point:function(t,e){n.push([t,e])},lineEnd:m,buffer:function(){var t=e;return e=[],n=null,t},rejoin:function(){1<e.length&&e.push(e.pop().concat(e.shift()))}}}function Se(t,e){return((t=t.x)[0]<0?t[1]-ba-ga:ba-t[1])-((e=e.x)[0]<0?e[1]-ba-ga:ba-e[1])}function Ce(h,c,f,p){return function(t){var e,n=t.a,i=t.b,r=n.x,a=n.y,o=0,s=1,l=i.x-r,u=i.y-a;if(e=h-r,l||!(0<e)){if(e/=l,l<0){if(e<o)return;e<s&&(s=e)}else if(0<l){if(s<e)return;o<e&&(o=e)}if(e=f-r,l||!(e<0)){if(e/=l,l<0){if(s<e)return;o<e&&(o=e)}else if(0<l){if(e<o)return;e<s&&(s=e)}if(e=c-a,u||!(0<e)){if(e/=u,u<0){if(e<o)return;e<s&&(s=e)}else if(0<u){if(s<e)return;o<e&&(o=e)}if(e=p-a,u||!(e<0)){if(e/=u,u<0){if(s<e)return;o<e&&(o=e)}else if(0<u){if(e<o)return;e<s&&(s=e)}return 0<o&&(t.a={x:r+o*l,y:a+o*u}),s<1&&(t.b={x:r+s*l,y:a+s*u}),t}}}}}}function _e(b,w,M,k){function S(t,e){return Kr(t[0]-b)<ga?0<e?0:3:Kr(t[0]-M)<ga?0<e?2:1:Kr(t[1]-w)<ga?0<e?1:0:0<e?3:2}function C(t,e){return _(t.x,e.x)}function _(t,e){var n=S(t,1),i=S(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(r){function i(t,e,n,i){var r=0,a=0;if(null==t||(r=S(t,n))!==(a=S(e,n))||_(t,e)<0^0<n)for(;i.point(0===r||3===r?b:M,1<r?k:w),(r=(r+n+4)%4)!==a;);else i.point(e[0],e[1])}function a(t,e){return b<=t&&t<=M&&w<=e&&e<=k}function t(t,e){a(t,e)&&r.point(t,e)}function e(t,e){var n=a(t=Math.max(-yo,Math.min(yo,t)),e=Math.max(-yo,Math.min(yo,e)));if(h&&s.push([t,e]),g)l=t,u=e,g=!1,(c=n)&&(r.lineStart(),r.point(t,e));else if(n&&d)r.point(t,e);else{var i={a:{x:f,y:p},b:{x:t,y:e}};y(i)?(d||(r.lineStart(),r.point(i.a.x,i.a.y)),r.point(i.b.x,i.b.y),n||r.lineEnd(),v=!1):n&&(r.lineStart(),r.point(t,e),v=!1)}f=t,p=e,d=n}var o,h,s,l,u,c,f,p,d,g,v,m=r,n=ke(),y=Ce(b,w,M,k),x={point:t,lineStart:function(){x.point=e,h&&h.push(s=[]),d=!(g=!0),f=p=NaN},lineEnd:function(){o&&(e(l,u),c&&d&&n.rejoin(),o.push(n.buffer())),x.point=t,d&&r.lineEnd()},polygonStart:function(){r=n,o=[],h=[],v=!0},polygonEnd:function(){r=m,o=Br.merge(o);var t=function(t){for(var e=0,n=h.length,i=t[1],r=0;r<n;++r)for(var a,o=1,s=h[r],l=s.length,u=s[0];o<l;++o)a=s[o],u[1]<=i?a[1]>i&&0<Q(u,a,t)&&++e:a[1]<=i&&Q(u,a,t)<0&&--e,u=a;return 0!==e}([b,k]),e=v&&t,n=o.length;(e||n)&&(r.polygonStart(),e&&(r.lineStart(),i(null,null,1,r),r.lineEnd()),n&&ye(o,C,t,i,r),r.polygonEnd()),o=h=s=null}};return x}}function Re(t){var e=0,n=ma/3,i=Oe(t),r=i(e,n);return r.parallels=function(t){return arguments.length?i(e=t[0]*ma/180,n=t[1]*ma/180):[e/ma*180,n/ma*180]},r}function Ae(t,e){function n(t,e){var n=Math.sqrt(a-2*r*Math.sin(e))/r;return[n*Math.sin(t*=r),o-n*Math.cos(t)]}var i=Math.sin(t),r=(i+Math.sin(e))/2,a=1+i*(2*r-i),o=Math.sqrt(a)/r;return n.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/r,J((a-(t*t+n*n)*r*r)/(2*r))]},n}function Te(){function n(t,e){bo+=o*t-a*e,a=t,o=e}var i,r,a,o;Co.point=function(t,e){Co.point=n,i=a=t,r=o=e},Co.lineEnd=function(){n(i,r)}}function Ee(){function t(t,e){o.push("M",t,",",e,a)}function e(t,e){o.push("M",t,",",e),s.point=n}function n(t,e){o.push("L",t,",",e)}function i(){s.point=t}function r(){o.push("Z")}var a=Ne(4.5),o=[],s={point:t,lineStart:function(){s.point=e},lineEnd:i,polygonStart:function(){s.lineEnd=r},polygonEnd:function(){s.lineEnd=i,s.point=t},pointRadius:function(t){return a=Ne(t),s},result:function(){if(o.length){var t=o.join("");return o=[],t}}};return s}function Ne(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Pe(t,e){oo+=t,so+=e,++lo}function Ie(){function n(t,e){var n=t-a,i=e-o,r=Math.sqrt(n*n+i*i);uo+=r*(a+t)/2,ho+=r*(o+e)/2,co+=r,Pe(a=t,o=e)}var a,o;Ro.point=function(t,e){Ro.point=n,Pe(a=t,o=e)}}function ze(){Ro.point=Pe}function Le(){function n(t,e){var n=t-a,i=e-o,r=Math.sqrt(n*n+i*i);uo+=r*(a+t)/2,ho+=r*(o+e)/2,co+=r,fo+=(r=o*t-a*e)*(a+t),po+=r*(o+e),go+=3*r,Pe(a=t,o=e)}var i,r,a,o;Ro.point=function(t,e){Ro.point=n,Pe(i=a=t,r=o=e)},Ro.lineEnd=function(){n(i,r)}}function Fe(n){function t(t,e){n.moveTo(t+o,e),n.arc(t,e,o,0,ya)}function e(t,e){n.moveTo(t,e),s.point=i}function i(t,e){n.lineTo(t,e)}function r(){s.point=t}function a(){n.closePath()}var o=4.5,s={point:t,lineStart:function(){s.point=e},lineEnd:r,polygonStart:function(){s.lineEnd=a},polygonEnd:function(){s.lineEnd=r,s.point=t},pointRadius:function(t){return o=t,s},result:m};return s}function De(T){function e(t){return(w?function(r){function t(t,e){t=T(t,e),r.point(t[0],t[1])}function e(){g=NaN,b.point=n,r.lineStart()}function n(t,e){var n=ie([t,e]),i=T(t,e);E(g,v,d,m,y,x,g=i[0],v=i[1],d=t,m=n[0],y=n[1],x=n[2],w,r),r.point(g,v)}function i(){b.point=t,r.lineEnd()}function a(){e(),b.point=o,b.lineEnd=s}function o(t,e){n(l=t,e),u=g,h=v,c=m,f=y,p=x,b.point=n}function s(){E(g,v,d,m,y,x,u,h,l,c,f,p,w,r),(b.lineEnd=i)()}var l,u,h,c,f,p,d,g,v,m,y,x,b={point:t,lineStart:e,lineEnd:i,polygonStart:function(){r.polygonStart(),b.lineStart=a},polygonEnd:function(){r.polygonEnd(),b.lineStart=e}};return b}:function(n){return We(n,function(t,e){t=T(t,e),n.point(t[0],t[1])})})(t)}function E(t,e,n,i,r,a,o,s,l,u,h,c,f,p){var d=o-t,g=s-e,v=d*d+g*g;if(4*N<v&&f--){var m=i+u,y=r+h,x=a+c,b=Math.sqrt(m*m+y*y+x*x),w=Math.asin(x/=b),M=Kr(Kr(x)-1)<ga||Kr(n-l)<ga?(n+l)/2:Math.atan2(y,m),k=T(M,w),S=k[0],C=k[1],_=S-t,R=C-e,A=g*_-d*R;(N<A*A/v||.3<Kr((d*_+g*R)/v-.5)||i*u+r*h+a*c<P)&&(E(t,e,n,i,r,a,S,C,M,m/=b,y/=b,x,f,p),p.point(S,C),E(S,C,M,m,y,x,o,s,l,u,h,c,f,p))}}var N=.5,P=Math.cos(30*wa),w=16;return e.precision=function(t){return arguments.length?(w=0<(N=t*t)&&16,e):Math.sqrt(N)},e}function qe(t){this.stream=t}function We(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function He(t){return Oe(function(){return t})()}function Oe(t){function e(t){return[(t=s(t[0]*wa,t[1]*wa))[0]*f+l,u-t[1]*f]}function n(t){return(t=s.invert((t[0]-l)/f,(u-t[1])/f))&&[t[0]*Ma,t[1]*Ma]}function i(){s=ve(o=Ve(m,y,x),a);var t=a(g,v);return l=p-t[0]*f,u=d+t[1]*f,r()}function r(){return h&&(h.valid=!1,h=null),e}var a,o,s,l,u,h,c=De(function(t,e){return[(t=a(t,e))[0]*f+l,u-t[1]*f]}),f=150,p=480,d=250,g=0,v=0,m=0,y=0,x=0,b=mo,w=z,M=null,k=null;return e.stream=function(t){return h&&(h.valid=!1),(h=je(b(o,c(w(t))))).valid=!0,h},e.clipAngle=function(t){return arguments.length?(b=null==t?(M=t,mo):function(r){function p(t,e){return Math.cos(t)*Math.cos(e)>_}function d(t,e,n){var i=[1,0,0],r=ae(ie(t),ie(e)),a=re(r,r),o=r[0],s=a-o*o;if(!s)return!n&&t;var l=_*a/s,u=-_*o/s,h=ae(i,r),c=se(i,l);oe(c,se(r,u));var f=h,p=re(c,f),d=re(f,f),g=p*p-d*(re(c,c)-1);if(!(g<0)){var v=Math.sqrt(g),m=se(f,(-p-v)/d);if(oe(m,c),m=ue(m),!n)return m;var y,x=t[0],b=e[0],w=t[1],M=e[1];b<x&&(y=x,x=b,b=y);var k=b-x,S=Kr(k-ma)<ga;if(!S&&M<w&&(y=w,w=M,M=y),S||k<ga?S?0<w+M^m[1]<(Kr(m[0]-x)<ga?w:M):w<=m[1]&&m[1]<=M:ma<k^(x<=m[0]&&m[0]<=b)){var C=se(f,(-p+v)/d);return oe(C,c),[m,ue(C)]}}}function g(t,e){var n=v?r:ma-r,i=0;return t<-n?i|=1:n<t&&(i|=2),e<-n?i|=4:n<e&&(i|=8),i}var _=Math.cos(r),v=0<_,m=Kr(_)>ga;return we(p,function(s){var l,u,h,c,f;return{lineStart:function(){c=h=!1,f=1},point:function(t,e){var n,i=[t,e],r=p(t,e),a=v?r?0:g(t,e):r?g(t+(t<0?ma:-ma),e):0;if(!l&&(c=h=r)&&s.lineStart(),r!==h&&(n=d(l,i),(he(l,n)||he(i,n))&&(i[0]+=ga,i[1]+=ga,r=p(i[0],i[1]))),r!==h)f=0,r?(s.lineStart(),n=d(i,l),s.point(n[0],n[1])):(n=d(l,i),s.point(n[0],n[1]),s.lineEnd()),l=n;else if(m&&l&&v^r){var o;a&u||!(o=d(i,l,!0))||(f=0,v?(s.lineStart(),s.point(o[0][0],o[0][1]),s.point(o[1][0],o[1][1]),s.lineEnd()):(s.point(o[1][0],o[1][1]),s.lineEnd(),s.lineStart(),s.point(o[0][0],o[0][1])))}!r||l&&he(l,i)||s.point(i[0],i[1]),l=i,h=r,u=a},lineEnd:function(){h&&s.lineEnd(),l=null},clean:function(){return f|(c&&h)<<1}}},$e(r,6*wa),v?[0,-r]:[-ma,r-ma])}((M=+t)*wa),r()):M},e.clipExtent=function(t){return arguments.length?(w=(k=t)?_e(t[0][0],t[0][1],t[1][0],t[1][1]):z,r()):k},e.scale=function(t){return arguments.length?(f=+t,i()):f},e.translate=function(t){return arguments.length?(p=+t[0],d=+t[1],i()):[p,d]},e.center=function(t){return arguments.length?(g=t[0]%360*wa,v=t[1]%360*wa,i()):[g*Ma,v*Ma]},e.rotate=function(t){return arguments.length?(m=t[0]%360*wa,y=t[1]%360*wa,x=2<t.length?t[2]%360*wa:0,i()):[m*Ma,y*Ma,x*Ma]},Br.rebind(e,c,"precision"),function(){return a=t.apply(this,arguments),e.invert=a.invert&&n,i()}}function je(n){return We(n,function(t,e){n.point(t*wa,e*wa)})}function Be(t,e){return[t,e]}function Ue(t,e){return[ma<t?t-ya:t<-ma?t+ya:t,e]}function Ve(t,e,n){return t?e||n?ve(Ye(t),Xe(e,n)):Ye(t):e||n?Xe(e,n):Ue}function Ge(n){return function(t,e){return[ma<(t+=n)?t-ya:t<-ma?t+ya:t,e]}}function Ye(t){var e=Ge(t);return e.invert=Ge(-t),e}function Xe(t,e){function n(t,e){var n=Math.cos(e),i=Math.cos(t)*n,r=Math.sin(t)*n,a=Math.sin(e),o=a*s+i*l;return[Math.atan2(r*u-o*h,i*s-a*l),J(o*u+r*h)]}var s=Math.cos(t),l=Math.sin(t),u=Math.cos(e),h=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),i=Math.cos(t)*n,r=Math.sin(t)*n,a=Math.sin(e),o=a*u-r*h;return[Math.atan2(r*u+a*h,i*s+o*l),J(o*s-i*l)]},n}function $e(s,l){var u=Math.cos(s),h=Math.sin(s);return function(t,e,n,i){var r=n*l;null!=t?(t=Qe(u,t),e=Qe(u,e),(0<n?t<e:e<t)&&(t+=n*ya)):(t=s+n*ya,e=s-.5*r);for(var a,o=t;0<n?e<o:o<e;o-=r)i.point((a=ue([u,-h*Math.cos(o),-h*Math.sin(o)]))[0],a[1])}}function Qe(t,e){var n=ie(e);n[0]-=t,le(n);var i=Z(-n[1]);return((-n[2]<0?-i:i)+2*Math.PI-ga)%(2*Math.PI)}function Ze(t,e,n){var i=Br.range(t,e-ga,n).concat(e);return function(e){return i.map(function(t){return[e,t]})}}function Je(t,e,n){var i=Br.range(t,e-ga,n).concat(e);return function(e){return i.map(function(t){return[t,e]})}}function Ke(t){return t.source}function tn(t){return t.target}function en(a,o){function t(t,e){var n=Math.cos(t),i=Math.cos(e),r=a(n*i);return[r*i*Math.sin(t),r*Math.sin(e)]}return t.invert=function(t,e){var n=Math.sqrt(t*t+e*e),i=o(n),r=Math.sin(i),a=Math.cos(i);return[Math.atan2(t*r,n*a),Math.asin(n&&e*r/n)]},t}function nn(t,e){function n(t,e){0<o?e<-ba+ga&&(e=-ba+ga):ba-ga<e&&(e=ba-ga);var n=o/Math.pow(r(e),a);return[n*Math.sin(a*t),o-n*Math.cos(a*t)]}var i=Math.cos(t),r=function(t){return Math.tan(ma/4+t/2)},a=t===e?Math.sin(t):Math.log(i/Math.cos(e))/Math.log(r(e)/r(t)),o=i*Math.pow(r(t),a)/a;return a?(n.invert=function(t,e){var n=o-e,i=$(a)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/a,2*Math.atan(Math.pow(o/i,1/a))-ba]},n):an}function rn(t,e){function n(t,e){var n=a-e;return[n*Math.sin(r*t),a-n*Math.cos(r*t)]}var i=Math.cos(t),r=t===e?Math.sin(t):(i-Math.cos(e))/(e-t),a=i/r+t;return Kr(r)<ga?Be:(n.invert=function(t,e){var n=a-e;return[Math.atan2(t,n)/r,a-$(r)*Math.sqrt(t*t+n*n)]},n)}function an(t,e){return[t,Math.log(Math.tan(ma/4+e/2))]}function on(t){var r,a=He(t),o=a.scale,s=a.translate,l=a.clipExtent;return a.scale=function(){var t=o.apply(a,arguments);return t===a?r?a.clipExtent(null):a:t},a.translate=function(){var t=s.apply(a,arguments);return t===a?r?a.clipExtent(null):a:t},a.clipExtent=function(t){var e=l.apply(a,arguments);if(e===a){if(r=null==t){var n=ma*o(),i=s();l([[i[0]-n,i[1]-n],[i[0]+n,i[1]+n]])}}else r&&(e=null);return e},a.clipExtent(null)}function sn(t,e){return[Math.log(Math.tan(ma/4+e/2)),-t]}function ln(t){return t[0]}function un(t){return t[1]}function hn(t){for(var e=t.length,n=[0,1],i=2,r=2;r<e;r++){for(;1<i&&Q(t[n[i-2]],t[n[i-1]],t[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}function cn(t,e){return t[0]-e[0]||t[1]-e[1]}function fn(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function pn(t,e,n,i){var r=t[0],a=n[0],o=e[0]-r,s=i[0]-a,l=t[1],u=n[1],h=e[1]-l,c=i[1]-u,f=(s*(l-u)-c*(r-a))/(c*o-s*h);return[r+f*o,l+f*h]}function dn(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}function gn(){In(this),this.edge=this.site=this.circle=null}function vn(t){var e=Oo.pop()||new gn;return e.site=t,e}function mn(t){_n(t),qo.remove(t),Oo.push(t),In(t)}function yn(t){var e=t.circle,n=e.x,i=e.cy,r={x:n,y:i},a=t.P,o=t.N,s=[t];mn(t);for(var l=a;l.circle&&Kr(n-l.circle.x)<ga&&Kr(i-l.circle.cy)<ga;)a=l.P,s.unshift(l),mn(l),l=a;s.unshift(l),_n(l);for(var u=o;u.circle&&Kr(n-u.circle.x)<ga&&Kr(i-u.circle.cy)<ga;)o=u.N,s.push(u),mn(u),u=o;s.push(u),_n(u);var h,c=s.length;for(h=1;h<c;++h)u=s[h],l=s[h-1],En(u.edge,l.site,u.site,r);l=s[0],(u=s[c-1]).edge=Tn(l.site,u.site,null,r),Cn(l),Cn(u)}function xn(t){for(var e,n,i,r,a=t.x,o=t.y,s=qo._;s;)if(i=bn(s,o)-a,ga<i)s=s.L;else{if(r=a-wn(s,o),!(ga<r)){-ga<i?(e=s.P,n=s):-ga<r?n=(e=s).N:e=n=s;break}if(!s.R){e=s;break}s=s.R}var l=vn(t);if(qo.insert(e,l),e||n){if(e===n)return _n(e),n=vn(e.site),qo.insert(l,n),l.edge=n.edge=Tn(e.site,l.site),Cn(e),void Cn(n);if(!n)return void(l.edge=Tn(e.site,l.site));_n(e),_n(n);var u=e.site,h=u.x,c=u.y,f=t.x-h,p=t.y-c,d=n.site,g=d.x-h,v=d.y-c,m=2*(f*v-p*g),y=f*f+p*p,x=g*g+v*v,b={x:(v*y-p*x)/m+h,y:(f*x-g*y)/m+c};En(n.edge,u,d,b),l.edge=Tn(u,t,null,b),n.edge=Tn(t,d,null,b),Cn(e),Cn(n)}}function bn(t,e){var n=t.site,i=n.x,r=n.y,a=r-e;if(!a)return i;var o=t.P;if(!o)return-1/0;var s=(n=o.site).x,l=n.y,u=l-e;if(!u)return s;var h=s-i,c=1/a-1/u,f=h/u;return c?(-f+Math.sqrt(f*f-2*c*(h*h/(-2*u)-l+u/2+r-a/2)))/c+i:(i+s)/2}function wn(t,e){var n=t.N;if(n)return bn(n,e);var i=t.site;return i.y===e?i.x:1/0}function Mn(t){this.site=t,this.edges=[]}function kn(t,e){return e.angle-t.angle}function Sn(){In(this),this.x=this.y=this.arc=this.site=this.cy=null}function Cn(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,a=n.site;if(i!==a){var o=r.x,s=r.y,l=i.x-o,u=i.y-s,h=a.x-o,c=2*(l*(v=a.y-s)-u*h);if(!(-va<=c)){var f=l*l+u*u,p=h*h+v*v,d=(v*f-u*p)/c,g=(l*p-h*f)/c,v=g+s,m=jo.pop()||new Sn;m.arc=t,m.site=r,m.x=d+o,m.y=v+Math.sqrt(d*d+g*g),m.cy=v,t.circle=m;for(var y=null,x=Ho._;x;)if(m.y<x.y||m.y===x.y&&m.x<=x.x){if(!x.L){y=x.P;break}x=x.L}else{if(!x.R){y=x;break}x=x.R}Ho.insert(y,m),y||(Wo=m)}}}}function _n(t){var e=t.circle;e&&(e.P||(Wo=e.N),Ho.remove(e),jo.push(e),In(e),t.circle=null)}function Rn(t,e){var n=t.b;if(n)return!0;var i,r,a=t.a,o=e[0][0],s=e[1][0],l=e[0][1],u=e[1][1],h=t.l,c=t.r,f=h.x,p=h.y,d=c.x,g=c.y,v=(f+d)/2,m=(p+g)/2;if(g===p){if(v<o||s<=v)return;if(d<f){if(a){if(a.y>=u)return}else a={x:v,y:l};n={x:v,y:u}}else{if(a){if(a.y<l)return}else a={x:v,y:u};n={x:v,y:l}}}else if(r=m-(i=(f-d)/(g-p))*v,i<-1||1<i)if(d<f){if(a){if(a.y>=u)return}else a={x:(l-r)/i,y:l};n={x:(u-r)/i,y:u}}else{if(a){if(a.y<l)return}else a={x:(u-r)/i,y:u};n={x:(l-r)/i,y:l}}else if(p<g){if(a){if(a.x>=s)return}else a={x:o,y:i*o+r};n={x:s,y:i*s+r}}else{if(a){if(a.x<o)return}else a={x:s,y:i*s+r};n={x:o,y:i*o+r}}return t.a=a,t.b=n,!0}function An(t,e){this.l=t,this.r=e,this.a=this.b=null}function Tn(t,e,n,i){var r=new An(t,e);return Fo.push(r),n&&En(r,t,e,n),i&&En(r,e,t,i),Do[t.i].edges.push(new Nn(r,t,e)),Do[e.i].edges.push(new Nn(r,e,t)),r}function En(t,e,n,i){t.a||t.b?t.l===n?t.b=i:t.a=i:(t.a=i,t.l=e,t.r=n)}function Nn(t,e,n){var i=t.a,r=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(r.x-i.x,i.y-r.y):Math.atan2(i.x-r.x,r.y-i.y)}function Pn(){this._=null}function In(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function zn(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function Ln(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function Fn(t){for(;t.L;)t=t.L;return t}function Dn(t,e){var n,i,r,a=t.sort(qn).pop();for(Fo=[],Do=new Array(t.length),qo=new Pn,Ho=new Pn;;)if(r=Wo,a&&(!r||a.y<r.y||a.y===r.y&&a.x<r.x))(a.x!==n||a.y!==i)&&(Do[a.i]=new Mn(a),xn(a),n=a.x,i=a.y),a=t.pop();else{if(!r)break;yn(r.arc)}e&&(function(t){for(var e,n=Fo,i=Ce(t[0][0],t[0][1],t[1][0],t[1][1]),r=n.length;r--;)(!Rn(e=n[r],t)||!i(e)||Kr(e.a.x-e.b.x)<ga&&Kr(e.a.y-e.b.y)<ga)&&(e.a=e.b=null,n.splice(r,1))}(e),function(t){for(var e,n,i,r,a,o,s,l,u,h,c=t[0][0],f=t[1][0],p=t[0][1],d=t[1][1],g=Do,v=g.length;v--;)if((a=g[v])&&a.prepare())for(l=(s=a.edges).length,o=0;o<l;)i=(h=s[o].end()).x,r=h.y,e=(u=s[++o%l].start()).x,n=u.y,(Kr(i-e)>ga||Kr(r-n)>ga)&&(s.splice(o,0,new Nn((m=a.site,y=h,x=Kr(i-c)<ga&&ga<d-r?{x:c,y:Kr(e-c)<ga?n:d}:Kr(r-d)<ga&&ga<f-i?{x:Kr(n-d)<ga?e:f,y:d}:Kr(i-f)<ga&&ga<r-p?{x:f,y:Kr(e-f)<ga?n:p}:Kr(r-p)<ga&&ga<i-c?{x:Kr(n-p)<ga?e:c,y:p}:null,b=void 0,(b=new An(m,null)).a=y,b.b=x,Fo.push(b),b),a.site,null)),++l);var m,y,x,b}(e));var o={cells:Do,edges:Fo};return qo=Ho=Fo=Do=null,o}function qn(t,e){return e.y-t.y||e.x-t.x}function Wn(t){return t.x}function Hn(t){return t.y}function On(t,e){t=Br.rgb(t),e=Br.rgb(e);var n=t.r,i=t.g,r=t.b,a=e.r-n,o=e.g-i,s=e.b-r;return function(t){return"#"+gt(Math.round(n+a*t))+gt(Math.round(i+o*t))+gt(Math.round(r+s*t))}}function jn(t,e){var n,i={},r={};for(n in t)n in e?i[n]=Vn(t[n],e[n]):r[n]=t[n];for(n in e)n in t||(r[n]=e[n]);return function(t){for(n in i)r[n]=i[n](t);return r}}function Bn(e,n){return e=+e,n=+n,function(t){return e*(1-t)+n*t}}function Un(t,i){var e,n,r,a=Uo.lastIndex=Vo.lastIndex=0,o=-1,s=[],l=[];for(t+="",i+="";(e=Uo.exec(t))&&(n=Vo.exec(i));)(r=n.index)>a&&(r=i.slice(a,r),s[o]?s[o]+=r:s[++o]=r),(e=e[0])===(n=n[0])?s[o]?s[o]+=n:s[++o]=n:(s[++o]=null,l.push({i:o,x:Bn(e,n)})),a=Vo.lastIndex;return a<i.length&&(r=i.slice(a),s[o]?s[o]+=r:s[++o]=r),s.length<2?l[0]?(i=l[0].x,function(t){return i(t)+""}):function(){return i}:(i=l.length,function(t){for(var e,n=0;n<i;++n)s[(e=l[n]).i]=e.x(t);return s.join("")})}function Vn(t,e){for(var n,i=Br.interpolators.length;0<=--i&&!(n=Br.interpolators[i](t,e)););return n}function Gn(t,e){var n,i=[],r=[],a=t.length,o=e.length,s=Math.min(t.length,e.length);for(n=0;n<s;++n)i.push(Vn(t[n],e[n]));for(;n<a;++n)r[n]=t[n];for(;n<o;++n)r[n]=e[n];return function(t){for(n=0;n<s;++n)r[n]=i[n](t);return r}}function Yn(e){return function(t){return 1-e(1-t)}}function Xn(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function $n(t){return t*t}function Qn(t){return t*t*t}function Zn(t){if(t<=0)return 0;if(1<=t)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function Jn(t){return 1-Math.cos(t*ba)}function Kn(t){return Math.pow(2,10*(t-1))}function ti(t){return 1-Math.sqrt(1-t*t)}function ei(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function ni(e,n){return n-=e,function(t){return Math.round(e+n*t)}}function ii(t){var e,n,i,r=[t.a,t.b],a=[t.c,t.d],o=ai(r),s=ri(r,a),l=ai(((e=a)[0]+=(i=-s)*(n=r)[0],e[1]+=i*n[1],e))||0;r[0]*a[1]<a[0]*r[1]&&(r[0]*=-1,r[1]*=-1,o*=-1,s*=-1),this.rotate=(o?Math.atan2(r[1],r[0]):Math.atan2(-a[0],a[1]))*Ma,this.translate=[t.e,t.f],this.scale=[o,l],this.skew=l?Math.atan2(s,l)*Ma:0}function ri(t,e){return t[0]*e[0]+t[1]*e[1]}function ai(t){var e=Math.sqrt(ri(t,t));return e&&(t[0]/=e,t[1]/=e),e}function oi(t,e){var i,r=[],a=[],n=Br.transform(t),o=Br.transform(e),s=n.translate,l=o.translate,u=n.rotate,h=o.rotate,c=n.skew,f=o.skew,p=n.scale,d=o.scale;return s[0]!=l[0]||s[1]!=l[1]?(r.push("translate(",null,",",null,")"),a.push({i:1,x:Bn(s[0],l[0])},{i:3,x:Bn(s[1],l[1])})):r.push(l[0]||l[1]?"translate("+l+")":""),u!=h?(180<u-h?h+=360:180<h-u&&(u+=360),a.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:Bn(u,h)})):h&&r.push(r.pop()+"rotate("+h+")"),c!=f?a.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:Bn(c,f)}):f&&r.push(r.pop()+"skewX("+f+")"),p[0]!=d[0]||p[1]!=d[1]?(i=r.push(r.pop()+"scale(",null,",",null,")"),a.push({i:i-4,x:Bn(p[0],d[0])},{i:i-2,x:Bn(p[1],d[1])})):(1!=d[0]||1!=d[1])&&r.push(r.pop()+"scale("+d+")"),i=a.length,function(t){for(var e,n=-1;++n<i;)r[(e=a[n]).i]=e.x(t);return r.join("")}}function si(e,n){return n=(n-=e=+e)||1/n,function(t){return(t-e)/n}}function li(e,n){return n=(n-=e=+e)||1/n,function(t){return Math.max(0,Math.min(1,(t-e)/n))}}function ui(t){for(var e=t.source,n=t.target,i=function(t,e){if(t===e)return t;for(var n=hi(t),i=hi(e),r=n.pop(),a=i.pop(),o=null;r===a;)o=r,r=n.pop(),a=i.pop();return o}(e,n),r=[e];e!==i;)e=e.parent,r.push(e);for(var a=r.length;n!==i;)r.splice(a,0,n),n=n.parent;return r}function hi(t){for(var e=[],n=t.parent;null!=n;)e.push(t),n=(t=n).parent;return e.push(t),e}function ci(t){t.fixed|=2}function fi(t){t.fixed&=-7}function pi(t){t.fixed|=4,t.px=t.x,t.py=t.y}function di(t){t.fixed&=-5}function gi(t,e){return Br.rebind(t,e,"sort","children","value"),(t.nodes=t).links=wi,t}function vi(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(r=t.children)&&(i=r.length))for(var i,r;0<=--i;)n.push(r[i])}function mi(t,e){for(var n=[t],i=[];null!=(t=n.pop());)if(i.push(t),(a=t.children)&&(r=a.length))for(var r,a,o=-1;++o<r;)n.push(a[o]);for(;null!=(t=i.pop());)e(t)}function yi(t){return t.children}function xi(t){return t.value}function bi(t,e){return e.value-t.value}function wi(t){return Br.merge(t.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function Mi(t){return t.x}function ki(t){return t.y}function Si(t,e,n){t.y0=e,t.y=n}function Ci(t){return Br.range(t.length)}function _i(t){for(var e=-1,n=t[0].length,i=[];++e<n;)i[e]=0;return i}function Ri(t){for(var e,n=1,i=0,r=t[0][1],a=t.length;n<a;++n)(e=t[n][1])>r&&(i=n,r=e);return i}function Ai(t){return t.reduce(Ti,0)}function Ti(t,e){return t+e[1]}function Ei(t,e){return Ni(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function Ni(t,e){for(var n=-1,i=+t[0],r=(t[1]-i)/e,a=[];++n<=e;)a[n]=r*n+i;return a}function Pi(t){return[Br.min(t),Br.max(t)]}function Ii(t,e){return t.value-e.value}function zi(t,e){var n=t._pack_next;(t._pack_next=e)._pack_prev=t,(e._pack_next=n)._pack_prev=e}function Li(t,e){(t._pack_next=e)._pack_prev=t}function Fi(t,e){var n=e.x-t.x,i=e.y-t.y,r=t.r+e.r;return n*n+i*i<.999*r*r}function Di(t){function e(t){h=Math.min(t.x-t.r,h),c=Math.max(t.x+t.r,c),f=Math.min(t.y-t.r,f),p=Math.max(t.y+t.r,p)}if((n=t.children)&&(u=n.length)){var n,i,r,a,o,s,l,u,h=1/0,c=-1/0,f=1/0,p=-1/0;if(n.forEach(qi),(i=n[0]).x=-i.r,i.y=0,e(i),1<u&&((r=n[1]).x=r.r,r.y=0,e(r),2<u))for(Hi(i,r,a=n[2]),e(a),zi(i,a),zi(i._pack_prev=a,r),r=i._pack_next,o=3;o<u;o++){Hi(i,r,a=n[o]);var d=0,g=1,v=1;for(s=r._pack_next;s!==r;s=s._pack_next,g++)if(Fi(s,a)){d=1;break}if(1==d)for(l=i._pack_prev;l!==s._pack_prev&&!Fi(l,a);l=l._pack_prev,v++);d?(g<v||g==v&&r.r<i.r?Li(i,r=s):Li(i=l,r),o--):(zi(i,a),e(r=a))}var m=(h+c)/2,y=(f+p)/2,x=0;for(o=0;o<u;o++)(a=n[o]).x-=m,a.y-=y,x=Math.max(x,a.r+Math.sqrt(a.x*a.x+a.y*a.y));t.r=x,n.forEach(Wi)}}function qi(t){t._pack_next=t._pack_prev=t}function Wi(t){delete t._pack_next,delete t._pack_prev}function Hi(t,e,n){var i=t.r+n.r,r=e.x-t.x,a=e.y-t.y;if(i&&(r||a)){var o=e.r+n.r,s=r*r+a*a,l=.5+((i*=i)-(o*=o))/(2*s),u=Math.sqrt(Math.max(0,2*o*(i+s)-(i-=s)*i-o*o))/(2*s);n.x=t.x+l*r+u*a,n.y=t.y+l*a-u*r}else n.x=t.x+i,n.y=t.y}function Oi(t,e){return t.parent==e.parent?1:2}function ji(t){var e=t.children;return e.length?e[0]:t.t}function Bi(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function Ui(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Vi(t,e){var n=t.x+e[3],i=t.y+e[0],r=t.dx-e[1]-e[3],a=t.dy-e[0]-e[2];return r<0&&(n+=r/2,r=0),a<0&&(i+=a/2,a=0),{x:n,y:i,dx:r,dy:a}}function Gi(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}function Yi(t){return t.rangeExtent?t.rangeExtent():Gi(t.range())}function Xi(t,e,n,i){var r=n(t[0],t[1]),a=i(e[0],e[1]);return function(t){return a(r(t))}}function $i(t,e){var n,i=0,r=t.length-1,a=t[i],o=t[r];return o<a&&(n=i,i=r,r=n,n=a,a=o,o=n),t[i]=e.floor(a),t[r]=e.ceil(o),t}function Qi(n,t,e,i){var r=[],a=[],o=0,s=Math.min(n.length,t.length)-1;for(n[s]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++o<=s;)r.push(e(n[o-1],n[o])),a.push(i(t[o-1],t[o]));return function(t){var e=Br.bisect(n,t,1,s)-1;return a[e](r[e](t))}}function Zi(t,e){return Br.rebind(t,e,"range","rangeRound","interpolate","clamp")}function Ji(t,e){return $i(t,(n=Ki(t,e)[2])?{floor:function(t){return Math.floor(t/n)*n},ceil:function(t){return Math.ceil(t/n)*n}}:ns);var n}function Ki(t,e){null==e&&(e=10);var n=Gi(t),i=n[1]-n[0],r=Math.pow(10,Math.floor(Math.log(i/e)/Math.LN10)),a=e/i*r;return a<=.15?r*=10:a<=.35?r*=5:a<=.75&&(r*=2),n[0]=Math.ceil(n[0]/r)*r,n[1]=Math.floor(n[1]/r)*r+.5*r,n[2]=r,n}function tr(t,e){return Br.range.apply(Br,Ki(t,e))}function er(t,e,n){var i,r,a,o=Ki(t,e);if(n){var s=Ba.exec(n);if(s.shift(),"s"===s[8]){var l=Br.formatPrefix(Math.max(Kr(o[0]),Kr(o[1])));return s[7]||(s[7]="."+nr(l.scale(o[2]))),s[8]="f",n=Br.format(s.join("")),function(t){return n(l.scale(t))+l.symbol}}s[7]||(s[7]="."+(i=s[8],a=nr((r=o)[2]),i in is?Math.abs(a-nr(Math.max(Kr(r[0]),Kr(r[1]))))+ +("e"!==i):a-2*("%"===i))),n=s.join("")}else n=",."+nr(o[2])+"f";return Br.format(n)}function nr(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function ir(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function rr(){return 0}function ar(t){return t.innerRadius}function or(t){return t.outerRadius}function sr(t){return t.startAngle}function lr(t){return t.endAngle}function ur(t){return t&&t.padAngle}function hr(t,e,n,i){return 0<(t-n)*e-(e-i)*t?0:1}function cr(t,e,n,i,r){var a=t[0]-e[0],o=t[1]-e[1],s=(r?i:-i)/Math.sqrt(a*a+o*o),l=s*o,u=-s*a,h=t[0]+l,c=t[1]+u,f=e[0]+l,p=e[1]+u,d=(h+f)/2,g=(c+p)/2,v=f-h,m=p-c,y=v*v+m*m,x=n-i,b=h*p-f*c,w=(m<0?-1:1)*Math.sqrt(x*x*y-b*b),M=(b*m-v*w)/y,k=(-b*v-m*w)/y,S=(b*m+v*w)/y,C=(-b*v+m*w)/y,_=M-d,R=k-g,A=S-d,T=C-g;return A*A+T*T<_*_+R*R&&(M=S,k=C),[[M-l,k-u],[M*n/x,k*n/x]]}function fr(u){function e(t){function e(){i.push("M",p(u(r),d))}for(var n,i=[],r=[],a=-1,o=t.length,s=wt(h),l=wt(c);++a<o;)f.call(this,n=t[a],a)?r.push([+s.call(this,n,a),+l.call(this,n,a)]):r.length&&(e(),r=[]);return r.length&&e(),i.length?i.join(""):null}var h=ln,c=un,f=me,p=pr,n=p.key,d=.7;return e.x=function(t){return arguments.length?(h=t,e):h},e.y=function(t){return arguments.length?(c=t,e):c},e.defined=function(t){return arguments.length?(f=t,e):f},e.interpolate=function(t){return arguments.length?(n="function"==typeof t?p=t:(p=cs.get(t)||pr).key,e):n},e.tension=function(t){return arguments.length?(d=t,e):d},e}function pr(t){return t.join("L")}function dr(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("V",(i=t[e])[1],"H",i[0]);return r.join("")}function gr(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("H",(i=t[e])[0],"V",i[1]);return r.join("")}function vr(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return pr(t);var n=t.length!=e.length,i="",r=t[0],a=t[1],o=e[0],s=o,l=1;if(n&&(i+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],r=t[1],l=2),1<e.length){s=e[1],a=t[l],l++,i+="C"+(r[0]+o[0])+","+(r[1]+o[1])+","+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var u=2;u<e.length;u++,l++)a=t[l],s=e[u],i+="S"+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}if(n){var h=t[l];i+="Q"+(a[0]+2*s[0]/3)+","+(a[1]+2*s[1]/3)+","+h[0]+","+h[1]}return i}function mr(t,e){for(var n,i=[],r=(1-e)/2,a=t[0],o=t[1],s=1,l=t.length;++s<l;)n=a,a=o,o=t[s],i.push([r*(o[0]-n[0]),r*(o[1]-n[1])]);return i}function yr(t){if(t.length<3)return pr(t);var e=1,n=t.length,i=t[0],r=i[0],a=i[1],o=[r,r,r,(i=t[1])[0]],s=[a,a,a,i[1]],l=[r,",",a,"L",xr(ds,o),",",xr(ds,s)];for(t.push(t[n-1]);++e<=n;)i=t[e],o.shift(),o.push(i[0]),s.shift(),s.push(i[1]),br(l,o,s);return t.pop(),l.push("L",i),l.join("")}function xr(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function br(t,e,n){t.push("C",xr(fs,e),",",xr(fs,n),",",xr(ps,e),",",xr(ps,n),",",xr(ds,e),",",xr(ds,n))}function wr(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Mr(t){for(var e,n,i,r,a=[],o=function(t){for(var e=0,n=t.length-1,i=[],r=t[0],a=t[1],o=i[0]=wr(r,a);++e<n;)i[e]=(o+(o=wr(r=a,a=t[e+1])))/2;return i[e]=o,i}(t),s=-1,l=t.length-1;++s<l;)e=wr(t[s],t[s+1]),Kr(e)<ga?o[s]=o[s+1]=0:9<(r=(n=o[s]/e)*n+(i=o[s+1]/e)*i)&&(r=3*e/Math.sqrt(r),o[s]=r*n,o[s+1]=r*i);for(s=-1;++s<=l;)r=(t[Math.min(l,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),a.push([r||0,o[s]*r||0]);return a}function kr(t){for(var e,n,i,r=-1,a=t.length;++r<a;)n=(e=t[r])[0],i=e[1]-ba,e[0]=n*Math.cos(i),e[1]=n*Math.sin(i);return t}function Sr(d){function e(t){function e(){a.push("M",b(d(s),k),M,w(d(o.reverse()),k),"Z")}for(var n,i,r,a=[],o=[],s=[],l=-1,u=t.length,h=wt(g),c=wt(m),f=g===v?function(){return i}:wt(v),p=m===y?function(){return r}:wt(y);++l<u;)x.call(this,n=t[l],l)?(o.push([i=+h.call(this,n,l),r=+c.call(this,n,l)]),s.push([+f.call(this,n,l),+p.call(this,n,l)])):o.length&&(e(),o=[],s=[]);return o.length&&e(),a.length?a.join(""):null}var g=ln,v=ln,m=0,y=un,x=me,b=pr,n=b.key,w=b,M="L",k=.7;return e.x=function(t){return arguments.length?(g=v=t,e):v},e.x0=function(t){return arguments.length?(g=t,e):g},e.x1=function(t){return arguments.length?(v=t,e):v},e.y=function(t){return arguments.length?(m=y=t,e):y},e.y0=function(t){return arguments.length?(m=t,e):m},e.y1=function(t){return arguments.length?(y=t,e):y},e.defined=function(t){return arguments.length?(x=t,e):x},e.interpolate=function(t){return arguments.length?(n="function"==typeof t?b=t:(b=cs.get(t)||pr).key,w=b.reverse||b,M=b.closed?"M":"L",e):n},e.tension=function(t){return arguments.length?(k=t,e):k},e}function Cr(t){return t.radius}function _r(t){return[t.x,t.y]}function Rr(){return 64}function Ar(){return"circle"}function Tr(t){var e=Math.sqrt(t/ma);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function Er(n){return function(){var t,e;(t=this[n])&&(e=t[t.active])&&(--t.count?delete t[t.active]:delete this[n],t.active+=.5,e.event&&e.event.interrupt.call(this,this.__data__,e.index))}}function Nr(t,e,n){return ra(t,ws),t.namespace=e,t.id=n,t}function Pr(t,i,r,a){var o=t.id,s=t.namespace;return O(t,"function"==typeof r?function(t,e,n){t[s][o].tween.set(i,a(r.call(t,t.__data__,e,n)))}:(r=a(r),function(t){t[s][o].tween.set(i,r)}))}function Ir(t){return null==t&&(t=""),function(){this.textContent=t}}function zr(t){return null==t?"__transition__":"__transition_"+t+"__"}function Lr(u,h,c,f,t){var p=u[c]||(u[c]={active:0,count:0}),d=p[f];if(!d){var g=t.time;d=p[f]={tween:new y,time:g,delay:t.delay,duration:t.duration,ease:t.ease,index:h},t=null,++p.count,Br.timer(function(t){function e(t){if(p.active>f)return r();var e=p[p.active];e&&(--p.count,delete p[p.active],e.event&&e.event.interrupt.call(u,u.__data__,e.index)),p.active=f,d.event&&d.event.start.call(u,u.__data__,h),d.tween.forEach(function(t,e){(e=e.call(u,u.__data__,h))&&l.push(e)}),o=d.ease,a=d.duration,Br.timer(function(){return s.c=n(t||1)?me:n,1},0,g)}function n(t){if(p.active!==f)return 1;for(var e=t/a,n=o(e),i=l.length;0<i;)l[--i].call(u,n);return 1<=e?(d.event&&d.event.end.call(u,u.__data__,h),r()):void 0}function r(){return--p.count?delete p[f]:delete u[c],1}var a,o,i=d.delay,s=Ha,l=[];return s.t=i+g,i<=t?e(t-i):void(s.c=e)},0,g)}}function Fr(t,n,i){t.attr("transform",function(t){var e=n(t);return"translate("+(isFinite(e)?e:i(t))+",0)"})}function Dr(t,n,i){t.attr("transform",function(t){var e=n(t);return"translate(0,"+(isFinite(e)?e:i(t))+")"})}function qr(t){return t.toISOString()}function Wr(e,r,t){function o(t){return e(t)}function s(t,e){var n=(t[1]-t[0])/e,i=Br.bisect(Es,n);return i==Es.length?[r.year,Ki(t.map(function(t){return t/31536e6}),e)[2]]:i?r[n/Es[i-1]<Es[i]/n?i-1:i]:[Is,Ki(t,e)[2]]}return o.invert=function(t){return Hr(e.invert(t))},o.domain=function(t){return arguments.length?(e.domain(t),o):e.domain().map(Hr)},o.nice=function(e,n){function i(t){return!isNaN(t)&&!e.range(t,Hr(+t+1),n).length}var t=o.domain(),r=Gi(t),a=null==e?s(r,10):"number"==typeof e&&s(r,e);return a&&(e=a[0],n=a[1]),o.domain($i(t,1<n?{floor:function(t){for(;i(t=e.floor(t));)t=Hr(t-1);return t},ceil:function(t){for(;i(t=e.ceil(t));)t=Hr(+t+1);return t}}:e))},o.ticks=function(t,e){var n=Gi(o.domain()),i=null==t?s(n,10):"number"==typeof t?s(n,t):!t.range&&[{range:t},e];return i&&(t=i[0],e=i[1]),t.range(n[0],Hr(+n[1]+1),e<1?1:e)},o.tickFormat=function(){return t},o.copy=function(){return Wr(e.copy(),r,t)},Zi(o,e)}function Hr(t){return new Date(t)}function Or(t){return JSON.parse(t.responseText)}function jr(t){var e=Gr.createRange();return e.selectNode(Gr.body),e.createContextualFragment(t.responseText)}var Br={version:"3.5.6"},Ur=[].slice,Vr=function(t){return Ur.call(t)},Gr=this.document;if(Gr)try{Vr(Gr.documentElement.childNodes)[0].nodeType}catch(t){Vr=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),Gr)try{Gr.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var Yr=this.Element.prototype,Xr=Yr.setAttribute,$r=Yr.setAttributeNS,Qr=this.CSSStyleDeclaration.prototype,Zr=Qr.setProperty;Yr.setAttribute=function(t,e){Xr.call(this,t,e+"")},Yr.setAttributeNS=function(t,e,n){$r.call(this,t,e,n+"")},Qr.setProperty=function(t,e,n){Zr.call(this,t,e+"",n)}}Br.ascending=o,Br.descending=function(t,e){return e<t?-1:t<e?1:t<=e?0:NaN},Br.min=function(t,e){var n,i,r=-1,a=t.length;if(1===arguments.length){for(;++r<a;)if(null!=(i=t[r])&&i<=i){n=i;break}for(;++r<a;)null!=(i=t[r])&&i<n&&(n=i)}else{for(;++r<a;)if(null!=(i=e.call(t,t[r],r))&&i<=i){n=i;break}for(;++r<a;)null!=(i=e.call(t,t[r],r))&&i<n&&(n=i)}return n},Br.max=function(t,e){var n,i,r=-1,a=t.length;if(1===arguments.length){for(;++r<a;)if(null!=(i=t[r])&&i<=i){n=i;break}for(;++r<a;)null!=(i=t[r])&&n<i&&(n=i)}else{for(;++r<a;)if(null!=(i=e.call(t,t[r],r))&&i<=i){n=i;break}for(;++r<a;)null!=(i=e.call(t,t[r],r))&&n<i&&(n=i)}return n},Br.extent=function(t,e){var n,i,r,a=-1,o=t.length;if(1===arguments.length){for(;++a<o;)if(null!=(i=t[a])&&i<=i){n=r=i;break}for(;++a<o;)null!=(i=t[a])&&(i<n&&(n=i),r<i&&(r=i))}else{for(;++a<o;)if(null!=(i=e.call(t,t[a],a))&&i<=i){n=r=i;break}for(;++a<o;)null!=(i=e.call(t,t[a],a))&&(i<n&&(n=i),r<i&&(r=i))}return[n,r]},Br.sum=function(t,e){var n,i=0,r=t.length,a=-1;if(1===arguments.length)for(;++a<r;)h(n=+t[a])&&(i+=n);else for(;++a<r;)h(n=+e.call(t,t[a],a))&&(i+=n);return i},Br.mean=function(t,e){var n,i=0,r=t.length,a=-1,o=r;if(1===arguments.length)for(;++a<r;)h(n=u(t[a]))?i+=n:--o;else for(;++a<r;)h(n=u(e.call(t,t[a],a)))?i+=n:--o;return o?i/o:void 0},Br.quantile=function(t,e){var n=(t.length-1)*e+1,i=Math.floor(n),r=+t[i-1],a=n-i;return a?r+a*(t[i]-r):r},Br.median=function(t,e){var n,i=[],r=t.length,a=-1;if(1===arguments.length)for(;++a<r;)h(n=u(t[a]))&&i.push(n);else for(;++a<r;)h(n=u(e.call(t,t[a],a)))&&i.push(n);return i.length?Br.quantile(i.sort(o),.5):void 0},Br.variance=function(t,e){var n,i,r=t.length,a=0,o=0,s=-1,l=0;if(1===arguments.length)for(;++s<r;)h(n=u(t[s]))&&(o+=(i=n-a)*(n-(a+=i/++l)));else for(;++s<r;)h(n=u(e.call(t,t[s],s)))&&(o+=(i=n-a)*(n-(a+=i/++l)));return 1<l?o/(l-1):void 0},Br.deviation=function(){var t=Br.variance.apply(this,arguments);return t?Math.sqrt(t):t};var Jr=t(o);Br.bisectLeft=Jr.left,Br.bisect=Br.bisectRight=Jr.right,Br.bisector=function(n){return t(1===n.length?function(t,e){return o(n(t),e)}:n)},Br.shuffle=function(t,e,n){(a=arguments.length)<3&&(n=t.length,a<2&&(e=0));for(var i,r,a=n-e;a;)r=Math.random()*a--|0,i=t[a+e],t[a+e]=t[r+e],t[r+e]=i;return t},Br.permute=function(t,e){for(var n=e.length,i=new Array(n);n--;)i[n]=t[e[n]];return i},Br.pairs=function(t){for(var e=0,n=t.length-1,i=t[0],r=new Array(n<0?0:n);e<n;)r[e]=[i,i=t[++e]];return r},Br.zip=function(){if(!(i=arguments.length))return[];for(var t=-1,e=Br.min(arguments,l),n=new Array(e);++t<e;)for(var i,r=-1,a=n[t]=new Array(i);++r<i;)a[r]=arguments[r][t];return n},Br.transpose=function(t){return Br.zip.apply(Br,t)},Br.keys=function(t){var e=[];for(var n in t)e.push(n);return e},Br.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},Br.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},Br.merge=function(t){for(var e,n,i,r=t.length,a=-1,o=0;++a<r;)o+=t[a].length;for(n=new Array(o);0<=--r;)for(e=(i=t[r]).length;0<=--e;)n[--o]=i[e];return n};var Kr=Math.abs;Br.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n==1/0)throw new Error("infinite range");var i,r=[],a=function(t){for(var e=1;t*e%1;)e*=10;return e}(Kr(n)),o=-1;if(t*=a,e*=a,(n*=a)<0)for(;(i=t+n*++o)>e;)r.push(i/a);else for(;(i=t+n*++o)<e;)r.push(i/a);return r},Br.map=function(t,e){var n=new y;if(t instanceof y)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var i,r=-1,a=t.length;if(1===arguments.length)for(;++r<a;)n.set(r,t[r]);else for(;++r<a;)n.set(e.call(t,i=t[r],r),i)}else for(var o in t)n.set(o,t[o]);return n};var ta="__proto__",ea="\0";e(y,{has:r,get:function(t){return this._[n(t)]},set:function(t,e){return this._[n(t)]=e},remove:a,keys:c,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:i(e),value:this._[e]});return t},size:f,empty:p,forEach:function(t){for(var e in this._)t.call(this,i(e),this._[e])}}),Br.nest=function(){function c(n,t,i){if(i>=g.length)return p?p.call(d,t):f?t.sort(f):t;for(var e,r,a,o,s=-1,l=t.length,u=g[i++],h=new y;++s<l;)(o=h.get(e=u(r=t[s])))?o.push(r):h.set(e,[r]);return n?(r=n(),a=function(t,e){r.set(t,c(n,e,i))}):(r={},a=function(t,e){r[t]=c(n,e,i)}),h.forEach(a),r}var f,p,d={},g=[],e=[];return d.map=function(t,e){return c(e,t,0)},d.entries=function(t){return function n(t,i){if(i>=g.length)return t;var r=[],a=e[i++];return t.forEach(function(t,e){r.push({key:t,values:n(e,i)})}),a?r.sort(function(t,e){return a(t.key,e.key)}):r}(c(Br.map,t,0),0)},d.key=function(t){return g.push(t),d},d.sortKeys=function(t){return e[g.length-1]=t,d},d.sortValues=function(t){return f=t,d},d.rollup=function(t){return p=t,d},d},Br.set=function(t){var e=new d;if(t)for(var n=0,i=t.length;n<i;++n)e.add(t[n]);return e},e(d,{has:r,add:function(t){return this._[n(t+="")]=!0,t},remove:a,values:c,size:f,empty:p,forEach:function(t){for(var e in this._)t.call(this,i(e))}}),Br.behavior={},Br.rebind=function(t,e){for(var n,i=1,r=arguments.length;++i<r;)t[n=arguments[i]]=g(t,e,e[n]);return t};var na=["webkit","ms","moz","Moz","o","O"];Br.dispatch=function(){for(var t=new x,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=b(t);return t},x.prototype.on=function(t,e){var n=t.indexOf("."),i="";if(0<=n&&(i=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(i):this[t].on(i,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(i,null);return this}},Br.event=null,Br.requote=function(t){return t.replace(ia,"\\$&")};var ia=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ra={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]},aa=function(t,e){return e.querySelector(t)},oa=function(t,e){return e.querySelectorAll(t)},sa=function(t,e){var n=t.matches||t[v(t,"matchesSelector")];return(sa=function(t,e){return n.call(t,e)})(t,e)};"function"==typeof Sizzle&&(aa=function(t,e){return Sizzle(t,e)[0]||null},oa=Sizzle,sa=Sizzle.matchesSelector),Br.selection=function(){return Br.select(Gr.documentElement)};var la=Br.selection.prototype=[];la.select=function(t){var e,n,i,r,a=[];t=k(t);for(var o=-1,s=this.length;++o<s;){a.push(e=[]),e.parentNode=(i=this[o]).parentNode;for(var l=-1,u=i.length;++l<u;)(r=i[l])?(e.push(n=t.call(r,r.__data__,l,o)),n&&"__data__"in r&&(n.__data__=r.__data__)):e.push(null)}return M(a)},la.selectAll=function(t){var e,n,i=[];t=S(t);for(var r=-1,a=this.length;++r<a;)for(var o=this[r],s=-1,l=o.length;++s<l;)(n=o[s])&&(i.push(e=Vr(t.call(n,n.__data__,s,r))),e.parentNode=n);return M(i)};var ua={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Br.ns={prefix:ua,qualify:function(t){var e=t.indexOf(":"),n=t;return 0<=e&&(n=t.slice(0,e),t=t.slice(e+1)),ua.hasOwnProperty(n)?{space:ua[n],local:t}:t}},la.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return(t=Br.ns.qualify(t)).local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(C(e,t[e]));return this}return this.each(C(t,e))},la.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),i=(t=A(t)).length,r=-1;if(e=n.classList){for(;++r<i;)if(!e.contains(t[r]))return!1}else for(e=n.getAttribute("class");++r<i;)if(!R(t[r]).test(e))return!1;return!0}for(e in t)this.each(T(e,t[e]));return this}return this.each(T(t,e))},la.style=function(t,e,n){var i=arguments.length;if(i<3){if("string"!=typeof t){for(n in i<2&&(e=""),t)this.each(N(n,t[n],e));return this}if(i<2){var r=this.node();return I(r).getComputedStyle(r,null).getPropertyValue(t)}n=""}return this.each(N(t,e,n))},la.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(P(e,t[e]));return this}return this.each(P(t,e))},la.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},la.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},la.append=function(t){return t=D(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},la.insert=function(t,e){return t=D(t),e=k(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},la.remove=function(){return this.each(q)},la.data=function(t,d){function e(t,e){var n,i,r,a=t.length,o=e.length,s=Math.min(a,o),l=new Array(o),u=new Array(o),h=new Array(a);if(d){var c,f=new y,p=new Array(a);for(n=-1;++n<a;)f.has(c=d.call(i=t[n],i.__data__,n))?h[n]=i:f.set(c,i),p[n]=c;for(n=-1;++n<o;)(i=f.get(c=d.call(e,r=e[n],n)))?!0!==i&&((l[n]=i).__data__=r):u[n]=W(r),f.set(c,!0);for(n=-1;++n<a;)!0!==f.get(p[n])&&(h[n]=t[n])}else{for(n=-1;++n<s;)i=t[n],r=e[n],i?(i.__data__=r,l[n]=i):u[n]=W(r);for(;n<o;++n)u[n]=W(e[n]);for(;n<a;++n)h[n]=t[n]}u.update=l,u.parentNode=l.parentNode=h.parentNode=t.parentNode,g.push(u),v.push(l),m.push(h)}var n,i,r=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(n=this[0]).length);++r<a;)(i=n[r])&&(t[r]=i.__data__);return t}var g=j([]),v=M([]),m=M([]);if("function"==typeof t)for(;++r<a;)e(n=this[r],t.call(n,n.parentNode.__data__,r));else for(;++r<a;)e(n=this[r],t);return v.enter=function(){return g},v.exit=function(){return m},v},la.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},la.filter=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=H(t));for(var a=0,o=this.length;a<o;a++){r.push(e=[]),e.parentNode=(n=this[a]).parentNode;for(var s=0,l=n.length;s<l;s++)(i=n[s])&&t.call(i,i.__data__,s,a)&&e.push(i)}return M(r)},la.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,i=this[t],r=i.length-1,a=i[r];0<=--r;)(n=i[r])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},la.sort=function(t){t=function(n){return arguments.length||(n=o),function(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}}.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},la.each=function(i){return O(this,function(t,e,n){i.call(t,t.__data__,e,n)})},la.call=function(t){var e=Vr(arguments);return t.apply(e[0]=this,e),this},la.empty=function(){return!this.node()},la.node=function(){for(var t=0,e=this.length;t<e;t++)for(var n=this[t],i=0,r=n.length;i<r;i++){var a=n[i];if(a)return a}return null},la.size=function(){var t=0;return O(this,function(){++t}),t};var ha=[];Br.selection.enter=j,(Br.selection.enter.prototype=ha).append=la.append,ha.empty=la.empty,ha.node=la.node,ha.call=la.call,ha.size=la.size,ha.select=function(t){for(var e,n,i,r,a,o=[],s=-1,l=this.length;++s<l;){i=(r=this[s]).update,o.push(e=[]),e.parentNode=r.parentNode;for(var u=-1,h=r.length;++u<h;)(a=r[u])?(e.push(i[u]=n=t.call(r.parentNode,a.__data__,u,s)),n.__data__=a.__data__):e.push(null)}return M(o)},ha.insert=function(t,e){return arguments.length<2&&(o=this,e=function(t,e,n){var i,r=o[n].update,a=r.length;for(n!=l&&(l=n,s=0),s<=e&&(s=e+1);!(i=r[s])&&++s<a;);return i}),la.insert.call(this,t,e);var o,s,l},Br.select=function(t){var e;return"string"==typeof t?(e=[aa(t,Gr)]).parentNode=Gr.documentElement:(e=[t]).parentNode=s(t),M([e])},Br.selectAll=function(t){var e;return"string"==typeof t?(e=Vr(oa(t,Gr))).parentNode=Gr.documentElement:(e=t).parentNode=null,M([e])},la.on=function(t,e,n){var i=arguments.length;if(i<3){if("string"!=typeof t){for(n in i<2&&(e=!1),t)this.each(B(n,t[n],e));return this}if(i<2)return(i=this.node()["__on"+t])&&i._;n=!1}return this.each(B(t,e,n))};var ca=Br.map({mouseenter:"mouseover",mouseleave:"mouseout"});Gr&&ca.forEach(function(t){"on"+t in Gr&&ca.remove(t)});var fa,pa=0;Br.mouse=function(t){return Y(t,w())};var da=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;Br.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=w().changedTouches),e)for(var i,r=0,a=e.length;r<a;++r)if((i=e[r]).identifier===n)return Y(t,i)},Br.behavior.drag=function(){function e(){this.on("mousedown.drag",n).on("touchstart.drag",i)}function t(h,c,f,p,d){return function(){var i,t=Br.event.target,r=this.parentNode,a=g.of(this,arguments),o=0,s=h(),e=".drag"+(null==s?"":"-"+s),n=Br.select(f(t)).on(p+e,function(){var t,e,n=c(r,s);n&&(t=n[0]-u[0],e=n[1]-u[1],o|=t|e,a({type:"drag",x:(u=n)[0]+i[0],y:n[1]+i[1],dx:t,dy:e}))}).on(d+e,function(){c(r,s)&&(n.on(p+e,null).on(d+e,null),l(o&&Br.event.target===t),a({type:"dragend"}))}),l=G(t),u=c(r,s);v?i=[(i=v.apply(this,arguments)).x-u[0],i.y-u[1]]:i=[0,0],a({type:"dragstart"})}}var g=F(e,"drag","dragstart","dragend"),v=null,n=t(m,Br.mouse,I,"mousemove","mouseup"),i=t(X,Br.touch,z,"touchmove","touchend");return e.origin=function(t){return arguments.length?(v=t,e):v},Br.rebind(e,g,"on")},Br.touches=function(n,t){return arguments.length<2&&(t=w().touches),t?Vr(t).map(function(t){var e=Y(n,t);return e.identifier=t.identifier,e}):[]};var ga=1e-6,va=ga*ga,ma=Math.PI,ya=2*ma,xa=ya-ga,ba=ma/2,wa=ma/180,Ma=180/ma,ka=Math.SQRT2;Br.interpolateZoom=function(t,e){function n(t){var e,n,i=t*m;if(v){var r=K(g),a=l/(2*f)*(r*(n=ka*i+g,((n=Math.exp(2*n))-1)/(n+1))-(e=g,((e=Math.exp(e))-1/e)/2));return[o+a*u,s+a*h,l*r/K(ka*i+g)]}return[o+t*u,s+t*h,l*Math.exp(ka*i)]}var o=t[0],s=t[1],l=t[2],i=e[0],r=e[1],a=e[2],u=i-o,h=r-s,c=u*u+h*h,f=Math.sqrt(c),p=(a*a-l*l+4*c)/(2*l*2*f),d=(a*a-l*l-4*c)/(2*a*2*f),g=Math.log(Math.sqrt(p*p+1)-p),v=Math.log(Math.sqrt(d*d+1)-d)-g,m=(v||Math.log(a/l))/ka;return n.duration=1e3*m,n},Br.behavior.zoom=function(){function r(t){t.on(T,C).on(Ca+".zoom",n).on("dblclick.zoom",i).on(N,_)}function s(t){return[(t[0]-A.x)/A.k,(t[1]-A.y)/A.k]}function b(t){A.k=Math.max(v[0],Math.min(v[1],t))}function w(t,e){var n;e=[(n=e)[0]*A.k+A.x,n[1]*A.k+A.y],A.x+=t[0]-e[0],A.y+=t[1]-e[1]}function M(t,e,n,i){t.__chart__={x:A.x,y:A.y,k:A.k},b(Math.pow(2,i)),w(u=e,n),t=Br.select(t),0<m&&(t=t.transition().duration(m)),t.call(r.event)}function e(){f&&f.domain(c.range().map(function(t){return(t-A.x)/A.k}).map(c.invert)),d&&d.domain(p.range().map(function(t){return(t-A.y)/A.k}).map(p.invert))}function l(t){y++||t({type:"zoomstart"})}function k(t){e(),t({type:"zoom",scale:A.k,translate:[A.x,A.y]})}function S(t){--y||(t({type:"zoomend"}),u=null)}function C(){var t=this,e=Br.event.target,n=P.of(t,arguments),i=0,r=Br.select(I(t)).on(x,function(){i=1,w(Br.mouse(t),a),k(n)}).on(E,function(){r.on(x,null).on(E,null),o(i&&Br.event.target===e),S(n)}),a=s(Br.mouse(t)),o=G(t);bs.call(t),l(n)}function _(){function h(){var t=Br.touches(p);return u=A.k,t.forEach(function(t){t.identifier in g&&(g[t.identifier]=s(t))}),t}function t(){var t=Br.event.target;Br.select(t).on(m,c).on(y,f),x.push(t);for(var e=Br.event.changedTouches,n=0,i=e.length;n<i;++n)g[e[n].identifier]=null;var r=h(),a=Date.now();if(1===r.length){if(a-R<500){var o=r[0];M(p,o,g[o.identifier],Math.floor(Math.log(A.k)/Math.LN2)+1),L()}R=a}else if(1<r.length){o=r[0];var s=r[1],l=o[0]-s[0],u=o[1]-s[1];v=l*l+u*u}}function c(){var t,e,n,i,r=Br.touches(p);bs.call(p);for(var a=0,o=r.length;a<o;++a,i=null)if(n=r[a],i=g[n.identifier]){if(e)break;t=n,e=i}if(i){var s=(s=n[0]-t[0])*s+(s=n[1]-t[1])*s,l=v&&Math.sqrt(s/v);t=[(t[0]+n[0])/2,(t[1]+n[1])/2],e=[(e[0]+i[0])/2,(e[1]+i[1])/2],b(l*u)}R=null,w(t,e),k(d)}function f(){if(Br.event.touches.length){for(var t=Br.event.changedTouches,e=0,n=t.length;e<n;++e)delete g[t[e].identifier];for(var i in g)return void h()}Br.selectAll(x).on(r,null),a.on(T,C).on(N,_),o(),S(d)}var u,p=this,d=P.of(p,arguments),g={},v=0,r=".zoom-"+Br.event.changedTouches[0].identifier,m="touchmove"+r,y="touchend"+r,x=[],a=Br.select(p),o=G(p);t(),l(d),a.on(T,null).on(N,t)}function n(){var t=P.of(this,arguments);h?clearTimeout(h):(bs.call(this),a=s(u=o||Br.mouse(this)),l(t)),h=setTimeout(function(){h=null,S(t)},50),L(),b(Math.pow(2,.002*Sa())*A.k),w(u,a),k(t)}function i(){var t=Br.mouse(this),e=Math.log(A.k)/Math.LN2;M(this,t,s(t),Br.event.shiftKey?Math.ceil(e)-1:Math.floor(e)+1)}var a,u,o,h,R,c,f,p,d,A={x:0,y:0,k:1},g=[960,500],v=_a,m=250,y=0,T="mousedown.zoom",x="mousemove.zoom",E="mouseup.zoom",N="touchstart.zoom",P=F(r,"zoomstart","zoom","zoomend");return Ca||(Ca="onwheel"in Gr?(Sa=function(){return-Br.event.deltaY*(Br.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Gr?(Sa=function(){return Br.event.wheelDelta},"mousewheel"):(Sa=function(){return-Br.event.detail},"MozMousePixelScroll")),r.event=function(t){t.each(function(){var s=P.of(this,arguments),e=A;ys?Br.select(this).transition().each("start.zoom",function(){A=this.__chart__||{x:0,y:0,k:1},l(s)}).tween("zoom:zoom",function(){var i=g[0],t=g[1],r=u?u[0]:i/2,a=u?u[1]:t/2,o=Br.interpolateZoom([(r-A.x)/A.k,(a-A.y)/A.k,i/A.k],[(r-e.x)/e.k,(a-e.y)/e.k,i/e.k]);return function(t){var e=o(t),n=i/e[2];this.__chart__=A={x:r-e[0]*n,y:a-e[1]*n,k:n},k(s)}}).each("interrupt.zoom",function(){S(s)}).each("end.zoom",function(){S(s)}):(this.__chart__=A,l(s),k(s),S(s))})},r.translate=function(t){return arguments.length?(A={x:+t[0],y:+t[1],k:A.k},e(),r):[A.x,A.y]},r.scale=function(t){return arguments.length?(A={x:A.x,y:A.y,k:+t},e(),r):A.k},r.scaleExtent=function(t){return arguments.length?(v=null==t?_a:[+t[0],+t[1]],r):v},r.center=function(t){return arguments.length?(o=t&&[+t[0],+t[1]],r):o},r.size=function(t){return arguments.length?(g=t&&[+t[0],+t[1]],r):g},r.duration=function(t){return arguments.length?(m=+t,r):m},r.x=function(t){return arguments.length?(c=(f=t).copy(),A={x:0,y:0,k:1},r):f},r.y=function(t){return arguments.length?(p=(d=t).copy(),A={x:0,y:0,k:1},r):d},Br.rebind(r,P,"on")};var Sa,Ca,_a=[0,1/0];(Br.color=et).prototype.toString=function(){return this.rgb()+""};var Ra=(Br.hsl=nt).prototype=new et;Ra.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new nt(this.h,this.s,this.l/t)},Ra.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new nt(this.h,this.s,t*this.l)},Ra.rgb=function(){return it(this.h,this.s,this.l)};var Aa=(Br.hcl=rt).prototype=new et;Aa.brighter=function(t){return new rt(this.h,this.c,Math.min(100,this.l+Ta*(arguments.length?t:1)))},Aa.darker=function(t){return new rt(this.h,this.c,Math.max(0,this.l-Ta*(arguments.length?t:1)))},Aa.rgb=function(){return at(this.h,this.c,this.l).rgb()},Br.lab=ot;var Ta=18,Ea=.95047,Na=1,Pa=1.08883,Ia=ot.prototype=new et;Ia.brighter=function(t){return new ot(Math.min(100,this.l+Ta*(arguments.length?t:1)),this.a,this.b)},Ia.darker=function(t){return new ot(Math.max(0,this.l-Ta*(arguments.length?t:1)),this.a,this.b)},Ia.rgb=function(){return st(this.l,this.a,this.b)};var za=(Br.rgb=ft).prototype=new et;za.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,i=this.b;return e||n||i?(e&&e<30&&(e=30),n&&n<30&&(n=30),i&&i<30&&(i=30),new ft(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,i/t))):new ft(30,30,30)},za.darker=function(t){return new ft((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},za.hsl=function(){return mt(this.r,this.g,this.b)},za.toString=function(){return"#"+gt(this.r)+gt(this.g)+gt(this.b)};var La=Br.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});La.forEach(function(t,e){La.set(t,pt(e))}),Br.functor=wt,Br.xhr=Mt(z),Br.dsv=function(r,a){function o(t,e,n){arguments.length<3&&(n=e,e=null);var i=kt(t,a,null==e?s:l(e),n);return i.row=function(t){return arguments.length?i.response(null==(e=t)?s:l(t)):e},i}function s(t){return o.parse(t.responseText)}function l(e){return function(t){return o.parse(t.responseText,e)}}function e(t){return t.map(u).join(r)}function u(t){return n.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var n=new RegExp('["'+r+"\n]"),f=r.charCodeAt(0);return o.parse=function(t,i){var r;return o.parseRows(t,function(t,e){if(r)return r(t,e-1);var n=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");r=i?function(t,e){return i(n(t),e)}:n})},o.parseRows=function(r,t){function e(){if(l<=u)return s;if(a)return a=!1,o;var t=u;if(34===r.charCodeAt(t)){for(var e=t;e++<l;)if(34===r.charCodeAt(e)){if(34!==r.charCodeAt(e+1))break;++e}return u=e+2,13===(n=r.charCodeAt(e+1))?(a=!0,10===r.charCodeAt(e+2)&&++u):10===n&&(a=!0),r.slice(t+1,e).replace(/""/g,'"')}for(;u<l;){var n,i=1;if(10===(n=r.charCodeAt(u++)))a=!0;else if(13===n)a=!0,10===r.charCodeAt(u)&&(++u,++i);else if(n!==f)continue;return r.slice(t,u-i)}return r.slice(t)}for(var n,a,o={},s={},i=[],l=r.length,u=0,h=0;(n=e())!==s;){for(var c=[];n!==o&&n!==s;)c.push(n),n=e();t&&null==(c=t(c,h++))||i.push(c)}return i},o.format=function(t){if(Array.isArray(t[0]))return o.formatRows(t);var n=new d,i=[];return t.forEach(function(t){for(var e in t)n.has(e)||i.push(n.add(e))}),[i.map(u).join(r)].concat(t.map(function(e){return i.map(function(t){return u(e[t])}).join(r)})).join("\n")},o.formatRows=function(t){return t.map(e).join("\n")},o},Br.csv=Br.dsv(",","text/csv"),Br.tsv=Br.dsv("\t","text/tab-separated-values");var Fa,Da,qa,Wa,Ha,Oa=this[v(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};Br.timer=function(t,e,n){var i=arguments.length;i<2&&(e=0),i<3&&(n=Date.now());var r={c:t,t:n+e,f:!1,n:null};Da?Da.n=r:Fa=r,Da=r,qa||(Wa=clearTimeout(Wa),qa=1,Oa(St))},Br.timer.flush=function(){Ct(),_t()},Br.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var ja=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(function(t,e){var n=Math.pow(10,3*Kr(8-e));return{scale:8<e?function(t){return t/n}:function(t){return t*n},symbol:t}});Br.formatPrefix=function(t,e){var n=0;return t&&(t<0&&(t*=-1),e&&(t=Br.round(t,Rt(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),ja[8+n/3]};var Ba=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Ua=Br.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=Br.round(t,Rt(t,e))).toFixed(Math.max(0,Math.min(20,Rt(t*(1+1e-15),e))))}}),Va=Br.time={},Ga=Date;Tt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Ya.setUTCDate.apply(this._,arguments)},setDay:function(){Ya.setUTCDay.apply(this._,arguments)},setFullYear:function(){Ya.setUTCFullYear.apply(this._,arguments)},setHours:function(){Ya.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Ya.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Ya.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Ya.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Ya.setUTCSeconds.apply(this._,arguments)},setTime:function(){Ya.setTime.apply(this._,arguments)}};var Ya=Date.prototype;Va.year=Et(function(t){return(t=Va.day(t)).setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),Va.years=Va.year.range,Va.years.utc=Va.year.utc.range,Va.day=Et(function(t){var e=new Ga(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),Va.days=Va.day.range,Va.days.utc=Va.day.utc.range,Va.dayOfYear=function(t){var e=Va.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,n){n=7-n;var e=Va[t]=Et(function(t){return(t=Va.day(t)).setDate(t.getDate()-(t.getDay()+n)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var e=Va.year(t).getDay();return Math.floor((Va.dayOfYear(t)+(e+n)%7)/7)-(e!==n)});Va[t+"s"]=e.range,Va[t+"s"].utc=e.utc.range,Va[t+"OfYear"]=function(t){var e=Va.year(t).getDay();return Math.floor((Va.dayOfYear(t)+(e+n)%7)/7)}}),Va.week=Va.sunday,Va.weeks=Va.sunday.range,Va.weeks.utc=Va.sunday.utc.range,Va.weekOfYear=Va.sundayOfYear;var Xa={"-":"",_:" ",0:"0"},$a=/^\s*\d+/,Qa=/^%/;Br.locale=function(t){return{numberFormat:(e=t,S=e.decimal,s=e.thousands,l=e.grouping,i=e.currency,C=l&&s?function(t,e){for(var n=t.length,i=[],r=0,a=l[0],o=0;0<n&&0<a&&(e<o+a+1&&(a=Math.max(1,e-o)),i.push(t.substring(n-=a,n+a)),!((o+=a+1)>e));)a=l[r=(r+1)%l.length];return i.reverse().join(s)}:z,function(t){var e=Ba.exec(t),h=e[1]||" ",c=e[2]||">",f=e[3]||"-",n=e[4]||"",p=e[5],d=+e[6],g=e[7],v=e[8],m=e[9],y=1,x="",b="",w=!1,M=!0;switch(v&&(v=+v.substring(1)),(p||"0"===h&&"="===c)&&(p=h="0",c="="),m){case"n":g=!0,m="g";break;case"%":y=100,b="%",m="f";break;case"p":y=100,b="%",m="r";break;case"b":case"o":case"x":case"X":"#"===n&&(x="0"+m.toLowerCase());case"c":M=!1;case"d":w=!0,v=0;break;case"s":y=-1,m="r"}"$"===n&&(x=i[0],b=i[1]),"r"!=m||v||(m="g"),null!=v&&("g"==m?v=Math.max(1,Math.min(21,v)):("e"==m||"f"==m)&&(v=Math.max(0,Math.min(20,v)))),m=Ua.get(m)||At;var k=p&&g;return function(t){var e=b;if(w&&t%1)return"";var n=t<0||0===t&&1/t<0?(t=-t,"-"):"-"===f?"":f;if(y<0){var i=Br.formatPrefix(t,v);t=i.scale(t),e=i.symbol+b}else t*=y;var r,a,o=(t=m(t,v)).lastIndexOf(".");if(o<0){var s=M?t.lastIndexOf("e"):-1;s<0?(r=t,a=""):(r=t.substring(0,s),a=t.substring(s))}else r=t.substring(0,o),a=S+t.substring(o+1);!p&&g&&(r=C(r,1/0));var l=x.length+r.length+a.length+(k?0:n.length),u=l<d?new Array(l=d-l+1).join(h):"";return k&&(r=C(u+r,u.length?d-a.length:1/0)),n+=x,t=r+a,("<"===c?n+t+u:">"===c?u+n+t:"^"===c?u.substring(0,l>>=1)+n+t+u.substring(l):n+(k?t:u+t))+e}}),timeFormat:function(t){function i(s){function t(t){for(var e,n,i,r=[],a=-1,o=0;++a<l;)37===s.charCodeAt(a)&&(r.push(s.slice(o,a)),null!=(n=Xa[e=s.charAt(++a)])&&(e=s.charAt(++a)),(i=b[e])&&(e=i(t,null==n?"e"===e?" ":"0":n)),r.push(e),o=a+1);return r.push(s.slice(o,a)),r.join("")}var l=s.length;return t.parse=function(t){var e={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(r(e,s,t,0)!=t.length)return null;"p"in e&&(e.H=e.H%12+12*e.p);var n=null!=e.Z&&Ga!==Tt,i=new(n?Tt:Ga);return"j"in e?i.setFullYear(e.y,0,e.j):"w"in e&&("W"in e||"U"in e)?(i.setFullYear(e.y,0,1),i.setFullYear(e.y,0,"W"in e?(e.w+6)%7+7*e.W-(i.getDay()+5)%7:e.w+7*e.U-(i.getDay()+6)%7)):i.setFullYear(e.y,e.m,e.d),i.setHours(e.H+(e.Z/100|0),e.M+e.Z%100,e.S,e.L),n?i._:i},t.toString=function(){return s},t}function r(t,e,n,i){for(var r,a,o,s=0,l=e.length,u=n.length;s<l;){if(u<=i)return-1;if(37===(r=e.charCodeAt(s++))){if(o=e.charAt(s++),!(a=w[o in Xa?e.charAt(s++):o])||(i=a(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}var e=t.dateTime,n=t.date,a=t.time,o=t.periods,s=t.days,l=t.shortDays,u=t.months,h=t.shortMonths;i.multi=(i.utc=function(t){function e(t){try{var e=new(Ga=Tt);return e._=t,n(e)}finally{Ga=Date}}var n=i(t);return e.parse=function(t){try{Ga=Tt;var e=n.parse(t);return e&&e._}finally{Ga=Date}},e.toString=n.toString,e}).multi=Qt;var c=Br.map(),f=It(s),p=zt(s),d=It(l),g=zt(l),v=It(u),m=zt(u),y=It(h),x=zt(h);o.forEach(function(t,e){c.set(t.toLowerCase(),e)});var b={a:function(t){return l[t.getDay()]},A:function(t){return s[t.getDay()]},b:function(t){return h[t.getMonth()]},B:function(t){return u[t.getMonth()]},c:i(e),d:function(t,e){return Pt(t.getDate(),e,2)},e:function(t,e){return Pt(t.getDate(),e,2)},H:function(t,e){return Pt(t.getHours(),e,2)},I:function(t,e){return Pt(t.getHours()%12||12,e,2)},j:function(t,e){return Pt(1+Va.dayOfYear(t),e,3)},L:function(t,e){return Pt(t.getMilliseconds(),e,3)},m:function(t,e){return Pt(t.getMonth()+1,e,2)},M:function(t,e){return Pt(t.getMinutes(),e,2)},p:function(t){return o[+(12<=t.getHours())]},S:function(t,e){return Pt(t.getSeconds(),e,2)},U:function(t,e){return Pt(Va.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Pt(Va.mondayOfYear(t),e,2)},x:i(n),X:i(a),y:function(t,e){return Pt(t.getFullYear()%100,e,2)},Y:function(t,e){return Pt(t.getFullYear()%1e4,e,4)},Z:Xt,"%":function(){return"%"}},w={a:function(t,e,n){d.lastIndex=0;var i=d.exec(e.slice(n));return i?(t.w=g.get(i[0].toLowerCase()),n+i[0].length):-1},A:function(t,e,n){f.lastIndex=0;var i=f.exec(e.slice(n));return i?(t.w=p.get(i[0].toLowerCase()),n+i[0].length):-1},b:function(t,e,n){y.lastIndex=0;var i=y.exec(e.slice(n));return i?(t.m=x.get(i[0].toLowerCase()),n+i[0].length):-1},B:function(t,e,n){v.lastIndex=0;var i=v.exec(e.slice(n));return i?(t.m=m.get(i[0].toLowerCase()),n+i[0].length):-1},c:function(t,e,n){return r(t,b.c.toString(),e,n)},d:jt,e:jt,H:Ut,I:Ut,j:Bt,L:Yt,m:Ot,M:Vt,p:function(t,e,n){var i=c.get(e.slice(n,n+=2).toLowerCase());return null==i?-1:(t.p=i,n)},S:Gt,U:Ft,w:Lt,W:Dt,x:function(t,e,n){return r(t,b.x.toString(),e,n)},X:function(t,e,n){return r(t,b.X.toString(),e,n)},y:Wt,Y:qt,Z:Ht,"%":$t};return i}(t)};var e,S,s,l,i,C};var Za=Br.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Br.format=Za.numberFormat,Br.geo={},Zt.prototype={s:0,t:0,add:function(t){Jt(t,this.t,Ja),Jt(Ja.s,this.s,this),this.s?this.t+=Ja.t:this.s=Ja.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Ja=new Zt;Br.geo.stream=function(t,e){t&&Ka.hasOwnProperty(t.type)?Ka[t.type](t,e):Kt(t,e)};var Ka={Feature:function(t,e){Kt(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)Kt(n[i].geometry,e)}},to={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){te(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)te(n[i],e,0)},Polygon:function(t,e){ee(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)ee(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)Kt(n[i],e)}};Br.geo.area=function(t){return eo=0,Br.geo.stream(t,io),eo};var eo,no=new Zt,io={sphere:function(){eo+=4*ma},point:m,lineStart:m,lineEnd:m,polygonStart:function(){no.reset(),io.lineStart=ne},polygonEnd:function(){var t=2*no;eo+=t<0?4*ma+t:t,io.lineStart=io.lineEnd=io.point=m}};Br.geo.bounds=function(){function h(t,e){x.push(b=[f=t,d=t]),e<p&&(p=e),g<e&&(g=e)}function i(t,e){var n=ie([t*wa,e*wa]);if(m){var i=ae(m,n),r=ae([i[1],-i[0],0],i);le(r),r=ue(r);var a=t-v,o=0<a?1:-1,s=r[0]*Ma*o,l=180<Kr(a);if(l^(o*v<s&&s<o*t)){var u=r[1]*Ma;g<u&&(g=u)}else if(l^(o*v<(s=(s+360)%360-180)&&s<o*t)){(u=-r[1]*Ma)<p&&(p=u)}else e<p&&(p=e),g<e&&(g=e);l?t<v?c(f,t)>c(f,d)&&(d=t):c(t,d)>c(f,d)&&(f=t):f<=d?(t<f&&(f=t),d<t&&(d=t)):v<t?c(f,t)>c(f,d)&&(d=t):c(t,d)>c(f,d)&&(f=t)}else h(t,e);m=n,v=t}function t(){w.point=i}function e(){b[0]=f,b[1]=d,w.point=h,m=null}function n(t,e){if(m){var n=t-v;y+=180<Kr(n)?n+(0<n?360:-360):n}else o=t,s=e;io.point(t,e),i(t,e)}function r(){io.lineStart()}function a(){n(o,s),io.lineEnd(),Kr(y)>ga&&(f=-(d=180)),b[0]=f,b[1]=d,m=null}function c(t,e){return(e-=t)<0?e+360:e}function l(t,e){return t[0]-e[0]}function u(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var f,p,d,g,v,o,s,m,y,x,b,w={point:h,lineStart:t,lineEnd:e,polygonStart:function(){w.point=n,w.lineStart=r,w.lineEnd=a,y=0,io.polygonStart()},polygonEnd:function(){io.polygonEnd(),w.point=h,w.lineStart=t,w.lineEnd=e,no<0?(f=-(d=180),p=-(g=90)):ga<y?g=90:y<-ga&&(p=-90),b[0]=f,b[1]=d}};return function(t){if(g=d=-(f=p=1/0),x=[],Br.geo.stream(t,w),a=x.length){x.sort(l);for(var e=1,n=[s=x[0]];e<a;++e)u((r=x[e])[0],s)||u(r[1],s)?(c(s[0],r[1])>c(s[0],s[1])&&(s[1]=r[1]),c(r[0],s[1])>c(s[0],s[1])&&(s[0]=r[0])):n.push(s=r);for(var i,r,a,o=-1/0,s=(e=0,n[a=n.length-1]);e<=a;s=r,++e)r=n[e],(i=c(s[1],r[0]))>o&&(o=i,f=r[0],d=s[1])}return x=b=null,1/0===f||1/0===p?[[NaN,NaN],[NaN,NaN]]:[[f,p],[d,g]]}}(),Br.geo.centroid=function(t){ro=ao=oo=so=lo=uo=ho=co=fo=po=go=0,Br.geo.stream(t,vo);var e=fo,n=po,i=go,r=e*e+n*n+i*i;return r<va&&(e=uo,n=ho,i=co,ao<ga&&(e=oo,n=so,i=lo),(r=e*e+n*n+i*i)<va)?[NaN,NaN]:[Math.atan2(n,e)*Ma,J(i/Math.sqrt(r))*Ma]};var ro,ao,oo,so,lo,uo,ho,co,fo,po,go,vo={sphere:m,point:ce,lineStart:pe,lineEnd:de,polygonStart:function(){vo.lineStart=ge},polygonEnd:function(){vo.lineStart=pe}},mo=we(me,function(c){var f,p=NaN,d=NaN,g=NaN;return{lineStart:function(){c.lineStart(),f=1},point:function(t,e){var n,i,r,a,o,s,l,u=0<t?ma:-ma,h=Kr(t-p);Kr(h-ma)<ga?(c.point(p,d=0<(d+e)/2?ba:-ba),c.point(g,d),c.lineEnd(),c.lineStart(),c.point(u,d),c.point(t,d),f=0):g!==u&&ma<=h&&(Kr(p-g)<ga&&(p-=g*ga),Kr(t-u)<ga&&(t-=u*ga),n=p,i=d,r=t,a=e,l=Math.sin(n-r),d=Kr(l)>ga?Math.atan((Math.sin(i)*(s=Math.cos(a))*Math.sin(r)-Math.sin(a)*(o=Math.cos(i))*Math.sin(n))/(o*s*l)):(i+a)/2,c.point(g,d),c.lineEnd(),c.lineStart(),c.point(u,d),f=0),c.point(p=t,d=e),g=u},lineEnd:function(){c.lineEnd(),p=d=NaN},clean:function(){return 2-f}}},function(t,e,n,i){var r;if(null==t)r=n*ba,i.point(-ma,r),i.point(0,r),i.point(ma,r),i.point(ma,0),i.point(ma,-r),i.point(0,-r),i.point(-ma,-r),i.point(-ma,0),i.point(-ma,r);else if(Kr(t[0]-e[0])>ga){var a=t[0]<e[0]?ma:-ma;r=n*a/2,i.point(-a,r),i.point(0,r),i.point(a,r)}else i.point(e[0],e[1])},[-ma,-ma/2]),yo=1e9;Br.geo.clipExtent=function(){var e,n,i,r,a,o,s={stream:function(t){return a&&(a.valid=!1),(a=o(t)).valid=!0,a},extent:function(t){return arguments.length?(o=_e(e=+t[0][0],n=+t[0][1],i=+t[1][0],r=+t[1][1]),a&&(a.valid=!1,a=null),s):[[e,n],[i,r]]}};return s.extent([[0,0],[960,500]])},(Br.geo.conicEqualArea=function(){return Re(Ae)}).raw=Ae,Br.geo.albers=function(){return Br.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},Br.geo.albersUsa=function(){function r(t){var e=t[0],n=t[1];return i=null,a(e,n),i||(o(e,n),i)||s(e,n),i}var i,a,o,s,l=Br.geo.albers(),u=Br.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),h=Br.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){i=[t,e]}};return r.invert=function(t){var e=l.scale(),n=l.translate(),i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return(.12<=r&&r<.234&&-.425<=i&&i<-.214?u:.166<=r&&r<.234&&-.214<=i&&i<-.115?h:l).invert(t)},r.stream=function(t){var n=l.stream(t),i=u.stream(t),r=h.stream(t);return{point:function(t,e){n.point(t,e),i.point(t,e),r.point(t,e)},sphere:function(){n.sphere(),i.sphere(),r.sphere()},lineStart:function(){n.lineStart(),i.lineStart(),r.lineStart()},lineEnd:function(){n.lineEnd(),i.lineEnd(),r.lineEnd()},polygonStart:function(){n.polygonStart(),i.polygonStart(),r.polygonStart()},polygonEnd:function(){n.polygonEnd(),i.polygonEnd(),r.polygonEnd()}}},r.precision=function(t){return arguments.length?(l.precision(t),u.precision(t),h.precision(t),r):l.precision()},r.scale=function(t){return arguments.length?(l.scale(t),u.scale(.35*t),h.scale(t),r.translate(l.translate())):l.scale()},r.translate=function(t){if(!arguments.length)return l.translate();var e=l.scale(),n=+t[0],i=+t[1];return a=l.translate(t).clipExtent([[n-.455*e,i-.238*e],[n+.455*e,i+.238*e]]).stream(c).point,o=u.translate([n-.307*e,i+.201*e]).clipExtent([[n-.425*e+ga,i+.12*e+ga],[n-.214*e-ga,i+.234*e-ga]]).stream(c).point,s=h.translate([n-.205*e,i+.212*e]).clipExtent([[n-.214*e+ga,i+.166*e+ga],[n-.115*e-ga,i+.234*e-ga]]).stream(c).point,r},r.scale(1070)};var xo,bo,wo,Mo,ko,So,Co={point:m,lineStart:m,lineEnd:m,polygonStart:function(){bo=0,Co.lineStart=Te},polygonEnd:function(){Co.lineStart=Co.lineEnd=Co.point=m,xo+=Kr(bo/2)}},_o={point:function(t,e){t<wo&&(wo=t),ko<t&&(ko=t),e<Mo&&(Mo=e),So<e&&(So=e)},lineStart:m,lineEnd:m,polygonStart:m,polygonEnd:m},Ro={point:Pe,lineStart:Ie,lineEnd:ze,polygonStart:function(){Ro.lineStart=Le},polygonEnd:function(){Ro.point=Pe,Ro.lineStart=Ie,Ro.lineEnd=ze}};Br.geo.path=function(){function e(t){return t&&("function"==typeof l&&o.pointRadius(+l.apply(this,arguments)),s&&s.valid||(s=a(o)),Br.geo.stream(t,s)),o.result()}function i(){return s=null,e}var r,n,a,o,s,l=4.5;return e.area=function(t){return xo=0,Br.geo.stream(t,a(Co)),xo},e.centroid=function(t){return oo=so=lo=uo=ho=co=fo=po=go=0,Br.geo.stream(t,a(Ro)),go?[fo/go,po/go]:co?[uo/co,ho/co]:lo?[oo/lo,so/lo]:[NaN,NaN]},e.bounds=function(t){return ko=So=-(wo=Mo=1/0),Br.geo.stream(t,a(_o)),[[wo,Mo],[ko,So]]},e.projection=function(t){return arguments.length?(a=(r=t)?t.stream||(n=t,e=De(function(t,e){return n([t*Ma,e*Ma])}),function(t){return je(e(t))}):z,i()):r;var n,e},e.context=function(t){return arguments.length?(o=null==(n=t)?new Ee:new Fe(t),"function"!=typeof l&&o.pointRadius(l),i()):n},e.pointRadius=function(t){return arguments.length?(l="function"==typeof t?t:(o.pointRadius(+t),+t),e):l},e.projection(Br.geo.albersUsa()).context(null)},Br.geo.transform=function(i){return{stream:function(t){var e=new qe(t);for(var n in i)e[n]=i[n];return e}}},qe.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},Br.geo.projection=He,Br.geo.projectionMutator=Oe,(Br.geo.equirectangular=function(){return He(Be)}).raw=Be.invert=Be,Br.geo.rotation=function(e){function t(t){return(t=e(t[0]*wa,t[1]*wa))[0]*=Ma,t[1]*=Ma,t}return e=Ve(e[0]%360*wa,e[1]*wa,2<e.length?e[2]*wa:0),t.invert=function(t){return(t=e.invert(t[0]*wa,t[1]*wa))[0]*=Ma,t[1]*=Ma,t},t},Ue.invert=Be,Br.geo.circle=function(){function e(){var t="function"==typeof a?a.apply(this,arguments):a,n=Ve(-t[0]*wa,-t[1]*wa,0).invert,i=[];return r(null,null,1,{point:function(t,e){i.push(t=n(t,e)),t[0]*=Ma,t[1]*=Ma}}),{type:"Polygon",coordinates:[i]}}var n,r,a=[0,0],i=6;return e.origin=function(t){return arguments.length?(a=t,e):a},e.angle=function(t){return arguments.length?(r=$e((n=+t)*wa,i*wa),e):n},e.precision=function(t){return arguments.length?(r=$e(n*wa,(i=+t)*wa),e):i},e.angle(90)},Br.geo.distance=function(t,e){var n,i=(e[0]-t[0])*wa,r=t[1]*wa,a=e[1]*wa,o=Math.sin(i),s=Math.cos(i),l=Math.sin(r),u=Math.cos(r),h=Math.sin(a),c=Math.cos(a);return Math.atan2(Math.sqrt((n=c*o)*n+(n=u*h-l*c*s)*n),l*h+u*c*s)},Br.geo.graticule=function(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return Br.range(Math.ceil(a/v)*v,r,v).map(f).concat(Br.range(Math.ceil(u/m)*m,l,m).map(p)).concat(Br.range(Math.ceil(i/d)*d,n,d).filter(function(t){return Kr(t%v)>ga}).map(h)).concat(Br.range(Math.ceil(s/g)*g,o,g).filter(function(t){return Kr(t%m)>ga}).map(c))}var n,i,r,a,o,s,l,u,h,c,f,p,d=10,g=d,v=90,m=360,y=2.5;return e.lines=function(){return t().map(function(t){return{type:"LineString",coordinates:t}})},e.outline=function(){return{type:"Polygon",coordinates:[f(a).concat(p(l).slice(1),f(r).reverse().slice(1),p(u).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.majorExtent(t).minorExtent(t):e.minorExtent()},e.majorExtent=function(t){return arguments.length?(a=+t[0][0],r=+t[1][0],u=+t[0][1],l=+t[1][1],r<a&&(t=a,a=r,r=t),l<u&&(t=u,u=l,l=t),e.precision(y)):[[a,u],[r,l]]},e.minorExtent=function(t){return arguments.length?(i=+t[0][0],n=+t[1][0],s=+t[0][1],o=+t[1][1],n<i&&(t=i,i=n,n=t),o<s&&(t=s,s=o,o=t),e.precision(y)):[[i,s],[n,o]]},e.step=function(t){return arguments.length?e.majorStep(t).minorStep(t):e.minorStep()},e.majorStep=function(t){return arguments.length?(v=+t[0],m=+t[1],e):[v,m]},e.minorStep=function(t){return arguments.length?(d=+t[0],g=+t[1],e):[d,g]},e.precision=function(t){return arguments.length?(y=+t,h=Ze(s,o,90),c=Je(i,n,y),f=Ze(u,l,90),p=Je(a,r,y),e):y},e.majorExtent([[-180,-90+ga],[180,90-ga]]).minorExtent([[-180,-80-ga],[180,80+ga]])},Br.geo.greatArc=function(){function e(){return{type:"LineString",coordinates:[n||r.apply(this,arguments),i||a.apply(this,arguments)]}}var n,i,r=Ke,a=tn;return e.distance=function(){return Br.geo.distance(n||r.apply(this,arguments),i||a.apply(this,arguments))},e.source=function(t){return arguments.length?(n="function"==typeof(r=t)?null:t,e):r},e.target=function(t){return arguments.length?(i="function"==typeof(a=t)?null:t,e):a},e.precision=function(){return arguments.length?e:0},e},Br.geo.interpolate=function(t,e){return n=t[0]*wa,i=t[1]*wa,r=e[0]*wa,a=e[1]*wa,o=Math.cos(i),s=Math.sin(i),l=Math.cos(a),u=Math.sin(a),h=o*Math.cos(n),c=o*Math.sin(n),f=l*Math.cos(r),p=l*Math.sin(r),d=2*Math.asin(Math.sqrt(tt(a-i)+o*l*tt(r-n))),g=1/Math.sin(d),(v=d?function(t){var e=Math.sin(t*=d)*g,n=Math.sin(d-t)*g,i=n*h+e*f,r=n*c+e*p,a=n*s+e*u;return[Math.atan2(r,i)*Ma,Math.atan2(a,Math.sqrt(i*i+r*r))*Ma]}:function(){return[n*Ma,i*Ma]}).distance=d,v;var n,i,r,a,o,s,l,u,h,c,f,p,d,g,v},Br.geo.length=function(t){return Ao=0,Br.geo.stream(t,To),Ao};var Ao,To={sphere:m,point:m,lineStart:function(){function n(t,e){var n=Math.sin(e*=wa),i=Math.cos(e),r=Kr((t*=wa)-o),a=Math.cos(r);Ao+=Math.atan2(Math.sqrt((r=i*Math.sin(r))*r+(r=l*n-s*i*a)*r),s*n+l*i*a),o=t,s=n,l=i}var o,s,l;To.point=function(t,e){o=t*wa,s=Math.sin(e*=wa),l=Math.cos(e),To.point=n},To.lineEnd=function(){To.point=To.lineEnd=m}},lineEnd:m,polygonStart:m,polygonEnd:m},Eo=en(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(Br.geo.azimuthalEqualArea=function(){return He(Eo)}).raw=Eo;var No=en(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},z);(Br.geo.azimuthalEquidistant=function(){return He(No)}).raw=No,(Br.geo.conicConformal=function(){return Re(nn)}).raw=nn,(Br.geo.conicEquidistant=function(){return Re(rn)}).raw=rn;var Po=en(function(t){return 1/t},Math.atan);(Br.geo.gnomonic=function(){return He(Po)}).raw=Po,an.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-ba]},(Br.geo.mercator=function(){return on(an)}).raw=an;var Io=en(function(){return 1},Math.asin);(Br.geo.orthographic=function(){return He(Io)}).raw=Io;var zo=en(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(Br.geo.stereographic=function(){return He(zo)}).raw=zo,sn.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-ba]},(Br.geo.transverseMercator=function(){var t=on(sn),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return t?n([t[0],t[1],2<t.length?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90])}).raw=sn,Br.geom={},Br.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,n=wt(f),i=wt(p),r=t.length,a=[],o=[];for(e=0;e<r;e++)a.push([+n.call(this,t[e],e),+i.call(this,t[e],e),e]);for(a.sort(cn),e=0;e<r;e++)o.push([a[e][0],-a[e][1]]);var s=hn(a),l=hn(o),u=l[0]===s[0],h=l[l.length-1]===s[s.length-1],c=[];for(e=s.length-1;0<=e;--e)c.push(t[a[s[e]][2]]);for(e=+u;e<l.length-h;++e)c.push(t[a[l[e]][2]]);return c}var f=ln,p=un;return arguments.length?e(t):(e.x=function(t){return arguments.length?(f=t,e):f},e.y=function(t){return arguments.length?(p=t,e):p},e)},Br.geom.polygon=function(t){return ra(t,Lo),t};var Lo=Br.geom.polygon.prototype=[];Lo.area=function(){for(var t,e=-1,n=this.length,i=this[n-1],r=0;++e<n;)t=i,i=this[e],r+=t[1]*i[0]-t[0]*i[1];return.5*r},Lo.centroid=function(t){var e,n,i=-1,r=this.length,a=0,o=0,s=this[r-1];for(arguments.length||(t=-1/(6*this.area()));++i<r;)e=s,s=this[i],n=e[0]*s[1]-s[0]*e[1],a+=(e[0]+s[0])*n,o+=(e[1]+s[1])*n;return[a*t,o*t]},Lo.clip=function(t){for(var e,n,i,r,a,o,s=dn(t),l=-1,u=this.length-dn(this),h=this[u-1];++l<u;){for(e=t.slice(),t.length=0,r=this[l],a=e[(i=e.length-s)-1],n=-1;++n<i;)fn(o=e[n],h,r)?(fn(a,h,r)||t.push(pn(a,o,h,r)),t.push(o)):fn(a,h,r)&&t.push(pn(a,o,h,r)),a=o;s&&t.push(t[0]),h=r}return t};var Fo,Do,qo,Wo,Ho,Oo=[],jo=[];Mn.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)(t=e[n].edge).b&&t.a||e.splice(n,1);return e.sort(kn),e.length},Nn.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Pn.prototype={insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Fn(this._),e.P=null,(e.N=t).P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(i=n.U).L?(r=i.R)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(zn(this,n),n=(t=n).U),n.C=!1,i.C=!0,Ln(this,i)):(r=i.L)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(Ln(this,n),n=(t=n).U),n.C=!1,i.C=!0,zn(this,i)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,a=t.L,o=t.R;if(n=a?o?Fn(o):a:o,r?r.L===t?r.L=n:r.R=n:this._=n,a&&o?(i=n.C,n.C=t.C,((n.L=a).U=n)!==o?(r=n.U,n.U=t.U,t=n.R,r.L=t,(n.R=o).U=n):(n.U=r,t=(r=n).R)):(i=t.C,t=n),t&&(t.U=r),!i){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===r.L){if((e=r.R).C&&(e.C=!1,r.C=!0,zn(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Ln(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,zn(this,r),t=this._;break}}else if((e=r.L).C&&(e.C=!1,r.C=!0,Ln(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,zn(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,Ln(this,r),t=this._;break}e.C=!0,r=(t=r).U}while(!t.C);t&&(t.C=!1)}}},Br.geom.voronoi=function(t){function e(r){var a=new Array(r.length),o=h[0][0],s=h[0][1],l=h[1][0],u=h[1][1];return Dn(n(r),h).cells.forEach(function(t,e){var n=t.edges,i=t.site;(a[e]=n.length?n.map(function(t){var e=t.start();return[e.x,e.y]}):i.x>=o&&i.x<=l&&i.y>=s&&i.y<=u?[[o,u],[l,u],[l,s],[o,s]]:[]).point=r[e]}),a}function n(t){return t.map(function(t,e){return{x:Math.round(a(t,e)/ga)*ga,y:Math.round(o(t,e)/ga)*ga,i:e}})}var i=ln,r=un,a=i,o=r,h=Bo;return t?e(t):(e.links=function(e){return Dn(n(e)).edges.filter(function(t){return t.l&&t.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},e.triangles=function(f){var p=[];return Dn(n(f)).cells.forEach(function(t,e){for(var n,i=t.site,r=t.edges.sort(kn),a=-1,o=r.length,s=r[o-1].edge,l=s.l===i?s.r:s.l;++a<o;)s,n=l,l=(s=r[a].edge).l===i?s.r:s.l,e<n.i&&e<l.i&&(h=n,c=l,((u=i).x-c.x)*(h.y-u.y)-(u.x-h.x)*(c.y-u.y)<0)&&p.push([f[e],f[n.i],f[l.i]]);var u,h,c}),p},e.x=function(t){return arguments.length?(a=wt(i=t),e):i},e.y=function(t){return arguments.length?(o=wt(r=t),e):r},e.clipExtent=function(t){return arguments.length?(h=null==t?Bo:t,e):h===Bo?null:h},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):h===Bo?null:h&&h[1]},e)};var Bo=[[-1e6,-1e6],[1e6,1e6]];Br.geom.delaunay=function(t){return Br.geom.voronoi().triangles(t)},Br.geom.quadtree=function(t,y,x,b,w){function e(t){function p(t,e,n,i,r,a,o,s){if(!isNaN(n)&&!isNaN(i))if(t.leaf){var l=t.x,u=t.y;if(null!=l)if(Kr(l-n)+Kr(u-i)<.01)c(t,e,n,i,r,a,o,s);else{var h=t.point;t.x=t.y=t.point=null,c(t,h,l,u,r,a,o,s),c(t,e,n,i,r,a,o,s)}else t.x=n,t.y=i,t.point=e}else c(t,e,n,i,r,a,o,s)}function c(t,e,n,i,r,a,o,s){var l=.5*(r+o),u=.5*(a+s),h=l<=n,c=u<=i,f=c<<1|h;t.leaf=!1,h?r=l:o=l,c?a=u:s=u,p(t=t.nodes[f]||(t.nodes[f]={leaf:!0,nodes:[],point:null,x:null,y:null}),e,n,i,r,a,o,s)}var e,n,i,r,a,o,s,l,u,h=wt(k),f=wt(C);if(null!=y)o=y,s=x,l=b,u=w;else if(l=u=-(o=s=1/0),n=[],i=[],a=t.length,M)for(r=0;r<a;++r)(e=t[r]).x<o&&(o=e.x),e.y<s&&(s=e.y),e.x>l&&(l=e.x),e.y>u&&(u=e.y),n.push(e.x),i.push(e.y);else for(r=0;r<a;++r){var d=+h(e=t[r],r),g=+f(e,r);d<o&&(o=d),g<s&&(s=g),l<d&&(l=d),u<g&&(u=g),n.push(d),i.push(g)}var v=l-o,m=u-s;m<v?u=s+v:l=o+m;var S={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){p(S,t,+h(t,++r),+f(t,r),o,s,l,u)}};if(S.visit=function(t){!function t(e,n,i,r,a,o){if(!e(n,i,r,a,o)){var s=.5*(i+a),l=.5*(r+o),u=n.nodes;u[0]&&t(e,u[0],i,r,s,l),u[1]&&t(e,u[1],s,r,a,l),u[2]&&t(e,u[2],i,l,s,o),u[3]&&t(e,u[3],s,l,a,o)}}(t,S,o,s,l,u)},S.find=function(t){return e=S,v=t[0],m=t[1],k=1/0,function t(e,n,i,r,a){if(!(b<n||w<i||r<y||a<x)){if(o=e.point){var o,s=v-e.x,l=m-e.y,u=s*s+l*l;if(u<k){var h=Math.sqrt(k=u);y=v-h,x=m-h,b=v+h,w=m+h,M=o}}for(var c=e.nodes,f=.5*(n+r),p=.5*(i+a),d=(p<=m)<<1|f<=v,g=d+4;d<g;++d)if(e=c[3&d])switch(3&d){case 0:t(e,n,i,f,p);break;case 1:t(e,f,i,r,p);break;case 2:t(e,n,p,f,a);break;case 3:t(e,f,p,r,a)}}}(e,y=o,x=s,b=l,w=u),M;var e,v,m,y,x,b,w,M,k},r=-1,null==y){for(;++r<a;)p(S,t[r],n[r],i[r],o,s,l,u);--r}else t.forEach(S.add);return n=i=t=e=null,S}var M,k=ln,C=un;return(M=arguments.length)?(k=Wn,C=Hn,3===M&&(w=x,b=y,x=y=0),e(t)):(e.x=function(t){return arguments.length?(k=t,e):k},e.y=function(t){return arguments.length?(C=t,e):C},e.extent=function(t){return arguments.length?(null==t?y=x=b=w=null:(y=+t[0][0],x=+t[0][1],b=+t[1][0],w=+t[1][1]),e):null==y?null:[[y,x],[b,w]]},e.size=function(t){return arguments.length?(null==t?y=x=b=w=null:(y=x=0,b=+t[0],w=+t[1]),e):null==y?null:[b-y,w-x]},e)},Br.interpolateRgb=On,Br.interpolateObject=jn,Br.interpolateNumber=Bn,Br.interpolateString=Un;var Uo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Vo=new RegExp(Uo.source,"g");Br.interpolate=Vn,Br.interpolators=[function(t,e){var n=typeof e;return("string"===n?La.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?On:Un:e instanceof et?On:Array.isArray(e)?Gn:"object"===n&&isNaN(e)?jn:Bn)(t,e)}],Br.interpolateArray=Gn;var Go=function(){return z},Yo=Br.map({linear:Go,poly:function(e){return function(t){return Math.pow(t,e)}},quad:function(){return $n},cubic:function(){return Qn},sin:function(){return Jn},exp:function(){return Kn},circle:function(){return ti},elastic:function(e,n){var i;return arguments.length<2&&(n=.45),arguments.length?i=n/ya*Math.asin(1/e):(e=1,i=n/4),function(t){return 1+e*Math.pow(2,-10*t)*Math.sin((t-i)*ya/n)}},back:function(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}},bounce:function(){return ei}}),Xo=Br.map({in:z,out:Yn,"in-out":Xn,"out-in":function(t){return Xn(Yn(t))}});Br.ease=function(t){var e,n=t.indexOf("-"),i=0<=n?t.slice(0,n):t,r=0<=n?t.slice(n+1):"in";return i=Yo.get(i)||Go,r=Xo.get(r)||z,e=r(i.apply(null,Ur.call(arguments,1))),function(t){return t<=0?0:1<=t?1:e(t)}},Br.interpolateHcl=function(t,e){t=Br.hcl(t),e=Br.hcl(e);var n=t.h,i=t.c,r=t.l,a=e.h-n,o=e.c-i,s=e.l-r;return isNaN(o)&&(o=0,i=isNaN(i)?e.c:i),isNaN(a)?(a=0,n=isNaN(n)?e.h:n):180<a?a-=360:a<-180&&(a+=360),function(t){return at(n+a*t,i+o*t,r+s*t)+""}},Br.interpolateHsl=function(t,e){t=Br.hsl(t),e=Br.hsl(e);var n=t.h,i=t.s,r=t.l,a=e.h-n,o=e.s-i,s=e.l-r;return isNaN(o)&&(o=0,i=isNaN(i)?e.s:i),isNaN(a)?(a=0,n=isNaN(n)?e.h:n):180<a?a-=360:a<-180&&(a+=360),function(t){return it(n+a*t,i+o*t,r+s*t)+""}},Br.interpolateLab=function(t,e){t=Br.lab(t),e=Br.lab(e);var n=t.l,i=t.a,r=t.b,a=e.l-n,o=e.a-i,s=e.b-r;return function(t){return st(n+a*t,i+o*t,r+s*t)+""}},Br.interpolateRound=ni,Br.transform=function(t){var n=Gr.createElementNS(Br.ns.prefix.svg,"g");return(Br.transform=function(t){if(null!=t){n.setAttribute("transform",t);var e=n.transform.baseVal.consolidate()}return new ii(e?e.matrix:$o)})(t)},ii.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var $o={a:1,b:0,c:0,d:1,e:0,f:0};Br.interpolateTransform=oi,Br.layout={},Br.layout.bundle=function(){return function(t){for(var e=[],n=-1,i=t.length;++n<i;)e.push(ui(t[n]));return e}},Br.layout.chord=function(){function t(){var t,e,n,i,r,a={},o=[],s=Br.range(b),l=[];for(m=[],y=[],t=0,i=-1;++i<b;){for(e=0,r=-1;++r<b;)e+=x[i][r];o.push(e),l.push(Br.range(b)),t+=e}for(w&&s.sort(function(t,e){return w(o[t],o[e])}),M&&l.forEach(function(t,n){t.sort(function(t,e){return M(x[n][t],x[n][e])})}),t=(ya-S*b)/t,e=0,i=-1;++i<b;){for(n=e,r=-1;++r<b;){var u=s[i],h=l[u][r],c=x[u][h],f=e,p=e+=c*t;a[u+"-"+h]={index:u,subindex:h,startAngle:f,endAngle:p,value:c}}y[u]={index:u,startAngle:n,endAngle:e,value:(e-n)/t},e+=S}for(i=-1;++i<b;)for(r=i-1;++r<b;){var d=a[i+"-"+r],g=a[r+"-"+i];(d.value||g.value)&&m.push(d.value<g.value?{source:g,target:d}:{source:d,target:g})}k&&v()}function v(){m.sort(function(t,e){return k((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var m,y,x,b,w,M,k,e={},S=0;return e.matrix=function(t){return arguments.length?(b=(x=t)&&x.length,m=y=null,e):x},e.padding=function(t){return arguments.length?(S=t,m=y=null,e):S},e.sortGroups=function(t){return arguments.length?(w=t,m=y=null,e):w},e.sortSubgroups=function(t){return arguments.length?(M=t,m=null,e):M},e.sortChords=function(t){return arguments.length?(k=t,m&&v(),e):k},e.chords=function(){return m||t(),m},e.groups=function(){return y||t(),y},e},Br.layout.force=function(){function c(u){return function(t,e,n,i){if(t.point!==u){var r=t.cx-u.x,a=t.cy-u.y,o=i-e,s=r*r+a*a;if(o*o/w<s){if(s<h){var l=t.charge/s;u.px-=r*l,u.py-=a*l}return!0}if(t.point&&s&&s<h){l=t.pointCharge/s;u.px-=r*l,u.py-=a*l}}return!t.charge}}function t(t){t.px=Br.event.x,t.py=Br.event.y,r.resume()}var e,f,p,d,g,r={},v=Br.dispatch("start","tick","end"),m=[1,1],y=.9,a=Qo,o=Zo,x=-30,h=Jo,b=.1,w=.64,M=[],k=[];return r.tick=function(){if((f*=.99)<.005)return v.end({type:"end",alpha:f=0}),!0;var t,e,n,i,r,a,o,s,l,u=M.length,h=k.length;for(e=0;e<h;++e)i=(n=k[e]).source,(a=(s=(r=n.target).x-i.x)*s+(l=r.y-i.y)*l)&&(s*=a=f*d[e]*((a=Math.sqrt(a))-p[e])/a,l*=a,r.x-=s*(o=i.weight/(r.weight+i.weight)),r.y-=l*o,i.x+=s*(o=1-o),i.y+=l*o);if((o=f*b)&&(s=m[0]/2,l=m[1]/2,e=-1,o))for(;++e<u;)(n=M[e]).x+=(s-n.x)*o,n.y+=(l-n.y)*o;if(x)for(function t(e,n,i){var r=0,a=0;if(e.charge=0,!e.leaf)for(var o,s=e.nodes,l=s.length,u=-1;++u<l;)null!=(o=s[u])&&(t(o,n,i),e.charge+=o.charge,r+=o.charge*o.cx,a+=o.charge*o.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var h=n*i[e.point.index];e.charge+=e.pointCharge=h,r+=h*e.point.x,a+=h*e.point.y}e.cx=r/e.charge,e.cy=a/e.charge}(t=Br.geom.quadtree(M),f,g),e=-1;++e<u;)(n=M[e]).fixed||t.visit(c(n));for(e=-1;++e<u;)(n=M[e]).fixed?(n.x=n.px,n.y=n.py):(n.x-=(n.px-(n.px=n.x))*y,n.y-=(n.py-(n.py=n.y))*y);v.tick({type:"tick",alpha:f})},r.nodes=function(t){return arguments.length?(M=t,r):M},r.links=function(t){return arguments.length?(k=t,r):k},r.size=function(t){return arguments.length?(m=t,r):m},r.linkDistance=function(t){return arguments.length?(a="function"==typeof t?t:+t,r):a},r.distance=r.linkDistance,r.linkStrength=function(t){return arguments.length?(o="function"==typeof t?t:+t,r):o},r.friction=function(t){return arguments.length?(y=+t,r):y},r.charge=function(t){return arguments.length?(x="function"==typeof t?t:+t,r):x},r.chargeDistance=function(t){return arguments.length?(h=t*t,r):Math.sqrt(h)},r.gravity=function(t){return arguments.length?(b=+t,r):b},r.theta=function(t){return arguments.length?(w=t*t,r):Math.sqrt(w)},r.alpha=function(t){return arguments.length?(t=+t,f?f=0<t?t:0:0<t&&(v.start({type:"start",alpha:f=t}),Br.timer(r.tick)),r):f},r.start=function(){function t(t,e){if(!l){for(l=new Array(u),a=0;a<u;++a)l[a]=[];for(a=0;a<h;++a){var n=k[a];l[n.source.index].push(n.target),l[n.target.index].push(n.source)}}for(var i,r=l[s],a=-1,o=r.length;++a<o;)if(!isNaN(i=r[a][t]))return i;return Math.random()*e}var s,l,e,u=M.length,h=k.length,n=m[0],i=m[1];for(s=0;s<u;++s)(e=M[s]).index=s,e.weight=0;for(s=0;s<h;++s)"number"==typeof(e=k[s]).source&&(e.source=M[e.source]),"number"==typeof e.target&&(e.target=M[e.target]),++e.source.weight,++e.target.weight;for(s=0;s<u;++s)e=M[s],isNaN(e.x)&&(e.x=t("x",n)),isNaN(e.y)&&(e.y=t("y",i)),isNaN(e.px)&&(e.px=e.x),isNaN(e.py)&&(e.py=e.y);if(p=[],"function"==typeof a)for(s=0;s<h;++s)p[s]=+a.call(this,k[s],s);else for(s=0;s<h;++s)p[s]=a;if(d=[],"function"==typeof o)for(s=0;s<h;++s)d[s]=+o.call(this,k[s],s);else for(s=0;s<h;++s)d[s]=o;if(g=[],"function"==typeof x)for(s=0;s<u;++s)g[s]=+x.call(this,M[s],s);else for(s=0;s<u;++s)g[s]=x;return r.resume()},r.resume=function(){return r.alpha(.1)},r.stop=function(){return r.alpha(0)},r.drag=function(){return e||(e=Br.behavior.drag().origin(z).on("dragstart.force",ci).on("drag.force",t).on("dragend.force",fi)),arguments.length?void this.on("mouseover.force",pi).on("mouseout.force",di).call(e):e},Br.rebind(r,v,"on")};var Qo=20,Zo=1,Jo=1/0;Br.layout.hierarchy=function(){function s(t){var e,n=[t],i=[];for(t.depth=0;null!=(e=n.pop());)if(i.push(e),(a=u.call(s,e,e.depth))&&(r=a.length)){for(var r,a,o;0<=--r;)n.push(o=a[r]),o.parent=e,o.depth=e.depth+1;h&&(e.value=0),e.children=a}else h&&(e.value=+h.call(s,e,e.depth)||0),delete e.children;return mi(t,function(t){var e,n;l&&(e=t.children)&&e.sort(l),h&&(n=t.parent)&&(n.value+=t.value)}),i}var l=bi,u=yi,h=xi;return s.sort=function(t){return arguments.length?(l=t,s):l},s.children=function(t){return arguments.length?(u=t,s):u},s.value=function(t){return arguments.length?(h=t,s):h},s.revalue=function(t){return h&&(vi(t,function(t){t.children&&(t.value=0)}),mi(t,function(t){var e;t.children||(t.value=+h.call(s,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},s},Br.layout.partition=function(){function e(t,e){var n=i.call(this,t,e);return function t(e,n,i,r){var a=e.children;if(e.x=n,e.y=e.depth*r,e.dx=i,e.dy=r,a&&(o=a.length)){var o,s,l,u=-1;for(i=e.value?i/e.value:0;++u<o;)t(s=a[u],n,l=s.value*i,r),n+=l}}(n[0],0,r[0],r[1]/function t(e){var n=e.children,i=0;if(n&&(r=n.length))for(var r,a=-1;++a<r;)i=Math.max(i,t(n[a]));return 1+i}(n[0])),n}var i=Br.layout.hierarchy(),r=[1,1];return e.size=function(t){return arguments.length?(r=t,e):r},gi(e,i)},Br.layout.pie=function(){function c(n){var e,t=n.length,i=n.map(function(t,e){return+f.call(c,t,e)}),r=+("function"==typeof d?d.apply(this,arguments):d),a=("function"==typeof g?g.apply(this,arguments):g)-r,o=Math.min(Math.abs(a)/t,+("function"==typeof v?v.apply(this,arguments):v)),s=o*(a<0?-1:1),l=(a-t*s)/Br.sum(i),u=Br.range(t),h=[];return null!=p&&u.sort(p===Ko?function(t,e){return i[e]-i[t]}:function(t,e){return p(n[t],n[e])}),u.forEach(function(t){h[t]={data:n[t],value:e=i[t],startAngle:r,endAngle:r+=e*l+s,padAngle:o}}),h}var f=Number,p=Ko,d=0,g=ya,v=0;return c.value=function(t){return arguments.length?(f=t,c):f},c.sort=function(t){return arguments.length?(p=t,c):p},c.startAngle=function(t){return arguments.length?(d=t,c):d},c.endAngle=function(t){return arguments.length?(g=t,c):g},c.padAngle=function(t){return arguments.length?(v=t,c):v},c};var Ko={};Br.layout.stack=function(){function c(t,e){if(!(a=t.length))return t;var n=t.map(function(t,e){return f.call(c,t,e)}),i=n.map(function(t){return t.map(function(t,e){return[v.call(c,t,e),m.call(c,t,e)]})}),r=p.call(c,i,e);n=Br.permute(n,r),i=Br.permute(i,r);var a,o,s,l,u=d.call(c,i,e),h=n[0].length;for(s=0;s<h;++s)for(g.call(c,n[0][s],l=u[s],i[0][s][1]),o=1;o<a;++o)g.call(c,n[o][s],l+=i[o-1][s][1],i[o][s][1]);return t}var f=z,p=Ci,d=_i,g=Si,v=Mi,m=ki;return c.values=function(t){return arguments.length?(f=t,c):f},c.order=function(t){return arguments.length?(p="function"==typeof t?t:ts.get(t)||Ci,c):p},c.offset=function(t){return arguments.length?(d="function"==typeof t?t:es.get(t)||_i,c):d},c.x=function(t){return arguments.length?(v=t,c):v},c.y=function(t){return arguments.length?(m=t,c):m},c.out=function(t){return arguments.length?(g=t,c):g},c};var ts=Br.map({"inside-out":function(t){var e,n,i=t.length,r=t.map(Ri),a=t.map(Ai),o=Br.range(i).sort(function(t,e){return r[t]-r[e]}),s=0,l=0,u=[],h=[];for(e=0;e<i;++e)n=o[e],s<l?(s+=a[n],u.push(n)):(l+=a[n],h.push(n));return h.reverse().concat(u)},reverse:function(t){return Br.range(t.length).reverse()},default:Ci}),es=Br.map({silhouette:function(t){var e,n,i,r=t.length,a=t[0].length,o=[],s=0,l=[];for(n=0;n<a;++n){for(i=e=0;e<r;e++)i+=t[e][n][1];s<i&&(s=i),o.push(i)}for(n=0;n<a;++n)l[n]=(s-o[n])/2;return l},wiggle:function(t){var e,n,i,r,a,o,s,l,u,h=t.length,c=t[0],f=c.length,p=[];for(p[0]=l=u=0,n=1;n<f;++n){for(r=e=0;e<h;++e)r+=t[e][n][1];for(a=e=0,s=c[n][0]-c[n-1][0];e<h;++e){for(i=0,o=(t[e][n][1]-t[e][n-1][1])/(2*s);i<e;++i)o+=(t[i][n][1]-t[i][n-1][1])/s;a+=o*t[e][n][1]}p[n]=l-=r?a/r*s:0,l<u&&(u=l)}for(n=0;n<f;++n)p[n]-=u;return p},expand:function(t){var e,n,i,r=t.length,a=t[0].length,o=1/r,s=[];for(n=0;n<a;++n){for(i=e=0;e<r;e++)i+=t[e][n][1];if(i)for(e=0;e<r;e++)t[e][n][1]/=i;else for(e=0;e<r;e++)t[e][n][1]=o}for(n=0;n<a;++n)s[n]=0;return s},zero:_i});Br.layout.histogram=function(){function n(t,e){for(var n,i,r=[],a=t.map(f,this),o=p.call(this,a,e),s=d.call(this,o,a,e),l=(e=-1,a.length),u=s.length-1,h=c?1:1/l;++e<u;)(n=r[e]=[]).dx=s[e+1]-(n.x=s[e]),n.y=0;if(0<u)for(e=-1;++e<l;)(i=a[e])>=o[0]&&i<=o[1]&&((n=r[Br.bisect(s,i,1,u)-1]).y+=h,n.push(t[e]));return r}var c=!0,f=Number,p=Pi,d=Ei;return n.value=function(t){return arguments.length?(f=t,n):f},n.range=function(t){return arguments.length?(p=wt(t),n):p},n.bins=function(e){return arguments.length?(d="number"==typeof e?function(t){return Ni(t,e)}:wt(e),n):d},n.frequency=function(t){return arguments.length?(c=!!t,n):c},n},Br.layout.pack=function(){function e(t,e){var n=u.call(this,t,e),i=n[0],r=c[0],a=c[1],o=null==l?Math.sqrt:"function"==typeof l?l:function(){return l};if(i.x=i.y=0,mi(i,function(t){t.r=+o(t.value)}),mi(i,Di),h){var s=h*(l?1:Math.max(2*i.r/r,2*i.r/a))/2;mi(i,function(t){t.r+=s}),mi(i,Di),mi(i,function(t){t.r-=s})}return function t(e,n,i,r){var a=e.children;if(e.x=n+=r*e.x,e.y=i+=r*e.y,e.r*=r,a)for(var o=-1,s=a.length;++o<s;)t(a[o],n,i,r)}(i,r/2,a/2,l?1:1/Math.max(2*i.r/r,2*i.r/a)),n}var l,u=Br.layout.hierarchy().sort(Ii),h=0,c=[1,1];return e.size=function(t){return arguments.length?(c=t,e):c},e.radius=function(t){return arguments.length?(l=null==t||"function"==typeof t?t:+t,e):l},e.padding=function(t){return arguments.length?(h=+t,e):h},gi(e,u)},Br.layout.tree=function(){function e(t,e){var n=d.call(this,t,e),i=n[0],r=function(t){for(var e,n={A:null,children:[t]},i=[n];null!=(e=i.pop());)for(var r,a=e.children,o=0,s=a.length;o<s;++o)i.push((a[o]=r={_:a[o],parent:e,children:(r=a[o].children)&&r.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=r);return n.children[0]}(i);if(mi(r,c),r.parent.m=-r.z,vi(r,f),v)vi(i,p);else{var a=i,o=i,s=i;vi(i,function(t){t.x<a.x&&(a=t),t.x>o.x&&(o=t),t.depth>s.depth&&(s=t)});var l=x(a,o)/2-a.x,u=g[0]/(o.x+x(o,a)/2+l),h=g[1]/(s.depth||1);vi(i,function(t){t.x=(t.x+l)*u,t.y=t.depth*h})}return n}function c(t){var e=t.children,n=t.parent.children,i=t.i?n[t.i-1]:null;if(e.length){!function(t){for(var e,n=0,i=0,r=t.children,a=r.length;0<=--a;)(e=r[a]).z+=n,e.m+=n,n+=e.s+(i+=e.c)}(t);var r=(e[0].z+e[e.length-1].z)/2;i?(t.z=i.z+x(t._,i._),t.m=t.z-r):t.z=r}else i&&(t.z=i.z+x(t._,i._));t.parent.A=function(t,e,n){if(e){for(var i,r=t,a=t,o=e,s=r.parent.children[0],l=r.m,u=a.m,h=o.m,c=s.m;o=Bi(o),r=ji(r),o&&r;)s=ji(s),(a=Bi(a)).a=t,0<(i=o.z+h-r.z-l+x(o._,r._))&&(m=t,y=n,f=(v=o).a.parent===m.parent?v.a:y,void 0,g=(d=i)/((p=t).i-f.i),p.c-=g,p.s+=d,f.c+=g,p.z+=d,p.m+=d,l+=i,u+=i),h+=o.m,l+=r.m,c+=s.m,u+=a.m;o&&!Bi(a)&&(a.t=o,a.m+=h-u),r&&!ji(s)&&(s.t=r,s.m+=l-c,n=t)}var f,p,d,g;var v,m,y;return n}(t,i,t.parent.A||n[0])}function f(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function p(t){t.x*=g[0],t.y=t.depth*g[1]}var d=Br.layout.hierarchy().sort(null).value(null),x=Oi,g=[1,1],v=null;return e.separation=function(t){return arguments.length?(x=t,e):x},e.size=function(t){return arguments.length?(v=null==(g=t)?p:null,e):v?null:g},e.nodeSize=function(t){return arguments.length?(v=null==(g=t)?null:p,e):v?g:null},gi(e,d)},Br.layout.cluster=function(){function e(t,e){var r,n=h.call(this,t,e),i=n[0],a=0;mi(i,function(t){var e,n,i=t.children;i&&i.length?(t.x=(n=i).reduce(function(t,e){return t+e.x},0)/n.length,t.y=(e=i,1+Br.max(e,function(t){return t.y}))):(t.x=r?a+=c(t,r):0,t.y=0,r=t)});var o=function t(e){var n=e.children;return n&&n.length?t(n[0]):e}(i),s=function t(e){var n,i=e.children;return i&&(n=i.length)?t(i[n-1]):e}(i),l=o.x-c(o,s)/2,u=s.x+c(s,o)/2;return mi(i,p?function(t){t.x=(t.x-i.x)*f[0],t.y=(i.y-t.y)*f[1]}:function(t){t.x=(t.x-l)/(u-l)*f[0],t.y=(1-(i.y?t.y/i.y:1))*f[1]}),n}var h=Br.layout.hierarchy().sort(null).value(null),c=Oi,f=[1,1],p=!1;return e.separation=function(t){return arguments.length?(c=t,e):c},e.size=function(t){return arguments.length?(p=null==(f=t),e):p?null:f},e.nodeSize=function(t){return arguments.length?(p=null!=(f=t),e):p?f:null},gi(e,h)},Br.layout.treemap=function(){function h(t,e){for(var n,i,r=-1,a=t.length;++r<a;)i=(n=t[r]).value*(e<0?0:e),n.area=isNaN(i)||i<=0?0:i}function c(t){var e=t.children;if(e&&e.length){var n,i,r,a=g(t),o=[],s=e.slice(),l=1/0,u="slice"===v?a.dx:"dice"===v?a.dy:"slice-dice"===v?1&t.depth?a.dy:a.dx:Math.min(a.dx,a.dy);for(h(s,a.dx*a.dy/t.value),o.area=0;0<(r=s.length);)o.push(n=s[r-1]),o.area+=n.area,"squarify"!==v||(i=f(o,u))<=l?(s.pop(),l=i):(o.area-=o.pop().area,p(o,u,a,!1),u=Math.min(a.dx,a.dy),o.length=o.area=0,l=1/0);o.length&&(p(o,u,a,!0),o.length=o.area=0),e.forEach(c)}}function o(t){var e=t.children;if(e&&e.length){var n,i=g(t),r=e.slice(),a=[];for(h(r,i.dx*i.dy/t.value),a.area=0;n=r.pop();)a.push(n),a.area+=n.area,null!=n.z&&(p(a,n.z?i.dx:i.dy,i,!r.length),a.length=a.area=0);e.forEach(o)}}function f(t,e){for(var n,i=t.area,r=0,a=1/0,o=-1,s=t.length;++o<s;)(n=t[o].area)&&(n<a&&(a=n),r<n&&(r=n));return e*=e,(i*=i)?Math.max(e*r*m/i,i/(e*a*m)):1/0}function p(t,e,n,i){var r,a=-1,o=t.length,s=n.x,l=n.y,u=e?d(t.area/e):0;if(e==n.dx){for((i||u>n.dy)&&(u=n.dy);++a<o;)(r=t[a]).x=s,r.y=l,r.dy=u,s+=r.dx=Math.min(n.x+n.dx-s,u?d(r.area/u):0);r.z=!0,r.dx+=n.x+n.dx-s,n.y+=u,n.dy-=u}else{for((i||u>n.dx)&&(u=n.dx);++a<o;)(r=t[a]).x=s,r.y=l,r.dx=u,l+=r.dy=Math.min(n.y+n.dy-l,u?d(r.area/u):0);r.z=!1,r.dy+=n.y+n.dy-l,n.x+=u,n.dx-=u}}function i(t){var e=r||a(t),n=e[0];return n.x=0,n.y=0,n.dx=s[0],n.dy=s[1],r&&a.revalue(n),h([n],n.dx*n.dy/n.value),(r?o:c)(n),u&&(r=e),e}var r,a=Br.layout.hierarchy(),d=Math.round,s=[1,1],l=null,g=Ui,u=!1,v="squarify",m=.5*(1+Math.sqrt(5));return i.size=function(t){return arguments.length?(s=t,i):s},i.padding=function(n){function t(t){return Vi(t,n)}return arguments.length?(g=null==(l=n)?Ui:"function"==(e=typeof n)?function(t){var e=n.call(i,t,t.depth);return null==e?Ui(t):Vi(t,"number"==typeof e?[e,e,e,e]:e)}:("number"===e&&(n=[n,n,n,n]),t),i):l;var e},i.round=function(t){return arguments.length?(d=t?Math.round:Number,i):d!=Number},i.sticky=function(t){return arguments.length?(u=t,r=null,i):u},i.ratio=function(t){return arguments.length?(m=t,i):m},i.mode=function(t){return arguments.length?(v=t+"",i):v},gi(i,a)},Br.random={normal:function(i,r){var t=arguments.length;return t<2&&(r=1),t<1&&(i=0),function(){for(var t,e,n;!(n=(t=2*Math.random()-1)*t+(e=2*Math.random()-1)*e)||1<n;);return i+r*t*Math.sqrt(-2*Math.log(n)/n)}},logNormal:function(){var t=Br.random.normal.apply(Br,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=Br.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(n){return function(){for(var t=0,e=0;e<n;e++)t+=Math.random();return t}}},Br.scale={};var ns={floor:z,ceil:z};Br.scale.linear=function(){return function t(n,i,r,a){function e(){var t=2<Math.min(n.length,i.length)?Qi:Xi,e=a?li:si;return s=t(n,i,e,r),l=t(i,n,e,Vn),o}function o(t){return s(t)}var s,l;return o.invert=function(t){return l(t)},o.domain=function(t){return arguments.length?(n=t.map(Number),e()):n},o.range=function(t){return arguments.length?(i=t,e()):i},o.rangeRound=function(t){return o.range(t).interpolate(ni)},o.clamp=function(t){return arguments.length?(a=t,e()):a},o.interpolate=function(t){return arguments.length?(r=t,e()):r},o.ticks=function(t){return tr(n,t)},o.tickFormat=function(t,e){return er(n,t,e)},o.nice=function(t){return Ji(n,t),e()},o.copy=function(){return t(n,i,r,a)},e()}([0,1],[0,1],Vn,!1)};var is={s:1,g:1,p:1,r:1,e:1};Br.scale.log=function(){return function t(e,l,u,h){function c(t){return(u?Math.log(t<0?0:t):-Math.log(0<t?0:-t))/Math.log(l)}function f(t){return u?Math.pow(l,t):-Math.pow(l,-t)}function a(t){return e(c(t))}return a.invert=function(t){return f(e.invert(t))},a.domain=function(t){return arguments.length?(u=0<=t[0],e.domain((h=t.map(Number)).map(c)),a):h},a.base=function(t){return arguments.length?(l=+t,e.domain(h.map(c)),a):l},a.nice=function(){var t=$i(h.map(c),u?Math:as);return e.domain(t),h=t.map(f),a},a.ticks=function(){var t=Gi(h),e=[],n=t[0],i=t[1],r=Math.floor(c(n)),a=Math.ceil(c(i)),o=l%1?2:l;if(isFinite(a-r)){if(u){for(;r<a;r++)for(var s=1;s<o;s++)e.push(f(r)*s);e.push(f(r))}else for(e.push(f(r));r++<a;)for(s=o-1;0<s;s--)e.push(f(r)*s);for(r=0;e[r]<n;r++);for(a=e.length;e[a-1]>i;a--);e=e.slice(r,a)}return e},a.tickFormat=function(t,e){if(!arguments.length)return rs;arguments.length<2?e=rs:"function"!=typeof e&&(e=Br.format(e));var n,i=Math.max(.1,t/a.ticks().length),r=u?(n=1e-12,Math.ceil):(n=-1e-12,Math.floor);return function(t){return t/f(r(c(t)+n))<=i?e(t):""}},a.copy=function(){return t(e.copy(),l,u,h)},Zi(a,e)}(Br.scale.linear().domain([0,1]),10,!0,[1,10])};var rs=Br.format(".0e"),as={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};Br.scale.pow=function(){return function t(e,n,i){function r(t){return e(a(t))}var a=ir(n),o=ir(1/n);return r.invert=function(t){return o(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain((i=t.map(Number)).map(a)),r):i},r.ticks=function(t){return tr(i,t)},r.tickFormat=function(t,e){return er(i,t,e)},r.nice=function(t){return r.domain(Ji(i,t))},r.exponent=function(t){return arguments.length?(a=ir(n=t),o=ir(1/n),e.domain(i.map(a)),r):n},r.copy=function(){return t(e.copy(),n,i)},Zi(r,e)}(Br.scale.linear(),1,[0,1])},Br.scale.sqrt=function(){return Br.scale.pow().exponent(.5)},Br.scale.ordinal=function(){return function t(s,l){function u(t){return c[((r.get(t)||("range"===l.t?r.set(t,s.push(t)):NaN))-1)%c.length]}function h(e,n){return Br.range(s.length).map(function(t){return e+n*t})}var r,c,f;return u.domain=function(t){if(!arguments.length)return s;s=[],r=new y;for(var e,n=-1,i=t.length;++n<i;)r.has(e=t[n])||r.set(e,s.push(e));return u[l.t].apply(u,l.a)},u.range=function(t){return arguments.length?(c=t,f=0,l={t:"range",a:arguments},u):c},u.rangePoints=function(t,e){arguments.length<2&&(e=0);var n=t[0],i=t[1],r=s.length<2?(n=(n+i)/2,0):(i-n)/(s.length-1+e);return c=h(n+r*e/2,r),f=0,l={t:"rangePoints",a:arguments},u},u.rangeRoundPoints=function(t,e){arguments.length<2&&(e=0);var n=t[0],i=t[1],r=s.length<2?(n=i=Math.round((n+i)/2),0):(i-n)/(s.length-1+e)|0;return c=h(n+Math.round(r*e/2+(i-n-(s.length-1+e)*r)/2),r),f=0,l={t:"rangeRoundPoints",a:arguments},u},u.rangeBands=function(t,e,n){arguments.length<2&&(e=0),arguments.length<3&&(n=e);var i=t[1]<t[0],r=t[i-0],a=(t[1-i]-r)/(s.length-e+2*n);return c=h(r+a*n,a),i&&c.reverse(),f=a*(1-e),l={t:"rangeBands",a:arguments},u},u.rangeRoundBands=function(t,e,n){arguments.length<2&&(e=0),arguments.length<3&&(n=e);var i=t[1]<t[0],r=t[i-0],a=t[1-i],o=Math.floor((a-r)/(s.length-e+2*n));return c=h(r+Math.round((a-r-(s.length-e)*o)/2),o),i&&c.reverse(),f=Math.round(o*(1-e)),l={t:"rangeRoundBands",a:arguments},u},u.rangeBand=function(){return f},u.rangeExtent=function(){return Gi(l.a[0])},u.copy=function(){return t(s,l)},u.domain(s)}([],{t:"range",a:[[]]})},Br.scale.category10=function(){return Br.scale.ordinal().range(os)},Br.scale.category20=function(){return Br.scale.ordinal().range(ss)},Br.scale.category20b=function(){return Br.scale.ordinal().range(ls)},Br.scale.category20c=function(){return Br.scale.ordinal().range(us)};var os=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(dt),ss=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(dt),ls=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(dt),us=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(dt);Br.scale.quantile=function(){return function t(n,i){function e(){var t=0,e=i.length;for(a=[];++t<e;)a[t-1]=Br.quantile(n,t/e);return r}function r(t){return isNaN(t=+t)?void 0:i[Br.bisect(a,t)]}var a;return r.domain=function(t){return arguments.length?(n=t.map(u).filter(h).sort(o),e()):n},r.range=function(t){return arguments.length?(i=t,e()):i},r.quantiles=function(){return a},r.invertExtent=function(t){return(t=i.indexOf(t))<0?[NaN,NaN]:[0<t?a[t-1]:n[0],t<a.length?a[t]:n[n.length-1]]},r.copy=function(){return t(n,i)},e()}([],[])},Br.scale.quantize=function(){return function t(e,n,i){function r(t){return i[Math.max(0,Math.min(s,Math.floor(o*(t-e))))]}function a(){return o=i.length/(n-e),s=i.length-1,r}var o,s;return r.domain=function(t){return arguments.length?(e=+t[0],n=+t[t.length-1],a()):[e,n]},r.range=function(t){return arguments.length?(i=t,a()):i},r.invertExtent=function(t){return[t=(t=i.indexOf(t))<0?NaN:t/o+e,t+1/o]},r.copy=function(){return t(e,n,i)},a()}(0,1,[0,1])},Br.scale.threshold=function(){return function t(e,n){function i(t){return t<=t?n[Br.bisect(e,t)]:void 0}return i.domain=function(t){return arguments.length?(e=t,i):e},i.range=function(t){return arguments.length?(n=t,i):n},i.invertExtent=function(t){return t=n.indexOf(t),[e[t-1],e[t]]},i.copy=function(){return t(e,n)},i}([.5],[0,1])},Br.scale.identity=function(){return function t(n){function e(t){return+t}return(e.invert=e).domain=e.range=function(t){return arguments.length?(n=t.map(e),e):n},e.ticks=function(t){return tr(n,t)},e.tickFormat=function(t,e){return er(n,t,e)},e.copy=function(){return t(n)},e}([0,1])},Br.svg={},Br.svg.arc=function(){function e(){var t=Math.max(0,+W.apply(this,arguments)),e=Math.max(0,+H.apply(this,arguments)),n=B.apply(this,arguments)-ba,i=U.apply(this,arguments)-ba,r=Math.abs(i-n),a=i<n?0:1;if(e<t&&(o=e,e=t,t=o),xa<=r)return q(e,a)+(t?q(t,1-a):"")+"Z";var o,s,l,u,h,c,f,p,d,g,v,m,y=0,x=0,b=[];if((u=(+V.apply(this,arguments)||0)/2)&&(l=j===hs?Math.sqrt(t*t+e*e):+j.apply(this,arguments),a||(x*=-1),e&&(x=J(l/e*Math.sin(u))),t&&(y=J(l/t*Math.sin(u)))),e){h=e*Math.cos(n+x),c=e*Math.sin(n+x),f=e*Math.cos(i-x),p=e*Math.sin(i-x);var w=Math.abs(i-n-2*x)<=ma?0:1;if(x&&hr(h,c,f,p)===a^w){var M=(n+i)/2;h=e*Math.cos(M),c=e*Math.sin(M),f=p=null}}else h=c=0;if(t){d=t*Math.cos(i-y),g=t*Math.sin(i-y),v=t*Math.cos(n+y),m=t*Math.sin(n+y);var k=Math.abs(n-i+2*y)<=ma?0:1;if(y&&hr(d,g,v,m)===1-a^k){var S=(n+i)/2;d=t*Math.cos(S),g=t*Math.sin(S),v=m=null}}else d=g=0;if(.001<(o=Math.min(Math.abs(e-t)/2,+O.apply(this,arguments)))){s=t<e^a?0:1;var C=null==v?[d,g]:null==f?[h,c]:pn([h,c],[v,m],[f,p],[d,g]),_=h-C[0],R=c-C[1],A=f-C[0],T=p-C[1],E=1/Math.sin(Math.acos((_*A+R*T)/(Math.sqrt(_*_+R*R)*Math.sqrt(A*A+T*T)))/2),N=Math.sqrt(C[0]*C[0]+C[1]*C[1]);if(null!=f){var P=Math.min(o,(e-N)/(E+1)),I=cr(null==v?[d,g]:[v,m],[h,c],e,P,a),z=cr([f,p],[d,g],e,P,a);o===P?b.push("M",I[0],"A",P,",",P," 0 0,",s," ",I[1],"A",e,",",e," 0 ",1-a^hr(I[1][0],I[1][1],z[1][0],z[1][1]),",",a," ",z[1],"A",P,",",P," 0 0,",s," ",z[0]):b.push("M",I[0],"A",P,",",P," 0 1,",s," ",z[0])}else b.push("M",h,",",c);if(null!=v){var L=Math.min(o,(t-N)/(E-1)),F=cr([h,c],[v,m],t,-L,a),D=cr([d,g],null==f?[h,c]:[f,p],t,-L,a);o===L?b.push("L",D[0],"A",L,",",L," 0 0,",s," ",D[1],"A",t,",",t," 0 ",a^hr(D[1][0],D[1][1],F[1][0],F[1][1]),",",1-a," ",F[1],"A",L,",",L," 0 0,",s," ",F[0]):b.push("L",D[0],"A",L,",",L," 0 0,",s," ",F[0])}else b.push("L",d,",",g)}else b.push("M",h,",",c),null!=f&&b.push("A",e,",",e," 0 ",w,",",a," ",f,",",p),b.push("L",d,",",g),null!=v&&b.push("A",t,",",t," 0 ",k,",",1-a," ",v,",",m);return b.push("Z"),b.join("")}function q(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}var W=ar,H=or,O=rr,j=hs,B=sr,U=lr,V=ur;return e.innerRadius=function(t){return arguments.length?(W=wt(t),e):W},e.outerRadius=function(t){return arguments.length?(H=wt(t),e):H},e.cornerRadius=function(t){return arguments.length?(O=wt(t),e):O},e.padRadius=function(t){return arguments.length?(j=t==hs?hs:wt(t),e):j},e.startAngle=function(t){return arguments.length?(B=wt(t),e):B},e.endAngle=function(t){return arguments.length?(U=wt(t),e):U},e.padAngle=function(t){return arguments.length?(V=wt(t),e):V},e.centroid=function(){var t=(+W.apply(this,arguments)+ +H.apply(this,arguments))/2,e=(+B.apply(this,arguments)+ +U.apply(this,arguments))/2-ba;return[Math.cos(e)*t,Math.sin(e)*t]},e};var hs="auto";Br.svg.line=function(){return fr(z)};var cs=Br.map({linear:pr,"linear-closed":function(t){return pr(t)+"Z"},step:function(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("H",(i[0]+(i=t[e])[0])/2,"V",i[1]);return 1<n&&r.push("H",i[0]),r.join("")},"step-before":dr,"step-after":gr,basis:yr,"basis-open":function(t){if(t.length<4)return pr(t);for(var e,n=[],i=-1,r=t.length,a=[0],o=[0];++i<3;)e=t[i],a.push(e[0]),o.push(e[1]);for(n.push(xr(ds,a)+","+xr(ds,o)),--i;++i<r;)e=t[i],a.shift(),a.push(e[0]),o.shift(),o.push(e[1]),br(n,a,o);return n.join("")},"basis-closed":function(t){for(var e,n,i=-1,r=t.length,a=r+4,o=[],s=[];++i<4;)n=t[i%r],o.push(n[0]),s.push(n[1]);for(e=[xr(ds,o),",",xr(ds,s)],--i;++i<a;)n=t[i%r],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),br(e,o,s);return e.join("")},bundle:function(t,e){var n=t.length-1;if(n)for(var i,r,a=t[0][0],o=t[0][1],s=t[n][0]-a,l=t[n][1]-o,u=-1;++u<=n;)r=u/n,(i=t[u])[0]=e*i[0]+(1-e)*(a+r*s),i[1]=e*i[1]+(1-e)*(o+r*l);return yr(t)},cardinal:function(t,e){return t.length<3?pr(t):t[0]+vr(t,mr(t,e))},"cardinal-open":function(t,e){return t.length<4?pr(t):t[1]+vr(t.slice(1,-1),mr(t,e))},"cardinal-closed":function(t,e){return t.length<3?pr(t):t[0]+vr((t.push(t[0]),t),mr([t[t.length-2]].concat(t,[t[1]]),e))},monotone:function(t){return t.length<3?pr(t):t[0]+vr(t,Mr(t))}});cs.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var fs=[0,2/3,1/3,0],ps=[0,1/3,2/3,0],ds=[0,1/6,2/3,1/6];Br.svg.line.radial=function(){var t=fr(kr);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},(dr.reverse=gr).reverse=dr,Br.svg.area=function(){return Sr(z)},Br.svg.area.radial=function(){var t=Sr(kr);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},Br.svg.chord=function(){function e(t,e){var n,i,r=o(this,u,t,e),a=o(this,h,t,e);return"M"+r.p0+s(r.r,r.p1,r.a1-r.a0)+(i=a,(n=r).a0==i.a0&&n.a1==i.a1?l(r.r,r.p1,r.r,r.p0):l(r.r,r.p1,a.r,a.p0)+s(a.r,a.p1,a.a1-a.a0)+l(a.r,a.p1,r.r,r.p0))+"Z"}function o(t,e,n,i){var r=e.call(t,n,i),a=c.call(t,r,i),o=f.call(t,r,i)-ba,s=p.call(t,r,i)-ba;return{r:a,a0:o,a1:s,p0:[a*Math.cos(o),a*Math.sin(o)],p1:[a*Math.cos(s),a*Math.sin(s)]}}function s(t,e,n){return"A"+t+","+t+" 0 "+ +(ma<n)+",1 "+e}function l(t,e,n,i){return"Q 0,0 "+i}var u=Ke,h=tn,c=Cr,f=sr,p=lr;return e.radius=function(t){return arguments.length?(c=wt(t),e):c},e.source=function(t){return arguments.length?(u=wt(t),e):u},e.target=function(t){return arguments.length?(h=wt(t),e):h},e.startAngle=function(t){return arguments.length?(f=wt(t),e):f},e.endAngle=function(t){return arguments.length?(p=wt(t),e):p},e},Br.svg.diagonal=function(){function e(t,e){var n=o.call(this,t,e),i=s.call(this,t,e),r=(n.y+i.y)/2,a=[n,{x:n.x,y:r},{x:i.x,y:r},i];return"M"+(a=a.map(l))[0]+"C"+a[1]+" "+a[2]+" "+a[3]}var o=Ke,s=tn,l=_r;return e.source=function(t){return arguments.length?(o=wt(t),e):o},e.target=function(t){return arguments.length?(s=wt(t),e):s},e.projection=function(t){return arguments.length?(l=t,e):l},e},Br.svg.diagonal.radial=function(){var t=Br.svg.diagonal(),e=_r,n=t.projection;return t.projection=function(t){return arguments.length?n((i=e=t,function(){var t=i.apply(this,arguments),e=t[0],n=t[1]-ba;return[e*Math.cos(n),e*Math.sin(n)]})):e;var i},t},Br.svg.symbol=function(){function e(t,e){return(gs.get(n.call(this,t,e))||Tr)(i.call(this,t,e))}var n=Ar,i=Rr;return e.type=function(t){return arguments.length?(n=wt(t),e):n},e.size=function(t){return arguments.length?(i=wt(t),e):i},e};var gs=Br.map({circle:Tr,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*ms)),n=e*ms;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/vs),n=e*vs/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/vs),n=e*vs/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});Br.svg.symbolTypes=gs.keys();var vs=Math.sqrt(3),ms=Math.tan(30*wa);la.transition=function(t){for(var e,n,i=ys||++Ms,r=zr(t),a=[],o=xs||{time:Date.now(),ease:Zn,delay:0,duration:250},s=-1,l=this.length;++s<l;){a.push(e=[]);for(var u=this[s],h=-1,c=u.length;++h<c;)(n=u[h])&&Lr(n,h,r,i,o),e.push(n)}return Nr(a,r,i)},la.interrupt=function(t){return this.each(null==t?bs:Er(zr(t)))};var ys,xs,bs=Er(zr()),ws=[],Ms=0;ws.call=la.call,ws.empty=la.empty,ws.node=la.node,ws.size=la.size,Br.transition=function(t,e){return t&&t.transition?ys?t.transition(e):t:Br.selection().transition(t)},(Br.transition.prototype=ws).select=function(t){var e,n,i,r=this.id,a=this.namespace,o=[];t=k(t);for(var s=-1,l=this.length;++s<l;){o.push(e=[]);for(var u=this[s],h=-1,c=u.length;++h<c;)(i=u[h])&&(n=t.call(i,i.__data__,h,s))?("__data__"in i&&(n.__data__=i.__data__),Lr(n,h,a,r,i[a][r]),e.push(n)):e.push(null)}return Nr(o,a,r)},ws.selectAll=function(t){var e,n,i,r,a,o=this.id,s=this.namespace,l=[];t=S(t);for(var u=-1,h=this.length;++u<h;)for(var c=this[u],f=-1,p=c.length;++f<p;)if(i=c[f]){a=i[s][o],n=t.call(i,i.__data__,f,u),l.push(e=[]);for(var d=-1,g=n.length;++d<g;)(r=n[d])&&Lr(r,d,s,o,a),e.push(r)}return Nr(l,s,o)},ws.filter=function(t){var e,n,i=[];"function"!=typeof t&&(t=H(t));for(var r=0,a=this.length;r<a;r++){i.push(e=[]);for(var o,s=0,l=(o=this[r]).length;s<l;s++)(n=o[s])&&t.call(n,n.__data__,s,r)&&e.push(n)}return Nr(i,this.namespace,this.id)},ws.tween=function(e,n){var i=this.id,r=this.namespace;return arguments.length<2?this.node()[r][i].tween.get(e):O(this,null==n?function(t){t[r][i].tween.remove(e)}:function(t){t[r][i].tween.set(e,n)})},ws.attr=function(t,e){function i(){this.removeAttribute(o)}function r(){this.removeAttributeNS(o.space,o.local)}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var a="transform"==t?oi:Vn,o=Br.ns.qualify(t);return Pr(this,"attr."+t,e,o.local?function(n){return null==n?r:(n+="",function(){var e,t=this.getAttributeNS(o.space,o.local);return t!==n&&(e=a(t,n),function(t){this.setAttributeNS(o.space,o.local,e(t))})})}:function(n){return null==n?i:(n+="",function(){var e,t=this.getAttribute(o);return t!==n&&(e=a(t,n),function(t){this.setAttribute(o,e(t))})})})},ws.attrTween=function(t,i){var r=Br.ns.qualify(t);return this.tween("attr."+t,r.local?function(t,e){var n=i.call(this,t,e,this.getAttributeNS(r.space,r.local));return n&&function(t){this.setAttributeNS(r.space,r.local,n(t))}}:function(t,e){var n=i.call(this,t,e,this.getAttribute(r));return n&&function(t){this.setAttribute(r,n(t))}})},ws.style=function(i,t,r){function e(){this.style.removeProperty(i)}var n=arguments.length;if(n<3){if("string"!=typeof i){for(r in n<2&&(t=""),i)this.style(r,i[r],t);return this}r=""}return Pr(this,"style."+i,t,function(n){return null==n?e:(n+="",function(){var e,t=I(this).getComputedStyle(this,null).getPropertyValue(i);return t!==n&&(e=Vn(t,n),function(t){this.style.setProperty(i,e(t),r)})})})},ws.styleTween=function(i,r,a){return arguments.length<3&&(a=""),this.tween("style."+i,function(t,e){var n=r.call(this,t,e,I(this).getComputedStyle(this,null).getPropertyValue(i));return n&&function(t){this.style.setProperty(i,n(t),a)}})},ws.text=function(t){return Pr(this,"text",t,Ir)},ws.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)})},ws.ease=function(e){var n=this.id,i=this.namespace;return arguments.length<1?this.node()[i][n].ease:("function"!=typeof e&&(e=Br.ease.apply(Br,arguments)),O(this,function(t){t[i][n].ease=e}))},ws.delay=function(i){var r=this.id,a=this.namespace;return arguments.length<1?this.node()[a][r].delay:O(this,"function"==typeof i?function(t,e,n){t[a][r].delay=+i.call(t,t.__data__,e,n)}:(i=+i,function(t){t[a][r].delay=i}))},ws.duration=function(i){var r=this.id,a=this.namespace;return arguments.length<1?this.node()[a][r].duration:O(this,"function"==typeof i?function(t,e,n){t[a][r].duration=Math.max(1,i.call(t,t.__data__,e,n))}:(i=Math.max(1,i),function(t){t[a][r].duration=i}))},ws.each=function(i,n){var r=this.id,a=this.namespace;if(arguments.length<2){var t=xs,e=ys;try{ys=r,O(this,function(t,e,n){xs=t[a][r],i.call(t,t.__data__,e,n)})}finally{xs=t,ys=e}}else O(this,function(t){var e=t[a][r];(e.event||(e.event=Br.dispatch("start","end","interrupt"))).on(i,n)});return this},ws.transition=function(){for(var t,e,n,i=this.id,r=++Ms,a=this.namespace,o=[],s=0,l=this.length;s<l;s++){o.push(t=[]);for(var u,h=0,c=(u=this[s]).length;h<c;h++)(e=u[h])&&Lr(e,h,a,r,{time:(n=e[a][i]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),t.push(e)}return Nr(o,a,r)},Br.svg.axis=function(){function n(t){t.each(function(){var t,e=Br.select(this),n=this.__chart__||R,i=this.__chart__=R.copy(),r=null==I?i.ticks?i.ticks.apply(i,P):i.domain():I,a=null==_?i.tickFormat?i.tickFormat.apply(i,P):z:_,o=e.selectAll(".tick").data(r,i),s=o.enter().insert("g",".domain").attr("class","tick").style("opacity",ga),l=Br.transition(o.exit()).style("opacity",ga).remove(),u=Br.transition(o.order()).style("opacity",1),h=Math.max(T,0)+N,c=Yi(i),f=e.selectAll(".domain").data([0]),p=(f.enter().append("path").attr("class","domain"),Br.transition(f));s.append("line"),s.append("text");var d,g,v,m,y=s.select("line"),x=u.select("line"),b=o.select("text").text(a),w=s.select("text"),M=u.select("text"),k="top"===A||"left"===A?-1:1;if("bottom"===A||"top"===A?(t=Fr,d="x",v="y",g="x2",m="y2",b.attr("dy",k<0?"0em":".71em").style("text-anchor","middle"),p.attr("d","M"+c[0]+","+k*E+"V0H"+c[1]+"V"+k*E)):(t=Dr,d="y",v="x",g="y2",m="x2",b.attr("dy",".32em").style("text-anchor",k<0?"end":"start"),p.attr("d","M"+k*E+","+c[0]+"H0V"+c[1]+"H"+k*E)),y.attr(m,k*T),w.attr(v,k*h),x.attr(g,0).attr(m,k*T),M.attr(d,0).attr(v,k*h),i.rangeBand){var S=i,C=S.rangeBand()/2;n=i=function(t){return S(t)+C}}else n.rangeBand?n=i:l.call(t,i,n);s.call(t,n,i),u.call(t,i,i)})}var _,R=Br.scale.linear(),A=ks,T=6,E=6,N=3,P=[10],I=null;return n.scale=function(t){return arguments.length?(R=t,n):R},n.orient=function(t){return arguments.length?(A=t in Ss?t+"":ks,n):A},n.ticks=function(){return arguments.length?(P=arguments,n):P},n.tickValues=function(t){return arguments.length?(I=t,n):I},n.tickFormat=function(t){return arguments.length?(_=t,n):_},n.tickSize=function(t){var e=arguments.length;return e?(T=+t,E=+arguments[e-1],n):T},n.innerTickSize=function(t){return arguments.length?(T=+t,n):T},n.outerTickSize=function(t){return arguments.length?(E=+t,n):E},n.tickPadding=function(t){return arguments.length?(N=+t,n):N},n.tickSubdivide=function(){return arguments.length&&n},n};var ks="bottom",Ss={top:1,right:1,bottom:1,left:1};Br.svg.brush=function(){function y(t){t.each(function(){var t=Br.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",o).on("touchstart.brush",o),e=t.selectAll(".background").data([0]);e.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=t.selectAll(".resize").data(s,z);n.exit().remove(),n.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Cs[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",y.empty()?"none":null);var i,r=Br.transition(t),a=Br.transition(e);C&&(i=Yi(C),a.attr("x",i[0]).attr("width",i[1]-i[0]),b(r)),_&&(i=Yi(_),a.attr("y",i[0]).attr("height",i[1]-i[0]),w(r)),x(r)})}function x(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+R[+/e$/.test(t)]+","+A[+/^s/.test(t)]+")"})}function b(t){t.select(".extent").attr("x",R[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",R[1]-R[0])}function w(t){t.select(".extent").attr("y",A[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",A[1]-A[0])}function o(){function t(){var t=Br.mouse(r),e=!1;i&&(t[0]+=i[0],t[1]+=i[1]),f||(Br.event.altKey?(c||(c=[(R[0]+R[1])/2,(A[0]+A[1])/2]),d[0]=R[+(t[0]<c[0])],d[1]=A[+(t[1]<c[1])]):c=null),u&&n(t,C,0)&&(b(s),e=!0),h&&n(t,_,1)&&(w(s),e=!0),e&&(x(s),o({type:"brush",mode:f?"move":"resize"}))}function n(t,e,n){var i,r,a=Yi(e),o=a[0],s=a[1],l=d[n],u=n?A:R,h=u[1]-u[0];return f&&(o-=l,s-=h+l),i=(n?E:T)?Math.max(o,Math.min(s,t[n])):t[n],f?r=(i+=l)+h:(c&&(l=Math.max(o,Math.min(s,2*c[n]-i))),l<i?(r=i,i=l):r=l),u[0]!=i||u[1]!=r?(n?k=null:M=null,u[0]=i,u[1]=r,!0):void 0}function e(){t(),s.style("pointer-events","all").selectAll(".resize").style("display",y.empty()?"none":null),Br.select("body").style("cursor",null),g.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),p(),o({type:"brushend"})}var c,i,r=this,a=Br.select(Br.event.target),o=S.of(r,arguments),s=Br.select(r),l=a.datum(),u=!/^(n|s)$/.test(l)&&C,h=!/^(e|w)$/.test(l)&&_,f=a.classed("extent"),p=G(r),d=Br.mouse(r),g=Br.select(I(r)).on("keydown.brush",function(){32==Br.event.keyCode&&(f||(c=null,d[0]-=R[1],d[1]-=A[1],f=2),L())}).on("keyup.brush",function(){32==Br.event.keyCode&&2==f&&(d[0]+=R[1],d[1]+=A[1],f=0,L())});if(Br.event.changedTouches?g.on("touchmove.brush",t).on("touchend.brush",e):g.on("mousemove.brush",t).on("mouseup.brush",e),s.interrupt().selectAll("*").interrupt(),f)d[0]=R[0]-d[0],d[1]=A[0]-d[1];else if(l){var v=+/w$/.test(l),m=+/^n/.test(l);i=[R[1-v]-d[0],A[1-m]-d[1]],d[0]=R[v],d[1]=A[m]}else Br.event.altKey&&(c=d.slice());s.style("pointer-events","none").selectAll(".resize").style("display",null),Br.select("body").style("cursor",a.style("cursor")),o({type:"brushstart"}),t()}var M,k,S=F(y,"brushstart","brush","brushend"),C=null,_=null,R=[0,0],A=[0,0],T=!0,E=!0,s=_s[0];return y.event=function(t){t.each(function(){var i=S.of(this,arguments),r={x:R,y:A,i:M,j:k},t=this.__chart__||r;this.__chart__=r,ys?Br.select(this).transition().each("start.brush",function(){M=t.i,k=t.j,R=t.x,A=t.y,i({type:"brushstart"})}).tween("brush:brush",function(){var e=Gn(R,r.x),n=Gn(A,r.y);return M=k=null,function(t){R=r.x=e(t),A=r.y=n(t),i({type:"brush",mode:"resize"})}}).each("end.brush",function(){M=r.i,k=r.j,i({type:"brush",mode:"resize"}),i({type:"brushend"})}):(i({type:"brushstart"}),i({type:"brush",mode:"resize"}),i({type:"brushend"}))})},y.x=function(t){return arguments.length?(s=_s[!(C=t)<<1|!_],y):C},y.y=function(t){return arguments.length?(s=_s[!C<<1|!(_=t)],y):_},y.clamp=function(t){return arguments.length?(C&&_?(T=!!t[0],E=!!t[1]):C?T=!!t:_&&(E=!!t),y):C&&_?[T,E]:C?T:_?E:null},y.extent=function(t){var e,n,i,r,a;return arguments.length?(C&&(e=t[0],n=t[1],_&&(e=e[0],n=n[0]),M=[e,n],C.invert&&(e=C(e),n=C(n)),n<e&&(a=e,e=n,n=a),(e!=R[0]||n!=R[1])&&(R=[e,n])),_&&(i=t[0],r=t[1],C&&(i=i[1],r=r[1]),k=[i,r],_.invert&&(i=_(i),r=_(r)),r<i&&(a=i,i=r,r=a),(i!=A[0]||r!=A[1])&&(A=[i,r])),y):(C&&(M?(e=M[0],n=M[1]):(e=R[0],n=R[1],C.invert&&(e=C.invert(e),n=C.invert(n)),n<e&&(a=e,e=n,n=a))),_&&(k?(i=k[0],r=k[1]):(i=A[0],r=A[1],_.invert&&(i=_.invert(i),r=_.invert(r)),r<i&&(a=i,i=r,r=a))),C&&_?[[e,i],[n,r]]:C?[e,n]:_&&[i,r])},y.clear=function(){return y.empty()||(R=[0,0],A=[0,0],M=k=null),y},y.empty=function(){return!!C&&R[0]==R[1]||!!_&&A[0]==A[1]},Br.rebind(y,S,"on")};var Cs={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},_s=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Rs=Va.format=Za.timeFormat,As=Rs.utc,Ts=As("%Y-%m-%dT%H:%M:%S.%LZ");Rs.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?qr:Ts,qr.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},qr.toString=Ts.toString,Va.second=Et(function(t){return new Ga(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),Va.seconds=Va.second.range,Va.seconds.utc=Va.second.utc.range,Va.minute=Et(function(t){return new Ga(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),Va.minutes=Va.minute.range,Va.minutes.utc=Va.minute.utc.range,Va.hour=Et(function(t){var e=t.getTimezoneOffset()/60;return new Ga(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),Va.hours=Va.hour.range,Va.hours.utc=Va.hour.utc.range,Va.month=Et(function(t){return(t=Va.day(t)).setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),Va.months=Va.month.range,Va.months.utc=Va.month.utc.range;var Es=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Ns=[[Va.second,1],[Va.second,5],[Va.second,15],[Va.second,30],[Va.minute,1],[Va.minute,5],[Va.minute,15],[Va.minute,30],[Va.hour,1],[Va.hour,3],[Va.hour,6],[Va.hour,12],[Va.day,1],[Va.day,2],[Va.week,1],[Va.month,1],[Va.month,3],[Va.year,1]],Ps=Rs.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",me]]),Is={range:function(t,e,n){return Br.range(Math.ceil(t/n)*n,+e,n).map(Hr)},floor:z,ceil:z};Ns.year=Va.year,Va.scale=function(){return Wr(Br.scale.linear(),Ns,Ps)};var zs=Ns.map(function(t){return[t[0].utc,t[1]]}),Ls=As.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",me]]);zs.year=Va.year.utc,Va.scale.utc=function(){return Wr(Br.scale.linear(),zs,Ls)},Br.text=Mt(function(t){return t.responseText}),Br.json=function(t,e){return kt(t,"application/json",Or,e)},Br.html=function(t,e){return kt(t,"text/html",jr,e)},Br.xml=Mt(function(t){return t.responseXML}),"function"==typeof define&&define.amd?define(Br):"object"==typeof module&&module.exports&&(module.exports=Br),this.d3=Br}();var Rickshaw={namespace:function(t,e){for(var n=t.split("."),i=Rickshaw,r=1,a=n.length;r<a;r++)currentPart=n[r],i[currentPart]=i[currentPart]||{},i=i[currentPart];return i},keys:function(t){var e=[];for(var n in t)e.push(n);return e},extend:function(t,e){for(var n in e)t[n]=e[n];return t}};if("undefined"!=typeof module&&module.exports){var d3=require("d3");module.exports=Rickshaw}(function(t){function c(t){return e.call(t)===n}function f(t){if(function(t){switch(t){case null:return i;case void 0:return r}switch(typeof t){case"boolean":return a;case"number":return s;case"string":return l}return u}(t)!==u)throw new TypeError;var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}function p(t,e){var n=t;return function(){var t=o([d(n,this)],arguments);return e.apply(this,t)}}function o(t,e){for(var n=t.length,i=e.length;i--;)t[n+i]=e[i];return t}function d(t,i){if(arguments.length<2&&void 0===t)return this;var r=t,a=h.call(arguments,2);return function(){var t,e,n=(t=a,e=arguments,o(t=h.call(t,0),e));return r.apply(i,n)}}var e=Object.prototype.toString,i="Null",r="Undefined",a="Boolean",s="Number",l="String",u="Object",n="[object Function]",h=Array.prototype.slice,g=function(){},v=function(){function a(){}var h=function(){for(var t in{toString:1})if("toString"===t)return!1;return!0}();return{create:function(){function t(){this.initialize.apply(this,arguments)}var e=null,n=[].slice.apply(arguments);if(c(n[0])&&(e=n.shift()),function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}(t,v.Methods),t.superclass=e,t.subclasses=[],e){a.prototype=e.prototype,t.prototype=new a;try{e.subclasses.push(t)}catch(t){}}for(var i=0,r=n.length;i<r;i++)t.addMethods(n[i]);return t.prototype.initialize||(t.prototype.initialize=g),t.prototype.constructor=t},Methods:{addMethods:function(t){var e,n,i=this.superclass&&this.superclass.prototype,r=f(t);h&&(t.toString!=Object.prototype.toString&&r.push("toString"),t.valueOf!=Object.prototype.valueOf&&r.push("valueOf"));for(var a=0,o=r.length;a<o;a++){var s=r[a],l=t[s];if(i&&c(l)&&"$super"==(e=l,n=e.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(","),1!=n.length||n[0]?n:[])[0]){var u=l;(l=p(function(t){return function(){return i[t].apply(this,arguments)}}(s),u)).valueOf=d(u.valueOf,u),l.toString=d(u.toString,u)}this.prototype[s]=l}return this}}}}();t.exports?t.exports.Class=v:t.Class=v})(Rickshaw),Rickshaw.namespace("Rickshaw.Compat.ClassList"),Rickshaw.Compat.ClassList=function(){"undefined"!=typeof document&&!("classList"in document.createElement("a"))&&function(t){"use strict";var e="classList",n="prototype",i=(t.HTMLElement||t.Element)[n],r=Object,a=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},o=Array[n].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},s=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},l=function(t,e){if(""===e)throw new s("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new s("INVALID_CHARACTER_ERR","String contains an invalid character");return o.call(t,e)},u=function(t){for(var e=a.call(t.className),n=e?e.split(/\s+/):[],i=0,r=n.length;i<r;i++)this.push(n[i]);this._updateClassName=function(){t.className=this.toString()}},h=u[n]=[],c=function(){return new u(this)};if(s[n]=Error[n],h.item=function(t){return this[t]||null},h.contains=function(t){return-1!==l(this,t+="")},h.add=function(t){-1===l(this,t+="")&&(this.push(t),this._updateClassName())},h.remove=function(t){var e=l(this,t+="");-1!==e&&(this.splice(e,1),this._updateClassName())},h.toggle=function(t){-1===l(this,t+="")?this.add(t):this.remove(t)},h.toString=function(){return this.join(" ")},r.defineProperty){var f={get:c,enumerable:!0,configurable:!0};try{r.defineProperty(i,e,f)}catch(t){-2146823252===t.number&&(f.enumerable=!1,r.defineProperty(i,e,f))}}else r[n].__defineGetter__&&i.__defineGetter__(e,c)}(window)},("undefined"!=typeof RICKSHAW_NO_COMPAT&&!RICKSHAW_NO_COMPAT||"undefined"==typeof RICKSHAW_NO_COMPAT)&&new Rickshaw.Compat.ClassList,Rickshaw.namespace("Rickshaw.Graph"),Rickshaw.Graph=function(e){this.element=e.element,this.series=e.series,this.defaults={interpolation:"cardinal",offset:"zero",min:void 0,max:void 0},Rickshaw.keys(this.defaults).forEach(function(t){this[t]=e[t]||this.defaults[t]},this),this.window={},this.updateCallbacks=[];var r=this;this.initialize=function(t){this.validateSeries(t.series),this.series.active=function(){return r.series.filter(function(t){return!t.disabled})},this.setSize({width:t.width,height:t.height}),this.element.classList.add("rickshaw_graph"),this.vis=d3.select(this.element).append("svg:svg").attr("width",this.width).attr("height",this.height),[Rickshaw.Graph.Renderer.Stack,Rickshaw.Graph.Renderer.Line,Rickshaw.Graph.Renderer.Bar,Rickshaw.Graph.Renderer.Area,Rickshaw.Graph.Renderer.ScatterPlot].forEach(function(t){t&&r.registerRenderer(new t({graph:r}))}),this.setRenderer(t.renderer||"stack",t),this.discoverRange()},this.validateSeries=function(t){var i;if(!(t instanceof Array||t instanceof Rickshaw.Series))throw"series is not an array: "+Object.prototype.toString.apply(t);t.forEach(function(t){if(!(t instanceof Object))throw"series element is not an object: "+t;if(!t.data)throw"series has no data: "+JSON.stringify(t);if(!(t.data instanceof Array))throw"series data is not an array: "+JSON.stringify(t.data);if((i=i||t.data.length)&&t.data.length!=i)throw"series cannot have differing numbers of points: "+i+" vs "+t.data.length+"; see Rickshaw.Series.zeroFill()";var e=typeof t.data[0].x,n=typeof t.data[0].y;if("number"!=e||"number"!=n)throw"x and y properties of points should be numbers instead of "+e+" and "+n})},this.dataDomain=function(){var t=this.series[0].data;return[t[0].x,t.slice(-1).shift().x]},this.discoverRange=function(){var t=this.renderer.domain();this.x=d3.scale.linear().domain(t.x).range([0,this.width]),this.y=d3.scale.linear().domain(t.y).range([this.height,0]),this.y.magnitude=d3.scale.linear().domain([t.y[0]-t.y[0],t.y[1]-t.y[0]]).range([0,this.height])},this.render=function(){this.stackData();this.discoverRange(),this.renderer.render(),this.updateCallbacks.forEach(function(t){t()})},this.update=this.render,this.stackData=function(){var e=this.series.active().map(function(t){return t.data}).map(function(t){return t.filter(function(t){return this._slice(t)},this)},this);this.stackData.hooks.data.forEach(function(t){e=t.f.apply(r,[e])});var t=d3.layout.stack();t.offset(r.offset);var n=t(e);this.stackData.hooks.after.forEach(function(t){n=t.f.apply(r,[e])});var i=0;return this.series.forEach(function(t){t.disabled||(t.stack=n[i++])}),this.stackedData=n},this.stackData.hooks={data:[],after:[]},this._slice=function(t){if(this.window.xMin||this.window.xMax){var e=!0;return this.window.xMin&&t.x<this.window.xMin&&(e=!1),this.window.xMax&&t.x>this.window.xMax&&(e=!1),e}return!0},this.onUpdate=function(t){this.updateCallbacks.push(t)},this.registerRenderer=function(t){this._renderers=this._renderers||{},this._renderers[t.name]=t},this.configure=function(e){(e.width||e.height)&&this.setSize(e),Rickshaw.keys(this.defaults).forEach(function(t){this[t]=t in e?e[t]:t in this?this[t]:this.defaults[t]},this),this.setRenderer(e.renderer||this.renderer.name,e)},this.setRenderer=function(t,e){if(!this._renderers[t])throw"couldn't find renderer "+t;this.renderer=this._renderers[t],"object"==typeof e&&this.renderer.configure(e)},this.setSize=function(t){if(t=t||{},void 0!==typeof window)var e=window.getComputedStyle(this.element,null),n=parseInt(e.getPropertyValue("width")),i=parseInt(e.getPropertyValue("height"));this.width=t.width||n||400,this.height=t.height||i||250,this.vis&&this.vis.attr("width",this.width).attr("height",this.height)},this.initialize(e)},Rickshaw.namespace("Rickshaw.Fixtures.Color"),Rickshaw.Fixtures.Color=function(){this.schemes={},this.schemes.spectrum14=["#ecb796","#dc8f70","#b2a470","#92875a","#716c49","#d2ed82","#bbe468","#a1d05d","#e7cbe6","#d8aad6","#a888c2","#9dc2d3","#649eb9","#387aa3"].reverse(),this.schemes.spectrum2000=["#57306f","#514c76","#646583","#738394","#6b9c7d","#84b665","#a7ca50","#bfe746","#e2f528","#fff726","#ecdd00","#d4b11d","#de8800","#de4800","#c91515","#9a0000","#7b0429","#580839","#31082b"],this.schemes.spectrum2001=["#2f243f","#3c2c55","#4a3768","#565270","#6b6b7c","#72957f","#86ad6e","#a1bc5e","#b8d954","#d3e04e","#ccad2a","#cc8412","#c1521d","#ad3821","#8a1010","#681717","#531e1e","#3d1818","#320a1b"],this.schemes.classic9=["#423d4f","#4a6860","#848f39","#a2b73c","#ddcb53","#c5a32f","#7d5836","#963b20","#7c2626","#491d37","#2f254a"].reverse(),this.schemes.httpStatus={503:"#ea5029",502:"#d23f14",500:"#bf3613",410:"#efacea",409:"#e291dc",403:"#f457e8",408:"#e121d2",401:"#b92dae",405:"#f47ceb",404:"#a82a9f",400:"#b263c6",301:"#6fa024",302:"#87c32b",307:"#a0d84c",304:"#28b55c",200:"#1a4f74",206:"#27839f",201:"#52adc9",202:"#7c979f",203:"#a5b8bd",204:"#c1cdd1"},this.schemes.colorwheel=["#b5b6a9","#858772","#785f43","#96557e","#4682b4","#65b9ac","#73c03a","#cb513a"].reverse(),this.schemes.cool=["#5e9d2f","#73c03a","#4682b4","#7bc3b8","#a9884e","#c1b266","#a47493","#c09fb5"],this.schemes.munin=["#00cc00","#0066b3","#ff8000","#ffcc00","#330099","#990099","#ccff00","#ff0000","#808080","#008f00","#00487d","#b35a00","#b38f00","#6b006b","#8fb300","#b30000","#bebebe","#80ff80","#80c9ff","#ffc080","#ffe680","#aa80ff","#ee00cc","#ff8080","#666600","#ffbfff","#00ffcc","#cc6699","#999900"]},Rickshaw.namespace("Rickshaw.Fixtures.RandomData"),Rickshaw.Fixtures.RandomData=function(o){o=o||1;var e=200,s=Math.floor((new Date).getTime()/1e3);this.addData=function(t){var i=100*Math.random()+15+e,r=t[0].length,a=1;t.forEach(function(t){var e=20*Math.random(),n=i/25+a+++15*(Math.cos(r*a*11/960)+2)+7*(Math.cos(r/7)+2)+1*(Math.cos(r/17)+2);t.push({x:r*o+s,y:n+e})}),e=.85*i}},Rickshaw.namespace("Rickshaw.Fixtures.Time"),Rickshaw.Fixtures.Time=function(){(new Date).getTimezoneOffset();var e=this;this.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.units=[{name:"decade",seconds:315576e3,formatter:function(t){return 10*parseInt(t.getUTCFullYear()/10)}},{name:"year",seconds:31557600,formatter:function(t){return t.getUTCFullYear()}},{name:"month",seconds:2635200,formatter:function(t){return e.months[t.getUTCMonth()]}},{name:"week",seconds:604800,formatter:function(t){return e.formatDate(t)}},{name:"day",seconds:86400,formatter:function(t){return t.getUTCDate()}},{name:"6 hour",seconds:21600,formatter:function(t){return e.formatTime(t)}},{name:"hour",seconds:3600,formatter:function(t){return e.formatTime(t)}},{name:"15 minute",seconds:900,formatter:function(t){return e.formatTime(t)}},{name:"minute",seconds:60,formatter:function(t){return t.getUTCMinutes()}},{name:"15 second",seconds:15,formatter:function(t){return t.getUTCSeconds()+"s"}},{name:"second",seconds:1,formatter:function(t){return t.getUTCSeconds()+"s"}}],this.unit=function(e){return this.units.filter(function(t){return e==t.name}).shift()},this.formatDate=function(t){return t.toUTCString().match(/, (\w+ \w+ \w+)/)[1]},this.formatTime=function(t){return t.toUTCString().match(/(\d+:\d+):/)[1]},this.ceil=function(t,e){if("month"==e.name){var n=new Date(1e3*(t+e.seconds-1));return(i=new Date(0)).setUTCFullYear(n.getUTCFullYear()),i.setUTCMonth(n.getUTCMonth()),i.setUTCDate(1),i.setUTCHours(0),i.setUTCMinutes(0),i.setUTCSeconds(0),i.setUTCMilliseconds(0),i.getTime()/1e3}if("year"==e.name){var i;n=new Date(1e3*(t+e.seconds-1));return(i=new Date(0)).setUTCFullYear(n.getUTCFullYear()),i.setUTCMonth(0),i.setUTCDate(1),i.setUTCHours(0),i.setUTCMinutes(0),i.setUTCSeconds(0),i.setUTCMilliseconds(0),i.getTime()/1e3}return Math.ceil(t/e.seconds)*e.seconds}},Rickshaw.namespace("Rickshaw.Fixtures.Number"),Rickshaw.Fixtures.Number.formatKMBT=function(t){return 1e12<=t?t/1e12+"T":1e9<=t?t/1e9+"B":1e6<=t?t/1e6+"M":1e3<=t?t/1e3+"K":t<1&&0<t?t.toFixed(2):0==t?"":t},Rickshaw.Fixtures.Number.formatBase1024KMGTP=function(t){return 0x4000000000000<=t?t/0x4000000000000+"P":1099511627776<=t?t/1099511627776+"T":1073741824<=t?t/1073741824+"G":1048576<=t?t/1048576+"M":1024<=t?t/1024+"K":t<1&&0<t?t.toFixed(2):0==t?"":t},Rickshaw.namespace("Rickshaw.Color.Palette"),Rickshaw.Color.Palette=function(t){var e=new Rickshaw.Fixtures.Color;if(t=t||{},this.schemes={},this.scheme=e.schemes[t.scheme]||t.scheme||e.schemes.colorwheel,this.runningIndex=0,this.generatorIndex=0,t.interpolatedStopCount){var n,i,r=this.scheme.length-1,a=[];for(n=0;n<r;n++){a.push(this.scheme[n]);var o=d3.interpolateHsl(this.scheme[n],this.scheme[n+1]);for(i=1;i<t.interpolatedStopCount;i++)a.push(o(1/t.interpolatedStopCount*i))}a.push(this.scheme[this.scheme.length-1]),this.scheme=a}this.rotateCount=this.scheme.length,this.color=function(t){return this.scheme[t]||this.scheme[this.runningIndex++]||this.interpolateColor()||"#808080"},this.interpolateColor=function(){var t;if(Array.isArray(this.scheme))return this.generatorIndex==2*this.rotateCount-1?(t=d3.interpolateHsl(this.scheme[this.generatorIndex],this.scheme[0])(.5),this.generatorIndex=0,this.rotateCount*=2):(t=d3.interpolateHsl(this.scheme[this.generatorIndex],this.scheme[this.generatorIndex+1])(.5),this.generatorIndex++),this.scheme.push(t),t}},Rickshaw.namespace("Rickshaw.Graph.Ajax"),Rickshaw.Graph.Ajax=Rickshaw.Class.create({initialize:function(t){this.dataURL=t.dataURL,this.onData=t.onData||function(t){return t},this.onComplete=t.onComplete||function(){},this.onError=t.onError||function(){},this.args=t,this.request()},request:function(){$.ajax({url:this.dataURL,dataType:"json",success:this.success.bind(this),error:this.error.bind(this)})},error:function(){console.log("error loading dataURL: "+this.dataURL),this.onError(this)},success:function(t,e){t=this.onData(t),this.args.series=this._splice({data:t,series:this.args.series}),this.graph=new Rickshaw.Graph(this.args),this.graph.render(),this.onComplete(this)},_splice:function(t){var e=t.data,n=t.series;return t.series?(n.forEach(function(n){var i=n.key||n.name;if(!i)throw"series needs a key or a name";e.forEach(function(e){var t=e.key||e.name;if(!t)throw"data needs a key or a name";if(i==t){["color","name","data"].forEach(function(t){n[t]=n[t]||e[t]})}})}),n):e}}),Rickshaw.namespace("Rickshaw.Graph.Annotate"),Rickshaw.Graph.Annotate=function(t){this.graph=t.graph;this.elements={timeline:t.element};var s=this;this.data={},this.elements.timeline.classList.add("rickshaw_annotation_timeline"),this.add=function(t,e,n){s.data[t]=s.data[t]||{boxes:[]},s.data[t].boxes.push({content:e,end:n})},this.update=function(){Rickshaw.keys(s.data).forEach(function(t){var a=s.data[t],o=s.graph.x(t);if(o<0||o>s.graph.x.range()[1])return a.element&&(a.line.classList.add("offscreen"),a.element.style.display="none"),void a.boxes.forEach(function(t){t.rangeElement&&t.rangeElement.classList.add("offscreen")});if(!a.element){var e=a.element=document.createElement("div");e.classList.add("annotation"),this.elements.timeline.appendChild(e),e.addEventListener("click",function(t){e.classList.toggle("active"),a.line.classList.toggle("active"),a.boxes.forEach(function(t){t.rangeElement&&t.rangeElement.classList.toggle("active")})},!1)}a.element.style.left=o+"px",a.element.style.display="block",a.boxes.forEach(function(t){var e=t.element;if(e||((e=t.element=document.createElement("div")).classList.add("content"),e.innerHTML=t.content,a.element.appendChild(e),a.line=document.createElement("div"),a.line.classList.add("annotation_line"),s.graph.element.appendChild(a.line),t.end&&(t.rangeElement=document.createElement("div"),t.rangeElement.classList.add("annotation_range"),s.graph.element.appendChild(t.rangeElement))),t.end){var n=o,i=Math.min(s.graph.x(t.end),s.graph.x.range()[1]);i<n&&(i=o,n=Math.max(s.graph.x(t.end),s.graph.x.range()[0]));var r=i-n;t.rangeElement.style.left=n+"px",t.rangeElement.style.width=r+"px",t.rangeElement.classList.remove("offscreen")}a.line.classList.remove("offscreen"),a.line.style.left=o+"px"})},this)},this.graph.onUpdate(function(){s.update()})},Rickshaw.namespace("Rickshaw.Graph.Axis.Time"),Rickshaw.Graph.Axis.Time=function(t){var i=this;this.graph=t.graph,this.elements=[],this.ticksTreatment=t.ticksTreatment||"plain",this.fixedTimeUnit=t.timeUnit;var o=new Rickshaw.Fixtures.Time;this.appropriateTimeUnit=function(){var e,t=o.units,n=this.graph.x.domain(),i=n[1]-n[0];return t.forEach(function(t){2<=Math.floor(i/t.seconds)&&(e=e||t)}),e||o.units[o.units.length-1]},this.tickOffsets=function(){for(var t=this.graph.x.domain(),e=this.fixedTimeUnit||this.appropriateTimeUnit(),n=Math.ceil((t[1]-t[0])/e.seconds),i=t[0],r=[],a=0;a<n;a++)tickValue=o.ceil(i,e),i=tickValue+e.seconds/2,r.push({value:tickValue,unit:e});return r},this.render=function(){this.elements.forEach(function(t){t.parentNode.removeChild(t)}),this.elements=[],this.tickOffsets().forEach(function(t){if(!(i.graph.x(t.value)>i.graph.x.range()[1])){var e=document.createElement("div");e.style.left=i.graph.x(t.value)+"px",e.classList.add("x_tick"),e.classList.add(i.ticksTreatment);var n=document.createElement("div");n.classList.add("title"),n.innerHTML=t.unit.formatter(new Date(1e3*t.value)),e.appendChild(n),i.graph.element.appendChild(e),i.elements.push(e)}})},this.graph.onUpdate(function(){i.render()})},Rickshaw.namespace("Rickshaw.Graph.Axis.Y"),Rickshaw.Graph.Axis.Y=function(r){var n=this;this.initialize=function(t){this.graph=t.graph,this.orientation=t.orientation||"right";var e=t.pixelsPerTick||75;this.ticks=t.ticks||Math.floor(this.graph.height/e),this.tickSize=t.tickSize||4,this.ticksTreatment=t.ticksTreatment||"plain",t.element?(this.element=t.element,this.vis=d3.select(t.element).append("svg:svg").attr("class","rickshaw_graph y_axis"),this.element=this.vis[0][0],this.element.style.position="relative",this.setSize({width:t.width,height:t.height})):this.vis=this.graph.vis,this.graph.onUpdate(function(){n.render()})},this.setSize=function(t){if(t=t||{},this.element){if("undefined"!=typeof window){var e=window.getComputedStyle(this.element.parentNode,null),n=parseInt(e.getPropertyValue("width"));if(!t.auto)var i=parseInt(e.getPropertyValue("height"))}this.width=t.width||n||.1*this.graph.width,this.height=t.height||i||this.graph.height,this.vis.attr("width",this.width).attr("height",1.1*this.height);var r=.1*this.height;this.element.style.top=-1*r+"px"}},this.render=function(){this.graph.height!==this._renderHeight&&this.setSize({auto:!0});var t=d3.svg.axis().scale(this.graph.y).orient(this.orientation);if(t.tickFormat(r.tickFormat||function(t){return t}),"left"==this.orientation)var e=.1*this.height,n="translate("+this.width+", "+e+")";this.element&&this.vis.selectAll("*").remove(),this.vis.append("svg:g").attr("class",["y_ticks",this.ticksTreatment].join(" ")).attr("transform",n).call(t.ticks(this.ticks).tickSubdivide(0).tickSize(this.tickSize));var i=("right"==this.orientation?1:-1)*this.graph.width;this.graph.vis.append("svg:g").attr("class","y_grid").call(t.ticks(this.ticks).tickSubdivide(0).tickSize(i)),this._renderHeight=this.graph.height},this.initialize(r)},Rickshaw.namespace("Rickshaw.Graph.Behavior.Series.Highlight"),Rickshaw.Graph.Behavior.Series.Highlight=function(t){this.graph=t.graph,this.legend=t.legend;var n=this,i={};this.addHighlightEvents=function(e){e.element.addEventListener("mouseover",function(t){n.legend.lines.forEach(function(t){e!==t&&(i[t.series.name]=i[t.series.name]||t.series.color,t.series.color=d3.interpolateRgb(t.series.color,d3.rgb("#d8d8d8"))(.8).toString())}),n.graph.update()},!1),e.element.addEventListener("mouseout",function(t){n.legend.lines.forEach(function(t){i[t.series.name]&&(t.series.color=i[t.series.name])}),n.graph.update()},!1)},this.legend&&this.legend.lines.forEach(function(t){n.addHighlightEvents(t)})},Rickshaw.namespace("Rickshaw.Graph.Behavior.Series.Order"),Rickshaw.Graph.Behavior.Series.Order=function(t){this.graph=t.graph,this.legend=t.legend;var r=this;$(function(){$(r.legend.list).sortable({containment:"parent",tolerance:"pointer",update:function(t,e){var n=[];$(r.legend.list).find("li").each(function(t,e){e.series&&n.push(e.series)});for(var i=r.graph.series.length-1;0<=i;i--)r.graph.series[i]=n.shift();r.graph.update()}}),$(r.legend.list).disableSelection()}),this.graph.onUpdate(function(){var t=window.getComputedStyle(r.legend.element).height;r.legend.element.style.height=t})},Rickshaw.namespace("Rickshaw.Graph.Behavior.Series.Toggle"),Rickshaw.Graph.Behavior.Series.Toggle=function(t){this.graph=t.graph,this.legend=t.legend;var a=this;this.addAnchor=function(r){var t=document.createElement("a");t.innerHTML="&#10004;",t.classList.add("action"),r.element.insertBefore(t,r.element.firstChild),t.onclick=function(t){r.series.disabled?(r.series.enable(),r.element.classList.remove("disabled")):(r.series.disable(),r.element.classList.add("disabled"))},r.element.getElementsByTagName("span")[0].onclick=function(t){var e=r.series.disabled;if(!e)for(var n=0;n<a.legend.lines.length;n++){var i=a.legend.lines[n];if(r.series!==i.series&&!i.series.disabled){e=!0;break}}e?(r.series.enable(),r.element.classList.remove("disabled"),a.legend.lines.forEach(function(t){r.series!==t.series&&(t.series.disable(),t.element.classList.add("disabled"))})):a.legend.lines.forEach(function(t){t.series.enable(),t.element.classList.remove("disabled")})}},this.legend&&($(this.legend.list).sortable({start:function(t,e){e.item.bind("no.onclick",function(t){t.preventDefault()})},stop:function(t,e){setTimeout(function(){e.item.unbind("no.onclick")},250)}}),this.legend.lines.forEach(function(t){a.addAnchor(t)})),this._addBehavior=function(){this.graph.series.forEach(function(t){t.disable=function(){if(a.graph.series.length<=1)throw"only one series left";t.disabled=!0,a.graph.update()},t.enable=function(){t.disabled=!1,a.graph.update()}})},this._addBehavior(),this.updateBehaviour=function(){this._addBehavior()}},Rickshaw.namespace("Rickshaw.Graph.HoverDetail"),Rickshaw.Graph.HoverDetail=Rickshaw.Class.create({initialize:function(t){var e=this.graph=t.graph;this.xFormatter=t.xFormatter||function(t){return new Date(1e3*t).toUTCString()},this.yFormatter=t.yFormatter||function(t){return t.toFixed(2)};var n=this.element=document.createElement("div");n.className="detail",this.visible=!0,e.element.appendChild(n),this.lastEvent=null,this._addListeners(),this.onShow=t.onShow,this.onHide=t.onHide,this.onRender=t.onRender,this.formatter=t.formatter||this.formatter},formatter:function(t,e,n,i,r,a){return t.name+":&nbsp;"+r},update:function(t){if((t=t||this.lastEvent)&&(this.lastEvent=t).target.nodeName.match(/^(path|svg|rect)$/)){for(var e=this.graph,n=t.offsetX||t.layerX,i=t.offsetY||t.layerY,r=e.x.invert(n),a=e.stackedData,o=a.slice(-1).shift(),s=d3.scale.linear().domain([o[0].x,o.slice(-1).shift().x]).range([0,o.length]),l=Math.floor(s(r)),u=Math.min(l||0,a[0].length-1),h=l;h<a[0].length-1&&(a[0][h]&&a[0][h+1]);){if(a[0][h].x<=r&&a[0][h+1].x>r){u=h;break}a[0][h+1]<=r?h++:h--}r=a[0][u].x;var c,f=this.xFormatter(r),p=e.x(r),d=0,g=e.series.active().map(function(t){return{order:d++,series:t,name:t.name,value:t.stack[u]}}),v=e.y.magnitude.invert(e.element.offsetHeight-i);g.sort(function(t,e){return t.value.y0+t.value.y-(e.value.y0+e.value.y)}).forEach(function(t){t.formattedYValue=this.yFormatter.constructor==Array?this.yFormatter[g.indexOf(t)](t.value.y):this.yFormatter(t.value.y),t.graphX=p,t.graphY=e.y(t.value.y0+t.value.y),v>t.value.y0&&v<t.value.y0+t.value.y&&!c&&((c=t).active=!0)},this),this.element.innerHTML="",this.element.style.left=e.x(r)+"px",this.visible&&this.render({detail:g,domainX:r,formattedXValue:f,mouseX:n,mouseY:i})}},hide:function(){this.visible=!1,this.element.classList.add("inactive"),"function"==typeof this.onHide&&this.onHide()},show:function(){this.visible=!0,this.element.classList.remove("inactive"),"function"==typeof this.onShow&&this.onShow()},render:function(t){var e=t.detail,i=t.domainX,r=(t.mouseX,t.mouseY,t.formattedXValue),n=document.createElement("div");n.className="x_label",n.innerHTML=r,this.element.appendChild(n),e.forEach(function(t){var e=document.createElement("div");e.className="item",e.innerHTML=this.formatter(t.series,i,t.value.y,r,t.formattedYValue,t),e.style.top=this.graph.y(t.value.y0+t.value.y)+"px",this.element.appendChild(e);var n=document.createElement("div");n.className="dot",n.style.top=e.style.top,n.style.borderColor=t.series.color,this.element.appendChild(n),t.active&&(e.className="item active",n.className="dot active")},this),this.show(),"function"==typeof this.onRender&&this.onRender(t)},_addListeners:function(){this.graph.element.addEventListener("mousemove",function(t){this.visible=!0,this.update(t)}.bind(this),!1),this.graph.onUpdate(function(){this.update()}.bind(this)),this.graph.element.addEventListener("mouseout",function(t){t.relatedTarget&&!(t.relatedTarget.compareDocumentPosition(this.graph.element)&Node.DOCUMENT_POSITION_CONTAINS)&&this.hide()}.bind(this),!1)}}),Rickshaw.namespace("Rickshaw.Graph.JSONP"),Rickshaw.Graph.JSONP=Rickshaw.Class.create(Rickshaw.Graph.Ajax,{request:function(){$.ajax({url:this.dataURL,dataType:"jsonp",success:this.success.bind(this),error:this.error.bind(this)})}}),Rickshaw.namespace("Rickshaw.Graph.Legend"),Rickshaw.Graph.Legend=function(t){var e=this.element=t.element,n=this.graph=t.graph,a=this;e.classList.add("rickshaw_legend");var o=this.list=document.createElement("ul");e.appendChild(o);var i=n.series.map(function(t){return t}).reverse();this.lines=[],this.addLine=function(t){var e=document.createElement("li");e.className="line";var n=document.createElement("div");n.className="swatch",n.style.backgroundColor=t.color,e.appendChild(n);var i=document.createElement("span");i.className="label",i.innerHTML=t.name,e.appendChild(i),o.appendChild(e),(e.series=t).noLegend&&(e.style.display="none");var r={element:e,series:t};a.shelving&&(a.shelving.addAnchor(r),a.shelving.updateBehaviour()),a.highlighter&&a.highlighter.addHighlightEvents(r),a.lines.push(r)},i.forEach(function(t){a.addLine(t)}),n.onUpdate(function(){})},Rickshaw.namespace("Rickshaw.Graph.RangeSlider"),Rickshaw.Graph.RangeSlider=function(t){var e=this.element=t.element,n=this.graph=t.graph;$(function(){$(e).slider({range:!0,min:n.dataDomain()[0],max:n.dataDomain()[1],values:[n.dataDomain()[0],n.dataDomain()[1]],slide:function(t,e){n.window.xMin=e.values[0],n.window.xMax=e.values[1],n.update(),n.dataDomain()[0]==e.values[0]&&(n.window.xMin=void 0),n.dataDomain()[1]==e.values[1]&&(n.window.xMax=void 0)}})}),e[0].style.width=n.width+"px",n.onUpdate(function(){var t=$(e).slider("option","values");$(e).slider("option","min",n.dataDomain()[0]),$(e).slider("option","max",n.dataDomain()[1]),null==n.window.xMin&&(t[0]=n.dataDomain()[0]),null==n.window.xMax&&(t[1]=n.dataDomain()[1]),$(e).slider("option","values",t)})},Rickshaw.namespace("Rickshaw.Graph.Renderer"),Rickshaw.Graph.Renderer=Rickshaw.Class.create({initialize:function(t){this.graph=t.graph,this.tension=t.tension||this.tension,this.graph.unstacker=this.graph.unstacker||new Rickshaw.Graph.Unstacker({graph:this.graph}),this.configure(t)},seriesPathFactory:function(){},seriesStrokeFactory:function(){},defaults:function(){return{tension:.8,strokeWidth:2,unstack:!0,padding:{top:.01,right:0,bottom:.01,left:0},stroke:!1,fill:!1}},domain:function(){var e=[],t=this.graph.stackedData||this.graph.stackData();(this.unstack?t:[t.slice(-1).shift()]).forEach(function(t){t.forEach(function(t){e.push(t.y+t.y0)})});var n=t[0][0].x,i=t[0][t[0].length-1].x;i+=(i-(n-=(i-n)*this.padding.left))*this.padding.right;var r="auto"===this.graph.min?d3.min(e):this.graph.min||0,a=this.graph.max||d3.max(e);return("auto"===this.graph.min||r<0)&&(r-=(a-r)*this.padding.bottom),void 0===this.graph.max&&(a+=(a-r)*this.padding.top),{x:[n,i],y:[r,a]}},render:function(){var t=this.graph;t.vis.selectAll("*").remove();var e=t.vis.selectAll("path").data(this.graph.stackedData).enter().append("svg:path").attr("d",this.seriesPathFactory()),n=0;t.series.forEach(function(t){t.disabled||(t.path=e[0][n++],this._styleSeries(t))},this)},_styleSeries:function(t){var e=this.fill?t.color:"none",n=this.stroke?t.color:"none";t.path.setAttribute("fill",e),t.path.setAttribute("stroke",n),t.path.setAttribute("stroke-width",this.strokeWidth),t.path.setAttribute("class",t.className)},configure:function(n){n=n||{},Rickshaw.keys(this.defaults()).forEach(function(e){n.hasOwnProperty(e)?"object"==typeof this.defaults()[e]?Rickshaw.keys(this.defaults()[e]).forEach(function(t){this[e][t]=void 0!==n[e][t]?n[e][t]:void 0!==this[e][t]?this[e][t]:this.defaults()[e][t]},this):this[e]=void 0!==n[e]?n[e]:void 0!==this[e]?this[e]:void 0!==this.graph[e]?this.graph[e]:this.defaults()[e]:this[e]=this[e]||this.graph[e]||this.defaults()[e]},this)},setStrokeWidth:function(t){void 0!==t&&(this.strokeWidth=t)},setTension:function(t){void 0!==t&&(this.tension=t)}}),Rickshaw.namespace("Rickshaw.Graph.Renderer.Line"),Rickshaw.Graph.Renderer.Line=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"line",defaults:function($super){return Rickshaw.extend($super(),{unstack:!0,fill:!1,stroke:!0})},seriesPathFactory:function(){var e=this.graph;return d3.svg.line().x(function(t){return e.x(t.x)}).y(function(t){return e.y(t.y)}).interpolate(this.graph.interpolation).tension(this.tension)}}),Rickshaw.namespace("Rickshaw.Graph.Renderer.Stack"),Rickshaw.Graph.Renderer.Stack=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"stack",defaults:function($super){return Rickshaw.extend($super(),{fill:!0,stroke:!1,unstack:!1})},seriesPathFactory:function(){var e=this.graph;return d3.svg.area().x(function(t){return e.x(t.x)}).y0(function(t){return e.y(t.y0)}).y1(function(t){return e.y(t.y+t.y0)}).interpolate(this.graph.interpolation).tension(this.tension)}}),Rickshaw.namespace("Rickshaw.Graph.Renderer.Bar"),Rickshaw.Graph.Renderer.Bar=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"bar",defaults:function($super){var t=Rickshaw.extend($super(),{gapSize:.05,unstack:!1});return delete t.tension,t},initialize:function($super,t){t=t||{},this.gapSize=t.gapSize||this.gapSize,$super(t)},domain:function($super){var t=$super(),e=this._frequentInterval();return t.x[1]+=parseInt(e.magnitude),t},barWidth:function(){var t=(this.graph.stackedData||this.graph.stackData()).slice(-1).shift(),e=this._frequentInterval();return this.graph.x(t[0].x+e.magnitude*(1-this.gapSize))},render:function(){var n=this.graph;n.vis.selectAll("*").remove();var t=this.barWidth(),i=0,e=n.series.filter(function(t){return!t.disabled}).length,r=this.unstack?t/e:t,a=function(t){return"matrix("+[1,0,0,t.y<0?-1:1,0,t.y<0?2*n.y.magnitude(Math.abs(t.y)):0].join(",")+")"};n.series.forEach(function(e){if(!e.disabled){var t=n.vis.selectAll("path").data(e.stack).enter().append("svg:rect").attr("x",function(t){return n.x(t.x)+i}).attr("y",function(t){return n.y(t.y0+Math.abs(t.y))*(t.y<0?-1:1)}).attr("width",r).attr("height",function(t){return n.y.magnitude(Math.abs(t.y))}).attr("transform",a);Array.prototype.forEach.call(t[0],function(t){t.setAttribute("fill",e.color)}),this.unstack&&(i+=r)}},this)},_frequentInterval:function(){for(var t=(this.graph.stackedData||this.graph.stackData()).slice(-1).shift(),e={},n=0;n<t.length-1;n++){var i=t[n+1].x-t[n].x;e[i]=e[i]||0,e[i]++}var r={count:0};return Rickshaw.keys(e).forEach(function(t){r.count<e[t]&&(r={count:e[t],magnitude:t})}),this._frequentInterval=function(){return r},r}}),Rickshaw.namespace("Rickshaw.Graph.Renderer.Area"),Rickshaw.Graph.Renderer.Area=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"area",defaults:function($super){return Rickshaw.extend($super(),{unstack:!1,fill:!1,stroke:!1})},seriesPathFactory:function(){var e=this.graph;return d3.svg.area().x(function(t){return e.x(t.x)}).y0(function(t){return e.y(t.y0)}).y1(function(t){return e.y(t.y+t.y0)}).interpolate(e.interpolation).tension(this.tension)},seriesStrokeFactory:function(){var e=this.graph;return d3.svg.line().x(function(t){return e.x(t.x)}).y(function(t){return e.y(t.y+t.y0)}).interpolate(e.interpolation).tension(this.tension)},render:function(){var t=this.graph;t.vis.selectAll("*").remove();var e=t.vis.selectAll("path").data(this.graph.stackedData).enter().insert("svg:g","g");e.append("svg:path").attr("d",this.seriesPathFactory()).attr("class","area"),this.stroke&&e.append("svg:path").attr("d",this.seriesStrokeFactory()).attr("class","line");var n=0;t.series.forEach(function(t){t.disabled||(t.path=e[0][n++],this._styleSeries(t))},this)},_styleSeries:function(t){t.path&&(d3.select(t.path).select(".area").attr("fill",t.color),this.stroke&&d3.select(t.path).select(".line").attr("fill","none").attr("stroke",t.stroke||d3.interpolateRgb(t.color,"black")(.125)).attr("stroke-width",this.strokeWidth),t.className&&t.path.setAttribute("class",t.className))}}),Rickshaw.namespace("Rickshaw.Graph.Renderer.ScatterPlot"),Rickshaw.Graph.Renderer.ScatterPlot=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"scatterplot",defaults:function($super){return Rickshaw.extend($super(),{unstack:!0,fill:!0,stroke:!1,padding:{top:.01,right:.01,bottom:.01,left:.01},dotSize:4})},initialize:function($super,t){$super(t)},render:function(){var n=this.graph;n.vis.selectAll("*").remove(),n.series.forEach(function(e){if(!e.disabled){var t=n.vis.selectAll("path").data(e.stack).enter().append("svg:circle").attr("cx",function(t){return n.x(t.x)}).attr("cy",function(t){return n.y(t.y)}).attr("r",function(t){return"r"in t?t.r:n.renderer.dotSize});Array.prototype.forEach.call(t[0],function(t){t.setAttribute("fill",e.color)})}},this)}}),Rickshaw.namespace("Rickshaw.Graph.Smoother"),Rickshaw.Graph.Smoother=function(t){this.graph=t.graph,this.element=t.element;var o=this;this.aggregationScale=1,this.element&&$(function(){$(o.element).slider({min:1,max:100,slide:function(t,e){o.setScale(e.value),o.graph.update()}})}),o.graph.stackData.hooks.data.push({name:"smoother",orderPosition:50,f:function(t){var a=[];return t.forEach(function(t){for(var e=[];t.length;){var n=0,i=0,r=t.splice(0,o.aggregationScale);r.forEach(function(t){n+=t.x/r.length,i+=t.y/r.length}),e.push({x:n,y:i})}a.push(e)}),a}}),this.setScale=function(t){if(t<1)throw"scale out of range: "+t;this.aggregationScale=t,this.graph.update()}},Rickshaw.namespace("Rickshaw.Graph.Unstacker"),Rickshaw.Graph.Unstacker=function(t){this.graph=t.graph;var e=this;this.graph.stackData.hooks.after.push({name:"unstacker",f:function(t){return e.graph.renderer.unstack&&t.forEach(function(t){t.forEach(function(t){t.y0=0})}),t}})},Rickshaw.namespace("Rickshaw.Series"),Rickshaw.Series=Rickshaw.Class.create(Array,{initialize:function(t,e,n){n=n||{},this.palette=new Rickshaw.Color.Palette(e),this.timeBase=void 0===n.timeBase?Math.floor((new Date).getTime()/1e3):n.timeBase;var i=void 0===n.timeInterval?1e3:n.timeInterval;this.setTimeInterval(i),t&&"object"==typeof t&&t instanceof Array&&t.forEach(function(t){this.addItem(t)},this)},addItem:function(e){if(void 0===e.name)throw"addItem() needs a name";e.color=e.color||this.palette.color(e.name),e.data=e.data||[],0==e.data.length&&this.length&&0<this.getIndex()?this[0].data.forEach(function(t){e.data.push({x:t.x,y:0})}):0==e.data.length&&e.data.push({x:this.timeBase-(this.timeInterval||0),y:0}),this.push(e),this.legend&&this.legend.addLine(this.itemByName(e.name))},addData:function(e){var n=this.getIndex();Rickshaw.keys(e).forEach(function(t){this.itemByName(t)||this.addItem({name:t})},this),this.forEach(function(t){t.data.push({x:(n*this.timeInterval||1)+this.timeBase,y:e[t.name]||0})},this)},getIndex:function(){return this[0]&&this[0].data&&this[0].data.length?this[0].data.length:0},itemByName:function(t){for(var e=0;e<this.length;e++)if(this[e].name==t)return this[e]},setTimeInterval:function(t){this.timeInterval=t/1e3},setTimeBase:function(t){this.timeBase=t},dump:function(){var n={timeBase:this.timeBase,timeInterval:this.timeInterval,items:[]};return this.forEach(function(t){var e={color:t.color,name:t.name,data:[]};t.data.forEach(function(t){e.data.push({x:t.x,y:t.y})}),n.items.push(e)}),n},load:function(t){t.timeInterval&&(this.timeInterval=t.timeInterval),t.timeBase&&(this.timeBase=t.timeBase),t.items&&t.items.forEach(function(t){this.push(t),this.legend&&this.legend.addLine(this.itemByName(t.name))},this)}}),Rickshaw.Series.zeroFill=function(t){for(var e,n=0,i=t.map(function(t){return t.data});n<Math.max.apply(null,i.map(function(t){return t.length}));)e=Math.min.apply(null,i.filter(function(t){return t[n]}).map(function(t){return t[n].x})),i.forEach(function(t){(!t[n]||t[n].x!=e)&&t.splice(n,0,{x:e,y:0})}),n++},Rickshaw.namespace("Rickshaw.Series.FixedDuration"),Rickshaw.Series.FixedDuration=Rickshaw.Class.create(Rickshaw.Series,{initialize:function(t,e,n){if(void 0===(n=n||{}).timeInterval)throw new Error("FixedDuration series requires timeInterval");if(void 0===n.maxDataPoints)throw new Error("FixedDuration series requires maxDataPoints");if(this.palette=new Rickshaw.Color.Palette(e),this.timeBase=void 0===n.timeBase?Math.floor((new Date).getTime()/1e3):n.timeBase,this.setTimeInterval(n.timeInterval),this[0]&&this[0].data&&this[0].data.length?(this.currentSize=this[0].data.length,this.currentIndex=this[0].data.length):(this.currentSize=0,this.currentIndex=0),this.maxDataPoints=n.maxDataPoints,t&&"object"==typeof t&&t instanceof Array&&(t.forEach(function(t){this.addItem(t)},this),this.currentSize+=1,this.currentIndex+=1),this.timeBase-=(this.maxDataPoints-this.currentSize)*this.timeInterval,void 0!==this.maxDataPoints&&this.currentSize<this.maxDataPoints)for(var i=this.maxDataPoints-this.currentSize-1;0<i;i--)this.currentSize+=1,this.currentIndex+=1,this.forEach(function(t){t.data.unshift({x:((i-1)*this.timeInterval||1)+this.timeBase,y:0,i:i})},this)},addData:function($super,t){if($super(t),this.currentSize+=1,this.currentIndex+=1,void 0!==this.maxDataPoints)for(;this.currentSize>this.maxDataPoints;)this.dropData()},dropData:function(){this.forEach(function(t){t.data.splice(0,1)}),this.currentSize-=1},getIndex:function(){return this.currentIndex}});